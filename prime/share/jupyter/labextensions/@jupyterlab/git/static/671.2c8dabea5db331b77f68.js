(self.webpackChunk_jupyterlab_git=self.webpackChunk_jupyterlab_git||[]).push([[671],{5318:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},862:(e,t,i)=>{var n=i(8).default;function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(s=function(e){return e?i:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var i=s(t);if(i&&i.has(e))return i.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var a=o?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(r,l,a):r[l]=e[l]}return r.default=e,i&&i.set(e,r),r},e.exports.__esModule=!0,e.exports.default=e.exports},8:e=>{function t(i){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},5100:(e,t,i)=>{"use strict";i.d(t,{k:()=>V});var n,s=i(40),r=i(2720),o=i(3992),l=i(8918),a=i(1526),d=i(9520);!function(e){e.hitTestNodes=function(e,t,i){return l.ArrayExt.findFirstIndex(e,(e=>d.ElementExt.hitTest(e,t,i)))},e.findElement=function(e,t){return e.querySelector(`.${t}`)},e.findElements=function(e,t){return e.getElementsByClassName(t)},e.createDomID=function(){return`id-${a.UUID.uuid4()}`}}(n||(n={}));var u,c=i(189);!function(e){function t(t){return!("object"!=typeof t||!t)&&e.symbol in t}async function i(e){const t="string"==typeof e,i=function(){const e=window.document.createElement("iframe");e.setAttribute("sandbox","allow-modals allow-same-origin");return e.setAttribute("style","visibility:hidden;width:0;height:0;position:absolute;z-index:-9999;bottom:0;"),e.setAttribute("width","0"),e.setAttribute("height","0"),e}(),s=window.document.body;s.appendChild(i),t?(i.srcdoc=e,await n(i)):(i.src="about:blank",await n(i),function(e,t){e.contentDocument.body.appendChild(t.cloneNode(!0)),e.contentDocument.close()}(i,e));const r=new Promise((e=>{const t=()=>{document.removeEventListener("mousemove",t,!0),document.removeEventListener("mousedown",t,!0),document.removeEventListener("keydown",t,!0),e()};document.addEventListener("mousemove",t,!0),document.addEventListener("mousedown",t,!0),document.addEventListener("keydown",t,!0)}));var o;(o=i.contentWindow).document.execCommand("print",!1)||o.print(),await r,s.removeChild(i)}function n(e){return new Promise((t=>{e.onload=()=>t()}))}e.symbol=Symbol("printable"),e.isPrintable=t,e.getPrintFunction=function(i){return t(i)?i[e.symbol]():null},e.printWidget=function(e){return i(e.node)},e.printURL=async function(e){const t=c.ServerConnection.makeSettings();return i(await(await c.ServerConnection.makeRequest(e,{},t)).text())}}(u||(u={}));class h extends o.Widget{constructor(){super(),this.addClass("jp-Spinner"),this.node.tabIndex=-1;const e=document.createElement("div");e.className="jp-SpinnerContent",this.node.appendChild(e)}onActivateRequest(e){this.node.focus()}}var f,p,g=i(7993),m=i(6057),_=i(5658),y=i(6271),v=i(3572),C=i(1840);!function(e){function t(e,t,n=""){e.localName===t&&e.classList.add("jp-mod-styled"),"select"===e.localName&&i(e);const s=e.getElementsByTagName(t);for(let e=0;e<s.length;e++){const r=s[e];r.classList.add("jp-mod-styled"),n&&r.classList.add(n),"select"===t&&i(r)}}function i(e){const t=document.createElement("div");return t.classList.add("jp-select-wrapper"),e.addEventListener("focus",p.onFocus),e.addEventListener("blur",p.onFocus),e.classList.add("jp-mod-styled"),e.parentElement&&e.parentElement.replaceChild(t,e),t.appendChild(e),t.appendChild(g.caretDownEmptyIcon.element({tag:"span",stylesheet:"select",right:"8px",top:"5px",width:"18px"})),t}e.styleNode=function(e,i=""){t(e,"select",i),t(e,"textarea",i),t(e,"input",i),t(e,"button",i)},e.styleNodeByTag=t,e.wrapSelect=i}(f||(f={})),function(e){e.onFocus=function(e){const t=e.target.parentElement;t&&("focus"===e.type?t.classList.add("jp-mod-focused"):t.classList.remove("jp-mod-focused"))}}(p||(p={}));var b=i(4456);class D extends o.Widget{static create(e){return new class extends D{render(){return e}}}onUpdateRequest(e){this.renderPromise=this.renderDOM()}onAfterAttach(e){r.MessageLoop.sendMessage(this,o.Widget.Msg.UpdateRequest)}onBeforeDetach(e){b.unmountComponentAtNode(this.node)}renderDOM(){return new Promise((e=>{const t=this.render();(Array.isArray(t)||t)&&b.render(t,this.node,e)}))}}class w extends y.Component{constructor(e){super(e),this.slot=(e,t)=>{this.props.shouldUpdate&&!this.props.shouldUpdate(e,t)||this.setState({value:[e,t]})},this.state={value:[this.props.initialSender,this.props.initialArgs]}}componentDidMount(){this.props.signal.connect(this.slot)}componentWillUnmount(){this.props.signal.disconnect(this.slot)}render(){return this.props.children(...this.state.value)}}var S,M=i(8216);class E{constructor(e){this._currentChanged=new C.Signal(this),this._isDisposed=!1,this._widgetAdded=new C.Signal(this),this._widgetUpdated=new C.Signal(this);const t=this._focusTracker=new o.FocusTracker,i=this._pool=new M.RestorablePool(e);this.namespace=e.namespace,t.currentChanged.connect(((e,t)=>{t.newValue!==this.currentWidget&&(i.current=t.newValue)}),this),i.added.connect(((e,t)=>{this._widgetAdded.emit(t)}),this),i.currentChanged.connect(((e,n)=>{null===n&&t.currentWidget?i.current=t.currentWidget:(this.onCurrentChanged(n),this._currentChanged.emit(n))}),this),i.updated.connect(((e,t)=>{this._widgetUpdated.emit(t)}),this)}get currentChanged(){return this._currentChanged}get currentWidget(){return this._pool.current||null}get restored(){return this._pool.restored}get size(){return this._pool.size}get widgetAdded(){return this._widgetAdded}get widgetUpdated(){return this._widgetUpdated}async add(e){this._focusTracker.add(e),await this._pool.add(e),this._focusTracker.activeWidget||(this._pool.current=e)}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,this._pool.dispose(),this._focusTracker.dispose(),C.Signal.clearData(this))}find(e){return this._pool.find(e)}forEach(e){return this._pool.forEach(e)}filter(e){return this._pool.filter(e)}inject(e){return this._pool.inject(e)}has(e){return this._pool.has(e)}async restore(e){return this._pool.restore(e)}async save(e){return this._pool.save(e)}onCurrentChanged(e){}}class k extends o.Widget{constructor(e={}){super(),this._focusNodeSelector="",this.addClass("jp-Dialog");const t=S.handleOptions(e),i=t.renderer;this._host=t.host,this._defaultButton=t.defaultButton,this._buttons=t.buttons,this._hasClose=t.hasClose,this._buttonNodes=(0,l.toArray)((0,l.map)(this._buttons,(e=>i.createButtonNode(e)))),this._lastMouseDownInDialog=!1;const n=this.layout=new o.PanelLayout,s=new o.Panel;s.addClass("jp-Dialog-content"),"string"==typeof e.body&&s.addClass("jp-Dialog-content-small"),n.addWidget(s),this._body=t.body;const r=i.createHeader(t.title,(()=>this.reject()),e),a=i.createBody(t.body),d=i.createFooter(this._buttonNodes);s.addWidget(r),s.addWidget(a),s.addWidget(d),this._primary=this._buttonNodes[this._defaultButton],this._focusNodeSelector=e.focusNodeSelector,k.tracker.add(this)}dispose(){const e=this._promise;e&&(this._promise=null,e.reject(void 0),l.ArrayExt.removeFirstOf(S.launchQueue,e.promise)),super.dispose()}launch(){if(this._promise)return this._promise.promise;const e=this._promise=new a.PromiseDelegate,t=Promise.all(S.launchQueue);return S.launchQueue.push(this._promise.promise),t.then((()=>this._promise?(o.Widget.attach(this,this._host),e.promise):Promise.resolve({button:k.cancelButton(),value:null})))}resolve(e){this._promise&&(void 0===e&&(e=this._defaultButton),this._resolve(this._buttons[e]))}reject(){this._promise&&this._resolve(k.cancelButton())}handleEvent(e){switch(e.type){case"keydown":this._evtKeydown(e);break;case"mousedown":this._evtMouseDown(e);break;case"click":this._evtClick(e);break;case"focus":this._evtFocus(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation()}}onAfterAttach(e){var t;const i=this.node;if(i.addEventListener("keydown",this,!0),i.addEventListener("contextmenu",this,!0),i.addEventListener("click",this,!0),document.addEventListener("mousedown",this,!0),document.addEventListener("focus",this,!0),this._first=S.findFirstFocusable(this.node),this._original=document.activeElement,this._focusNodeSelector){const e=this.node.querySelector(".jp-Dialog-body"),t=null==e?void 0:e.querySelector(this._focusNodeSelector);t&&(this._primary=t)}null===(t=this._primary)||void 0===t||t.focus()}onAfterDetach(e){const t=this.node;t.removeEventListener("keydown",this,!0),t.removeEventListener("contextmenu",this,!0),t.removeEventListener("click",this,!0),document.removeEventListener("focus",this,!0),document.removeEventListener("mousedown",this,!0),this._original.focus()}onCloseRequest(e){this._promise&&this.reject(),super.onCloseRequest(e)}_evtClick(e){if(!this.node.getElementsByClassName("jp-Dialog-content")[0].contains(e.target))return e.stopPropagation(),e.preventDefault(),void(this._hasClose&&!this._lastMouseDownInDialog&&this.reject());for(const t of this._buttonNodes)if(t.contains(e.target)){const e=this._buttonNodes.indexOf(t);this.resolve(e)}}_evtKeydown(e){switch(e.keyCode){case 27:e.stopPropagation(),e.preventDefault(),this._hasClose&&this.reject();break;case 37:{const t=document.activeElement;if(t instanceof HTMLButtonElement){let i=this._buttonNodes.indexOf(t)-1;i<0&&(i=this._buttonNodes.length-1);const n=this._buttonNodes[i];e.stopPropagation(),e.preventDefault(),n.focus()}break}case 39:{const t=document.activeElement;if(t instanceof HTMLButtonElement){let i=this._buttonNodes.indexOf(t)+1;i==this._buttons.length&&(i=0);const n=this._buttonNodes[i];e.stopPropagation(),e.preventDefault(),n.focus()}break}case 9:{const t=this._buttonNodes[this._buttons.length-1];document.activeElement!==t||e.shiftKey||(e.stopPropagation(),e.preventDefault(),this._first.focus());break}case 13:{e.stopPropagation(),e.preventDefault();const t=document.activeElement;let i;t instanceof HTMLButtonElement&&(i=this._buttonNodes.indexOf(t)),this.resolve(i);break}}}_evtFocus(e){var t;const i=e.target;this.node.contains(i)||(e.stopPropagation(),null===(t=this._buttonNodes[this._defaultButton])||void 0===t||t.focus())}_evtMouseDown(e){const t=this.node.getElementsByClassName("jp-Dialog-content")[0],i=e.target;this._lastMouseDownInDialog=t.contains(i)}_resolve(e){const t=this._promise;if(!t)return void this.dispose();this._promise=null,l.ArrayExt.removeFirstOf(S.launchQueue,t.promise);const i=this._body;let n=null;e.accept&&i instanceof o.Widget&&"function"==typeof i.getValue&&(n=i.getValue()),this.dispose(),t.resolve({button:e,value:n})}}!function(e){function t(e){e.accept=!1!==e.accept;const t=e.accept?"OK":"Cancel";return{label:e.label||t,iconClass:e.iconClass||"",iconLabel:e.iconLabel||"",caption:e.caption||"",className:e.className||"",accept:e.accept,actions:e.actions||[],displayType:e.displayType||"default"}}e.createButton=t,e.cancelButton=function(e={}){return e.accept=!1,t(e)},e.okButton=function(e={}){return e.accept=!0,t(e)},e.warnButton=function(e={}){return e.displayType="warn",t(e)},e.flush=function(){e.tracker.forEach((e=>{e.dispose()}))};class i{createHeader(e,t=(()=>{}),i={}){let n;return n="string"==typeof e?D.create(y.createElement(y.Fragment,null,e,i.hasClose&&y.createElement(g.Button,{className:"jp-Dialog-close-button",onMouseDown:e=>{0===e.button&&(e.preventDefault(),t())},onKeyDown:e=>{const{key:i}=e;"Enter"!==i&&" "!==i||t()},title:"Cancel",minimal:!0},y.createElement(g.LabIcon.resolveReact,{icon:g.closeIcon,iconClass:"jp-Icon",className:"jp-ToolbarButtonComponent-icon",tag:"span"})))):D.create(e),n.addClass("jp-Dialog-header"),f.styleNode(n.node),n}createBody(e){let t;return"string"==typeof e?(t=new o.Widget({node:document.createElement("span")}),t.node.textContent=e):e instanceof o.Widget?t=e:(t=D.create(e),r.MessageLoop.sendMessage(t,o.Widget.Msg.UpdateRequest)),t.addClass("jp-Dialog-body"),f.styleNode(t.node),t}createFooter(e){const t=new o.Widget;return t.addClass("jp-Dialog-footer"),(0,l.each)(e,(e=>{t.node.appendChild(e)})),f.styleNode(t.node),t}createButtonNode(e){const t=document.createElement("button");return t.className=this.createItemClass(e),t.appendChild(this.renderIcon(e)),t.appendChild(this.renderLabel(e)),t}createItemClass(e){let t="jp-Dialog-button";e.accept?t+=" jp-mod-accept":t+=" jp-mod-reject","warn"===e.displayType&&(t+=" jp-mod-warn");const i=e.className;return i&&(t+=` ${i}`),t}renderIcon(e){const t=document.createElement("div");return t.className=this.createIconClass(e),t.appendChild(document.createTextNode(e.iconLabel)),t}createIconClass(e){const t="jp-Dialog-buttonIcon",i=e.iconClass;return i?`${t} ${i}`:t}renderLabel(e){const t=document.createElement("div");return t.className="jp-Dialog-buttonLabel",t.title=e.caption,t.appendChild(document.createTextNode(e.label)),t}}e.Renderer=i,e.defaultRenderer=new i,e.tracker=new E({namespace:"@jupyterlab/apputils:Dialog"})}(k||(k={})),function(e){e.launchQueue=[],e.errorMessagePromiseCache=new Map,e.handleOptions=function(e={}){var t,i,n,s,r,o,l,a;const d=null!==(t=e.buttons)&&void 0!==t?t:[k.cancelButton(),k.okButton()];return{title:null!==(i=e.title)&&void 0!==i?i:"",body:null!==(n=e.body)&&void 0!==n?n:"",host:null!==(s=e.host)&&void 0!==s?s:document.body,buttons:d,defaultButton:null!==(r=e.defaultButton)&&void 0!==r?r:d.length-1,renderer:null!==(o=e.renderer)&&void 0!==o?o:k.defaultRenderer,focusNodeSelector:null!==(l=e.focusNodeSelector)&&void 0!==l?l:"",hasClose:null===(a=e.hasClose)||void 0===a||a}},e.findFirstFocusable=function(e){const t=["input","select","a[href]","textarea","button","[tabindex]"].join(",");return e.querySelectorAll(t)[0]}}(S||(S={}));class O{constructor(e){var t,i,n,r;this._path="",this._name="",this._type="",this._prevKernelName="",this._isDisposed=!1,this._disposed=new C.Signal(this),this._session=null,this._ready=new a.PromiseDelegate,this._initializing=!1,this._initStarted=new a.PromiseDelegate,this._initPromise=new a.PromiseDelegate,this._isReady=!1,this._isTerminating=!1,this._isRestarting=!1,this._kernelChanged=new C.Signal(this),this._sessionChanged=new C.Signal(this),this._statusChanged=new C.Signal(this),this._connectionStatusChanged=new C.Signal(this),this._pendingInput=!1,this._iopubMessage=new C.Signal(this),this._unhandledMessage=new C.Signal(this),this._propertyChanged=new C.Signal(this),this._dialog=null,this._busyDisposable=null,this._pendingKernelName="",this._pendingSessionRequest="",this.sessionManager=e.sessionManager,this.specsManager=e.specsManager,this.translator=e.translator||s.nullTranslator,this._trans=this.translator.load("jupyterlab"),this._path=null!==(t=e.path)&&void 0!==t?t:a.UUID.uuid4(),this._type=null!==(i=e.type)&&void 0!==i?i:"",this._name=null!==(n=e.name)&&void 0!==n?n:"",this._setBusy=e.setBusy,this._kernelPreference=null!==(r=e.kernelPreference)&&void 0!==r?r:{}}get session(){var e;return null!==(e=this._session)&&void 0!==e?e:null}get path(){return this._path}get type(){return this._type}get name(){return this._name}get kernelChanged(){return this._kernelChanged}get sessionChanged(){return this._sessionChanged}get statusChanged(){return this._statusChanged}get pendingInput(){return this._pendingInput}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get propertyChanged(){return this._propertyChanged}get kernelPreference(){return this._kernelPreference}set kernelPreference(e){this._kernelPreference=e}get isReady(){return this._isReady}get ready(){return this._ready.promise}get isTerminating(){return this._isTerminating}get isRestarting(){return this._isRestarting}get hasNoKernel(){return this.kernelDisplayName===this.noKernelName}get kernelDisplayName(){var e,t,i,n,s,r,o,l,a,d;const u=null===(e=this.session)||void 0===e?void 0:e.kernel;if(this._pendingKernelName===this.noKernelName)return this.noKernelName;if(!u&&!this.isReady&&!1!==this.kernelPreference.canStart&&!1!==this.kernelPreference.shouldStart){let e=this._pendingKernelName||O.getDefaultKernel({specs:this.specsManager.specs,sessions:this.sessionManager.running(),preference:this.kernelPreference})||"";return e?(e=null!==(n=null===(i=null===(t=this.specsManager.specs)||void 0===t?void 0:t.kernelspecs[e])||void 0===i?void 0:i.display_name)&&void 0!==n?n:e,e):this.noKernelName}return this._pendingKernelName?null!==(o=null===(r=null===(s=this.specsManager.specs)||void 0===s?void 0:s.kernelspecs[this._pendingKernelName])||void 0===r?void 0:r.display_name)&&void 0!==o?o:this._pendingKernelName:u?null!==(d=null===(a=null===(l=this.specsManager.specs)||void 0===l?void 0:l.kernelspecs[u.name])||void 0===a?void 0:a.display_name)&&void 0!==d?d:u.name:this.noKernelName}get kernelDisplayStatus(){var e,t;const i=null===(e=this.session)||void 0===e?void 0:e.kernel;return this._isTerminating?"terminating":this._isRestarting?"restarting":this._pendingKernelName===this.noKernelName?"unknown":!i&&this._pendingKernelName?"initializing":i||this.isReady||!1===this.kernelPreference.canStart||!1===this.kernelPreference.shouldStart?null!==(t="connected"===(null==i?void 0:i.connectionStatus)?null==i?void 0:i.status:null==i?void 0:i.connectionStatus)&&void 0!==t?t:"unknown":"initializing"}get prevKernelName(){return this._prevKernelName}get isDisposed(){return this._isDisposed}get disposed(){return this._disposed}get noKernelName(){return this._trans.__("No Kernel")}dispose(){this._isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._session&&(this.kernelPreference.shutdownOnDispose&&this.sessionManager.shutdown(this._session.id).catch((e=>{console.error(`Kernel not shut down ${e}`)})),this._session.dispose(),this._session=null),this._dialog&&this._dialog.dispose(),this._busyDisposable&&(this._busyDisposable.dispose(),this._busyDisposable=null),C.Signal.clearData(this))}async restartKernel(){var e,t,i,n,s,r;const o=(null===(e=this.session)||void 0===e?void 0:e.kernel)||null;if(!this._isRestarting){this._isRestarting=!0,this._isReady=!1,this._statusChanged.emit("restarting");try{await(null===(i=null===(t=this.session)||void 0===t?void 0:t.kernel)||void 0===i?void 0:i.restart()),this._isReady=!0}catch(e){console.error(e)}this._isRestarting=!1,this._statusChanged.emit((null===(s=null===(n=this.session)||void 0===n?void 0:n.kernel)||void 0===s?void 0:s.status)||"unknown"),this._kernelChanged.emit({name:"kernel",oldValue:o,newValue:(null===(r=this.session)||void 0===r?void 0:r.kernel)||null})}}async changeKernel(e={}){if(this.isDisposed)throw new Error("Disposed");return await this._initStarted.promise,this._changeKernel(e)}async shutdown(){if(!this.isDisposed&&this._initializing)return await this._initStarted.promise,this._pendingSessionRequest="",this._pendingKernelName=this.noKernelName,this._shutdownSession()}async initialize(){if(this._initializing)return this._initPromise.promise;this._initializing=!0;const e=await this._initialize();return e||(this._isReady=!0,this._ready.resolve(void 0)),this._pendingSessionRequest||this._initStarted.resolve(void 0),this._initPromise.resolve(e),e}async _initialize(){const e=this.sessionManager;await e.ready,await e.refreshRunning();const t=(0,l.find)(e.running(),(e=>e.path===this._path));if(t)try{const i=e.connectTo({model:t});this._handleNewSession(i)}catch(e){return this._handleSessionError(e),Promise.reject(e)}return await this._startIfNecessary()}async _shutdownSession(){var e;const t=this._session,i=this._isTerminating,n=this._isReady;this._isTerminating=!0,this._isReady=!1,this._statusChanged.emit("terminating");try{await(null==t?void 0:t.shutdown()),this._isTerminating=!1,null==t||t.dispose(),this._session=null;const e=(null==t?void 0:t.kernel)||null;this._statusChanged.emit("unknown"),this._kernelChanged.emit({name:"kernel",oldValue:e,newValue:null}),this._sessionChanged.emit({name:"session",oldValue:t,newValue:null})}catch(s){this._isTerminating=i,this._isReady=n;const r=null===(e=null==t?void 0:t.kernel)||void 0===e?void 0:e.status;throw void 0===r?this._statusChanged.emit("unknown"):this._statusChanged.emit(r),s}}async _startIfNecessary(){var e;const t=this.kernelPreference;if(this.isDisposed||(null===(e=this.session)||void 0===e?void 0:e.kernel)||!1===t.shouldStart||!1===t.canStart)return!1;let i;if(t.id)i={id:t.id};else{const e=O.getDefaultKernel({specs:this.specsManager.specs,sessions:this.sessionManager.running(),preference:t});e&&(i={name:e})}if(i)try{return await this._changeKernel(i),!1}catch(e){}return!0}async _changeKernel(e={},t=!1){if(e.name&&(this._pendingKernelName=e.name),this._session||this._kernelChanged.emit({name:"kernel",oldValue:null,newValue:null}),this._pendingSessionRequest||this._initStarted.resolve(void 0),this._session&&!this._isTerminating)try{return await this._session.changeKernel(e),this._session.kernel}catch(e){throw this._handleSessionError(e),e}const i=v.PathExt.dirname(this._path),n=this._pendingSessionRequest=v.PathExt.join(i,a.UUID.uuid4());try{this._statusChanged.emit("starting");const t=await this.sessionManager.startNew({path:n,type:this._type,name:this._name,kernel:e});return this._pendingSessionRequest!==t.path?(await t.shutdown(),t.dispose(),null):(await t.setPath(this._path),await t.setName(this._name),this._session&&!this._isTerminating&&await this._shutdownSession(),this._handleNewSession(t))}catch(e){throw this._handleSessionError(e),e}}_handleNewSession(e){var t,i,n;if(this.isDisposed)throw Error("Disposed");return this._isReady||(this._isReady=!0,this._ready.resolve(void 0)),this._session&&this._session.dispose(),this._session=e,this._pendingKernelName="",e&&(this._prevKernelName=null!==(i=null===(t=e.kernel)||void 0===t?void 0:t.name)&&void 0!==i?i:"",e.disposed.connect(this._onSessionDisposed,this),e.propertyChanged.connect(this._onPropertyChanged,this),e.kernelChanged.connect(this._onKernelChanged,this),e.statusChanged.connect(this._onStatusChanged,this),e.connectionStatusChanged.connect(this._onConnectionStatusChanged,this),e.pendingInput.connect(this._onPendingInput,this),e.iopubMessage.connect(this._onIopubMessage,this),e.unhandledMessage.connect(this._onUnhandledMessage,this),e.path!==this._path&&this._onPropertyChanged(e,"path"),e.name!==this._name&&this._onPropertyChanged(e,"name"),e.type!==this._type&&this._onPropertyChanged(e,"type")),this._sessionChanged.emit({name:"session",oldValue:null,newValue:e}),this._kernelChanged.emit({oldValue:null,newValue:(null==e?void 0:e.kernel)||null,name:"kernel"}),this._statusChanged.emit((null===(n=null==e?void 0:e.kernel)||void 0===n?void 0:n.status)||"unknown"),(null==e?void 0:e.kernel)||null}async _handleSessionError(e){this._handleNewSession(null);let t="",i="";try{t=e.traceback,i=e.message}catch(e){}await this._displayKernelError(i,t)}async _displayKernelError(e,t){const i=y.createElement("div",null,e&&y.createElement("pre",null,e),t&&y.createElement("details",{className:"jp-mod-wide"},y.createElement("pre",null,t))),n=this._dialog=new k({title:this._trans.__("Error Starting Kernel"),body:i,buttons:[k.okButton()]});await n.launch(),this._dialog=null}_onSessionDisposed(){if(this._session){const e=this._session;this._session=null;const t=this._session;this._sessionChanged.emit({name:"session",oldValue:e,newValue:t})}}_onPropertyChanged(e,t){switch(t){case"path":this._path=e.path;break;case"name":this._name=e.name;break;case"type":this._type=e.type;break;default:throw new Error(`unrecognized property ${t}`)}this._propertyChanged.emit(t)}_onKernelChanged(e,t){this._kernelChanged.emit(t)}_onStatusChanged(e,t){var i;if("dead"===t){const t=null===(i=e.kernel)||void 0===i?void 0:i.model;if(null==t?void 0:t.reason){const e=t.traceback||"";this._displayKernelError(t.reason,e)}}this._setBusy&&("busy"===t?this._busyDisposable||(this._busyDisposable=this._setBusy()):this._busyDisposable&&(this._busyDisposable.dispose(),this._busyDisposable=null)),this._statusChanged.emit(t)}_onConnectionStatusChanged(e,t){this._connectionStatusChanged.emit(t)}_onPendingInput(e,t){this._pendingInput=t}_onIopubMessage(e,t){"shutdown_reply"===t.header.msg_type&&this.session.kernel.removeInputGuard(),this._iopubMessage.emit(t)}_onUnhandledMessage(e,t){this._unhandledMessage.emit(t)}}!function(e){e.getDefaultKernel=function(e){return x.getDefaultKernel(e)}}(O||(O={}));const P={async selectKernel(e,t){if(e.isDisposed)return Promise.resolve();const i=(t=t||s.nullTranslator).load("jupyterlab");let n=i.__("Cancel");e.hasNoKernel&&(n=e.kernelDisplayName);const r=[k.cancelButton({label:n}),k.okButton({label:i.__("Select")})],o=new k({title:i.__("Select Kernel"),body:new x.KernelSelector(e,t),buttons:r}),l=await o.launch();if(e.isDisposed||!l.button.accept)return;const a=l.value;if(null===a&&!e.hasNoKernel)return e.shutdown();a&&await e.changeKernel(a)},async restart(e,t){var i;const n=(t=t||s.nullTranslator).load("jupyterlab");if(await e.initialize(),e.isDisposed)throw new Error("session already disposed");const r=null===(i=e.session)||void 0===i?void 0:i.kernel;if(!r&&e.prevKernelName)return await e.changeKernel({name:e.prevKernelName}),!0;if(!r)throw new Error("No kernel to restart");const o=k.warnButton({label:"Restart"}),l=await function(e={}){return new k(e).launch()}({title:n.__("Restart Kernel?"),body:n.__("Do you want to restart the current kernel? All variables will be lost."),buttons:[k.cancelButton(),o]});return!r.isDisposed&&!!l.button.accept&&(await e.restartKernel(),!0)}};var x;!function(e){class t extends o.Widget{constructor(e,t){super({node:i(e,t)})}getValue(){const e=this.node.querySelector("select");return JSON.parse(e.value)}}function i(e,t){const i=(t=t||s.nullTranslator).load("jupyterlab"),r=document.createElement("div"),o=document.createElement("label");o.textContent=`${i.__("Select kernel for:")} "${e.name}"`,r.appendChild(o);const l=function(e){return{specs:e.specsManager.specs,sessions:e.sessionManager.running(),preference:e.kernelPreference}}(e),a=document.createElement("select");return n(a,l,t,e.hasNoKernel?null:e.kernelDisplayName),r.appendChild(a),r}function n(e,t,i,n=null){for(;e.firstChild;)e.removeChild(e.firstChild);const{preference:o,sessions:u,specs:c}=t,{name:h,id:f,language:p,canStart:g,shouldStart:m}=o,_=(i=i||s.nullTranslator).load("jupyterlab");if(!c||!1===g)return e.appendChild(a(i)),e.value="null",void(e.disabled=!0);e.disabled=!1;const y=Object.create(null),v=Object.create(null);for(const e in c.kernelspecs){const t=c.kernelspecs[e];y[e]=t.display_name,v[e]=t.language}const C=[];if(h&&h in c.kernelspecs&&C.push(h),p)for(const e in c.kernelspecs)h!==e&&v[e]===p&&C.push(e);C.length||C.push(c.default);const b=document.createElement("optgroup");b.label=_.__("Start Preferred Kernel"),C.sort(((e,t)=>y[e].localeCompare(y[t])));for(const e of C)b.appendChild(r(e,y[e]));b.firstChild&&e.appendChild(b),e.appendChild(a());const D=document.createElement("optgroup");D.label=_.__("Start Other Kernel");const w=[];for(const e in c.kernelspecs)-1===C.indexOf(e)&&w.push(e);w.sort(((e,t)=>y[e].localeCompare(y[t])));for(const e of w)D.appendChild(r(e,y[e]));if(w.length&&e.appendChild(D),!1===m)e.value="null";else{let t=0;n&&(t=[...e.options].findIndex((e=>e.text===n)),t=Math.max(t,0)),e.selectedIndex=t}if(!u)return;const S=[],M=[];(0,l.each)(u,(e=>{var t;p&&e.kernel&&v[e.kernel.name]===p&&e.kernel.id!==f?S.push(e):(null===(t=e.kernel)||void 0===t?void 0:t.id)!==f&&M.push(e)}));const E=document.createElement("optgroup");E.label=_.__("Use Kernel from Preferred Session"),e.appendChild(E),S.length&&(S.sort(((e,t)=>e.path.localeCompare(t.path))),(0,l.each)(S,(e=>{const t=e.kernel?y[e.kernel.name]:"";E.appendChild(d(e,t,i))})));const k=document.createElement("optgroup");k.label=_.__("Use Kernel from Other Session"),e.appendChild(k),M.length&&(M.sort(((e,t)=>e.path.localeCompare(t.path))),(0,l.each)(M,(e=>{const t=e.kernel?y[e.kernel.name]||e.kernel.name:"";k.appendChild(d(e,t,i))})))}function r(e,t){const i=document.createElement("option");return i.text=t,i.value=JSON.stringify({name:e}),i}function a(e){const t=(e=e||s.nullTranslator).load("jupyterlab"),i=document.createElement("optgroup");i.label=t.__("Use No Kernel");const n=document.createElement("option");return n.text=t.__("No Kernel"),n.value="null",i.appendChild(n),i}function d(e,t,i){var n,r;const o=(i=i||s.nullTranslator).load("jupyterlab"),l=document.createElement("option"),a=e.name||v.PathExt.basename(e.path);return l.text=a,l.value=JSON.stringify({id:null===(n=e.kernel)||void 0===n?void 0:n.id}),l.title=`${o.__("Path:")} ${e.path}\n${o.__("Name:")} ${a}\n${o.__("Kernel Name:")} ${t}\n${o.__("Kernel Id:")} ${null===(r=e.kernel)||void 0===r?void 0:r.id}`,l}e.KernelSelector=t,e.getDefaultKernel=function(e){var t;const{specs:i,preference:n}=e,{name:s,language:r,shouldStart:o,canStart:l,autoStartDefault:a}=n;if(!i||!1===o||!1===l)return null;const d=a?i.default:null;if(!s&&!r)return d;for(const e in i.kernelspecs)if(e===s)return s;if(!r)return d;const u=[];for(const e in i.kernelspecs)r===(null===(t=i.kernelspecs[e])||void 0===t?void 0:t.language)&&u.push(e);if(1===u.length){const e=u[0];return console.warn("No exact match found for "+e+", using kernel "+e+" that matches language="+r),e}return d},e.populateKernelSelect=n}(x||(x={}));var A=i(6625);const N="toolbar-popup-opener",T="jp-Toolbar-spacer";class L extends o.PanelLayout{constructor(){super(...arguments),this._dirty=!1}onFitRequest(e){super.onFitRequest(e),this.parent.isAttached&&((0,l.some)(this.widgets,(e=>!e.isHidden))?(this.parent.node.style.minHeight="var(--jp-private-toolbar-height)",this.parent.removeClass("jp-Toolbar-micro")):(this.parent.node.style.minHeight="",this.parent.addClass("jp-Toolbar-micro"))),this._dirty=!0,this.parent.parent&&r.MessageLoop.sendMessage(this.parent.parent,o.Widget.Msg.FitRequest),this._dirty&&r.MessageLoop.sendMessage(this.parent,o.Widget.Msg.UpdateRequest)}onUpdateRequest(e){super.onUpdateRequest(e),this.parent.isVisible&&(this._dirty=!1)}onChildShown(e){super.onChildShown(e),this.parent.fit()}onChildHidden(e){super.onChildHidden(e),this.parent.fit()}onBeforeAttach(e){super.onBeforeAttach(e),this.parent.fit()}attachWidget(e,t){super.attachWidget(e,t),this.parent.fit()}detachWidget(e,t){super.detachWidget(e,t),this.parent.fit()}}class j extends o.Widget{constructor(e={}){var t;super(),this.addClass("jp-Toolbar"),this.layout=null!==(t=e.layout)&&void 0!==t?t:new L}names(){const e=this.layout;return(0,l.map)(e.widgets,(e=>B.nameProperty.get(e)))}addItem(e,t){const i=this.layout;return this.insertItem(i.widgets.length,e,t)}insertItem(e,t,i){if((0,l.find)(this.names(),(e=>e===t)))return!1;i.addClass("jp-Toolbar-item");const n=this.layout,s=Math.max(0,Math.min(e,n.widgets.length));return n.insertWidget(s,i),B.nameProperty.set(i,t),!0}insertAfter(e,t,i){return this._insertRelative(e,1,t,i)}insertBefore(e,t,i){return this._insertRelative(e,0,t,i)}_insertRelative(e,t,i,n){const s=(0,l.map)(this.names(),((e,t)=>({name:e,index:t}))),r=(0,l.find)(s,(t=>t.name===e));return!!r&&this.insertItem(r.index+t,i,n)}handleEvent(e){"click"===e.type&&this.handleClick(e)}handleClick(e){if(e.stopPropagation(),e.target instanceof HTMLLabelElement){const t=e.target.getAttribute("for");if(t&&this.node.querySelector(`#${t}`))return}this.node.contains(document.activeElement)||this.parent&&this.parent.activate()}onAfterAttach(e){this.node.addEventListener("click",this)}onBeforeDetach(e){this.node.removeEventListener("click",this)}}class I extends j{constructor(){super(),this.popupOpener=new K,this._widgetWidths={},this.insertItem(0,N,this.popupOpener),this.popupOpener.hide(),this._resizer=new A.Throttler(this._onResize.bind(this),500)}dispose(){this.isDisposed||(this._resizer&&this._resizer.dispose(),super.dispose())}insertAfter(e,t,i){return e!==N&&super.insertAfter(e,t,i)}insertItem(e,t,i){if(i instanceof K)return super.insertItem(e,t,i);{const n=Math.max(0,Math.min(e,this.layout.widgets.length-1));return super.insertItem(n,t,i)}}onBeforeHide(e){this.popupOpener.hidePopup(),super.onBeforeHide(e)}onResize(e){super.onResize(e),e.width>0&&this._resizer&&this._resizer.invoke()}_onResize(){if(this.parent&&this.parent.isAttached){const e=this.node.clientWidth,t=this.popupOpener,i=30,n=2,s=this.layout;let r=t.isHidden?n:n+i,o=0;const l=[],a=s.widgets.length-1;for(;o<a;){const n=s.widgets[o];this._saveWidgetWidth(n),r+=this._getWidgetWidth(n),0===l.length&&t.isHidden&&r+i>e&&(r+=i),r>e&&l.push(n),o++}for(;l.length>0;){const e=l.pop();r-=this._getWidgetWidth(e),t.addWidget(e)}if(t.widgetCount()>0){const n=[];let s=0,o=t.widgetAt(s);const l=t.widgetCount();for(r+=this._getWidgetWidth(o),1===l&&r-i<=e&&(r-=i);r<e&&s<l&&(n.push(o),s++,o=t.widgetAt(s),o);)r+=this._getWidgetWidth(o);for(;n.length>0;){const e=n.shift();this.addItem(B.nameProperty.get(e),e)}}t.widgetCount()>0?(t.updatePopup(),t.show()):t.hide()}}_saveWidgetWidth(e){const t=B.nameProperty.get(e);this._widgetWidths[t]=e.hasClass(T)?2:e.node.clientWidth}_getWidgetWidth(e){const t=B.nameProperty.get(e);return this._widgetWidths[t]}}function W(e){var t,i;return y.createElement(g.Button,Object.assign({className:e.className?e.className+" jp-ToolbarButtonComponent":"jp-ToolbarButtonComponent","aria-pressed":e.pressed,"aria-disabled":!1===e.enabled},e.dataset,{disabled:!1===e.enabled,onClick:null!==(t=e.actualOnClick)&&void 0!==t&&t?t=>{var i;0===t.button&&(null===(i=e.onClick)||void 0===i||i.call(e))}:void 0,onMouseDown:null!==(i=e.actualOnClick)&&void 0!==i&&i?void 0:t=>{var i;0===t.button&&(t.preventDefault(),null===(i=e.onClick)||void 0===i||i.call(e))},onKeyDown:t=>{var i;const{key:n}=t;"Enter"!==n&&" "!==n||null===(i=e.onClick)||void 0===i||i.call(e)},title:!1===e.enabled&&e.disabledTooltip?e.disabledTooltip:e.pressed&&e.pressedTooltip?e.pressedTooltip:e.tooltip||e.iconLabel,minimal:!0}),(e.icon||e.iconClass)&&y.createElement(g.LabIcon.resolveReact,{icon:e.pressed?e.pressedIcon:e.icon,iconClass:(0,g.classes)(e.iconClass,"jp-Icon"),className:"jp-ToolbarButtonComponent-icon",tag:"span",stylesheet:"toolbarButton"}),e.label&&y.createElement("span",{className:"jp-ToolbarButtonComponent-label"},e.label))}!function(e){e.createInterruptButton=function(e,t){const i=(t=t||s.nullTranslator).load("jupyterlab");return new R({icon:g.stopIcon,onClick:()=>{var t,i;null===(i=null===(t=e.session)||void 0===t?void 0:t.kernel)||void 0===i||i.interrupt()},tooltip:i.__("Interrupt the kernel")})},e.createRestartButton=function(e,t,i){const n=(i=i||s.nullTranslator).load("jupyterlab");return new R({icon:g.refreshIcon,onClick:()=>{(null!=t?t:P).restart(e,i)},tooltip:n.__("Restart the kernel")})},e.createSpacerItem=function(){return new B.Spacer},e.createKernelNameItem=function(e,t,i){const n=D.create(y.createElement(B.KernelNameComponent,{sessionContext:e,dialogs:null!=t?t:P,translator:i}));return n.addClass("jp-KernelName"),n},e.createKernelStatusItem=function(e,t){return new B.KernelStatus(e,t)}}(j||(j={}));class R extends D{constructor(e={}){var t,i;super(),this.props=e,this.addClass("jp-ToolbarButton"),this._enabled=null===(t=e.enabled)||void 0===t||t,this._pressed=this._enabled&&null!==(i=e.pressed)&&void 0!==i&&i,this._onClick=e.onClick}set pressed(e){this.enabled&&e!==this._pressed&&(this._pressed=e,this.update())}get pressed(){return this._pressed}set enabled(e){e!=this._enabled&&(this._enabled=e,this._enabled||(this._pressed=!1),this.update())}get enabled(){return this._enabled}set onClick(e){e!==this._onClick&&(this._onClick=e,this.update())}get onClick(){return this._onClick}render(){return y.createElement(W,Object.assign({},this.props,{pressed:this.pressed,enabled:this.enabled,onClick:this.onClick}))}}class F extends o.Widget{constructor(){super(),this.width=0,this.addClass("jp-Toolbar-responsive-popup"),this.layout=new o.PanelLayout,o.Widget.attach(this,document.body),this.hide()}updateWidth(e){e>0&&(this.width=e,this.node.style.width=`${e}px`)}alignTo(e){const{height:t,width:i,x:n,y:s}=e.node.getBoundingClientRect(),r=this.width;this.node.style.left=n+i-r+1+"px",this.node.style.top=`${s+t+1}px`}insertWidget(e,t){this.layout.insertWidget(0,t)}widgetCount(){return this.layout.widgets.length}widgetAt(e){return this.layout.widgets[e]}}class K extends R{constructor(){super({icon:g.ellipsesIcon,onClick:()=>{this.handleClick()}}),this.addClass("jp-Toolbar-responsive-opener"),this.popup=new F}addWidget(e){this.popup.insertWidget(0,e)}dispose(){this.isDisposed||(this.popup.dispose(),super.dispose())}hide(){super.hide(),this.hidePopup()}hidePopup(){this.popup.hide()}updatePopup(){this.popup.updateWidth(this.parent.node.clientWidth),this.popup.alignTo(this.parent)}widgetAt(e){return this.popup.widgetAt(e)}widgetCount(){return this.popup.widgetCount()}handleClick(){this.updatePopup(),this.popup.setHidden(!this.popup.isHidden)}}var B;!function(e){e.propsFromCommand=function(e){var t,i;const{commands:n,id:s,args:r}=e,o=n.iconClass(s,r),l=n.iconLabel(s,r),a=null!==(t=e.icon)&&void 0!==t?t:n.icon(s,r),d=a===o?void 0:a,u=n.label(s,r);let c=n.className(s,r);n.isToggled(s,r)&&(c+=" lm-mod-toggled"),n.isVisible(s,r)||(c+=" lm-mod-hidden");let h=n.caption(s,r)||e.label||u||l;const f=n.keyBindings.find((e=>e.command===s));f&&(h=`${h} (${m.CommandRegistry.formatKeystroke(f.keys.join(" "))})`);const p=n.isEnabled(s,r);return{className:c,dataset:{"data-command":e.id},icon:d,iconClass:o,tooltip:h,onClick:()=>{n.execute(s,r)},enabled:p,label:null!==(i=e.label)&&void 0!==i?i:u}},e.nameProperty=new _.AttachedProperty({name:"name",create:()=>""}),e.noOp=function(){};class t extends o.Widget{constructor(){super(),this.addClass(T)}}e.Spacer=t,e.KernelNameComponent=function(e){const t=e.translator||s.nullTranslator,i=t.load("jupyterlab"),n=()=>{e.dialogs.selectKernel(e.sessionContext,t)};return y.createElement(w,{signal:e.sessionContext.kernelChanged,initialSender:e.sessionContext},(e=>y.createElement(W,{className:"jp-Toolbar-kernelName",onClick:n,tooltip:i.__("Switch kernel"),label:null==e?void 0:e.kernelDisplayName})))};class i extends o.Widget{constructor(e,t){super(),this.translator=t||s.nullTranslator,this._trans=this.translator.load("jupyterlab"),this.addClass("jp-Toolbar-kernelStatus"),this._statusNames=function(e){const t=(e=e||s.nullTranslator).load("jupyterlab");return{unknown:t.__("Unknown"),starting:t.__("Starting"),idle:t.__("Idle"),busy:t.__("Busy"),terminating:t.__("Terminating"),restarting:t.__("Restarting"),autorestarting:t.__("Autorestarting"),dead:t.__("Dead"),connected:t.__("Connected"),connecting:t.__("Connecting"),disconnected:t.__("Disconnected"),initializing:t.__("Initializing"),"":""}}(this.translator),this._onStatusChanged(e),e.statusChanged.connect(this._onStatusChanged,this),e.connectionStatusChanged.connect(this._onStatusChanged,this)}_onStatusChanged(e){if(this.isDisposed)return;const t=e.kernelDisplayStatus,i={container:this.node,title:this._trans.__("Kernel %1",this._statusNames[t]||t),stylesheet:"toolbarButton",alignSelf:"normal",height:"24px"};g.LabIcon.remove(this.node),"busy"===t||"starting"===t||"terminating"===t||"restarting"===t||"initializing"===t?g.circleIcon.element(i):"connecting"===t||"disconnected"===t||"unknown"===t?g.offlineBoltIcon.element(i):g.circleEmptyIcon.element(i)}}e.KernelStatus=i}(B||(B={}));class V extends o.Widget{constructor(e){super(e),this._changeGuard=!1,this._spinner=new h,this._isRevealed=!1,this._evtMouseDown=()=>{this.node.contains(document.activeElement)||this._focusContent()},this.addClass("jp-MainAreaWidget"),this.addClass("jp-MainAreaWidget-ContainStrict"),this.id=n.createDomID();const t=(e.translator||s.nullTranslator).load("jupyterlab"),i=this._content=e.content;i.node.setAttribute("role","region"),i.node.setAttribute("aria-label",t.__("notebook content"));const r=this._toolbar=e.toolbar||new I;r.node.setAttribute("role","navigation"),r.node.setAttribute("aria-label",t.__("notebook actions"));const l=this._contentHeader=e.contentHeader||new o.BoxPanel({direction:"top-to-bottom",spacing:0}),a=this.layout=new o.BoxLayout({spacing:0});a.direction="top-to-bottom",o.BoxLayout.setStretch(r,0),o.BoxLayout.setStretch(l,0),o.BoxLayout.setStretch(i,1),a.addWidget(r),a.addWidget(l),a.addWidget(i),i.id||(i.id=n.createDomID()),i.node.tabIndex=0,this._updateTitle(),i.title.changed.connect(this._updateTitle,this),this.title.closable=!0,this.title.changed.connect(this._updateContentTitle,this),e.reveal?(this.node.appendChild(this._spinner.node),this._revealed=e.reveal.then((()=>{if(i.isDisposed)return void this.dispose();i.disposed.connect((()=>this.dispose()));const e=document.activeElement===this._spinner.node;this._disposeSpinner(),this._isRevealed=!0,e&&this._focusContent()})).catch((e=>{const t=new o.Widget;t.addClass("jp-MainAreaWidget-error");const n=document.createElement("pre");throw n.textContent=String(e),t.node.appendChild(n),o.BoxLayout.setStretch(t,1),this._disposeSpinner(),i.dispose(),this._content=null,r.dispose(),this._toolbar=null,a.addWidget(t),this._isRevealed=!0,t}))):(this._spinner.dispose(),this.removeClass("jp-MainAreaWidget-ContainStrict"),i.disposed.connect((()=>this.dispose())),this._isRevealed=!0,this._revealed=Promise.resolve(void 0))}[u.symbol](){return this._content?u.getPrintFunction(this._content):null}get content(){return this._content}get toolbar(){return this._toolbar}get contentHeader(){return this._contentHeader}get isRevealed(){return this._isRevealed}get revealed(){return this._revealed}onActivateRequest(e){this._isRevealed?this._focusContent():this._spinner.node.focus()}onAfterAttach(e){super.onAfterAttach(e),this.node.addEventListener("mousedown",this._evtMouseDown,!0)}onBeforeDetach(e){this.node.removeEventListener("mousedown",this._evtMouseDown,!0),super.onBeforeDetach(e)}onCloseRequest(e){this.dispose()}onUpdateRequest(e){this._content&&r.MessageLoop.sendMessage(this._content,e)}_disposeSpinner(){this.node.removeChild(this._spinner.node),this._spinner.dispose(),this.removeClass("jp-MainAreaWidget-ContainStrict")}_updateTitle(){if(this._changeGuard||!this.content)return;this._changeGuard=!0;const e=this.content;this.title.label=e.title.label,this.title.mnemonic=e.title.mnemonic,this.title.icon=e.title.icon,this.title.iconClass=e.title.iconClass,this.title.iconLabel=e.title.iconLabel,this.title.caption=e.title.caption,this.title.className=e.title.className,this.title.dataset=e.title.dataset,this._changeGuard=!1}_updateContentTitle(){if(this._changeGuard||!this.content)return;this._changeGuard=!0;const e=this.content;e.title.label=this.title.label,e.title.mnemonic=this.title.mnemonic,e.title.icon=this.title.icon,e.title.iconClass=this.title.iconClass,e.title.iconLabel=this.title.iconLabel,e.title.caption=this.title.caption,e.title.className=this.title.className,e.title.dataset=this.title.dataset,this._changeGuard=!1}_focusContent(){this.content&&(this.content.node.contains(document.activeElement)||this.content.node.focus(),this.content.activate())}}},5996:(e,t,i)=>{"use strict";var n=i(5318),s=i(862);t.Z=void 0;var r=s(i(6271)),o=(0,n(i(2108)).default)(r.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.Z=o},2108:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=i(5181)},433:(e,t,i)=>{"use strict";i.d(t,{Z:()=>b});var n=i(1253),s=i(2122),r=i(6271),o=i(6010),l=i(9693),a=i(1083),d=i(9895),u=i(3786);const c=(0,u.Z)(r.createElement("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),h=(0,u.Z)(r.createElement("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),f=(0,u.Z)(r.createElement("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),p=(0,u.Z)(r.createElement("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),g=(0,u.Z)(r.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");var m=i(7812),_=i(3871),y={success:r.createElement(c,{fontSize:"inherit"}),warning:r.createElement(h,{fontSize:"inherit"}),error:r.createElement(f,{fontSize:"inherit"}),info:r.createElement(p,{fontSize:"inherit"})},v=r.createElement(g,{fontSize:"small"}),C=r.forwardRef((function(e,t){var i=e.action,l=e.children,a=e.classes,u=e.className,c=e.closeText,h=void 0===c?"Close":c,f=e.color,p=e.icon,g=e.iconMapping,C=void 0===g?y:g,b=e.onClose,D=e.role,w=void 0===D?"alert":D,S=e.severity,M=void 0===S?"success":S,E=e.variant,k=void 0===E?"standard":E,O=(0,n.Z)(e,["action","children","classes","className","closeText","color","icon","iconMapping","onClose","role","severity","variant"]);return r.createElement(d.Z,(0,s.Z)({role:w,square:!0,elevation:0,className:(0,o.Z)(a.root,a["".concat(k).concat((0,_.Z)(f||M))],u),ref:t},O),!1!==p?r.createElement("div",{className:a.icon},p||C[M]||y[M]):null,r.createElement("div",{className:a.message},l),null!=i?r.createElement("div",{className:a.action},i):null,null==i&&b?r.createElement("div",{className:a.action},r.createElement(m.Z,{size:"small","aria-label":h,title:h,color:"inherit",onClick:b},v)):null)}));const b=(0,a.Z)((function(e){var t="light"===e.palette.type?l._j:l.$n,i="light"===e.palette.type?l.$n:l._j;return{root:(0,s.Z)({},e.typography.body2,{borderRadius:e.shape.borderRadius,backgroundColor:"transparent",display:"flex",padding:"6px 16px"}),standardSuccess:{color:t(e.palette.success.main,.6),backgroundColor:i(e.palette.success.main,.9),"& $icon":{color:e.palette.success.main}},standardInfo:{color:t(e.palette.info.main,.6),backgroundColor:i(e.palette.info.main,.9),"& $icon":{color:e.palette.info.main}},standardWarning:{color:t(e.palette.warning.main,.6),backgroundColor:i(e.palette.warning.main,.9),"& $icon":{color:e.palette.warning.main}},standardError:{color:t(e.palette.error.main,.6),backgroundColor:i(e.palette.error.main,.9),"& $icon":{color:e.palette.error.main}},outlinedSuccess:{color:t(e.palette.success.main,.6),border:"1px solid ".concat(e.palette.success.main),"& $icon":{color:e.palette.success.main}},outlinedInfo:{color:t(e.palette.info.main,.6),border:"1px solid ".concat(e.palette.info.main),"& $icon":{color:e.palette.info.main}},outlinedWarning:{color:t(e.palette.warning.main,.6),border:"1px solid ".concat(e.palette.warning.main),"& $icon":{color:e.palette.warning.main}},outlinedError:{color:t(e.palette.error.main,.6),border:"1px solid ".concat(e.palette.error.main),"& $icon":{color:e.palette.error.main}},filledSuccess:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.success.main},filledInfo:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.info.main},filledWarning:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.warning.main},filledError:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.error.main},icon:{marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9},message:{padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}}}),{name:"MuiAlert"})(C)},7266:(e,t,i)=>{var n="undefined"!=typeof JSON?JSON:i(8418);e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var i=t.space||"";"number"==typeof i&&(i=Array(i+1).join(" "));var o,l="boolean"==typeof t.cycles&&t.cycles,a=t.replacer||function(e,t){return t},d=t.cmp&&(o=t.cmp,function(e){return function(t,i){var n={key:t,value:e[t]},s={key:i,value:e[i]};return o(n,s)}}),u=[];return function e(t,o,c,h){var f=i?"\n"+new Array(h+1).join(i):"",p=i?": ":":";if(c&&c.toJSON&&"function"==typeof c.toJSON&&(c=c.toJSON()),void 0!==(c=a.call(t,o,c))){if("object"!=typeof c||null===c)return n.stringify(c);if(s(c)){for(var g=[],m=0;m<c.length;m++){var _=e(c,m,c[m],h+1)||n.stringify(null);g.push(f+i+_)}return"["+g.join(",")+f+"]"}if(-1!==u.indexOf(c)){if(l)return n.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}u.push(c);var y=r(c).sort(d&&d(c));for(g=[],m=0;m<y.length;m++){var v=e(c,o=y[m],c[o],h+1);if(v){var C=n.stringify(o)+p+v;g.push(f+i+C)}}return u.splice(u.indexOf(c),1),"{"+g.join(",")+f+"}"}}({"":e},"",e,0)};var s=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},r=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},i=[];for(var n in e)t.call(e,n)&&i.push(n);return i}},8418:(e,t,i)=>{t.parse=i(1396),t.stringify=i(6177)},1396:e=>{var t,i,n,s,r={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},o=function(e){throw{name:"SyntaxError",message:e,at:t,text:n}},l=function(e){return e&&e!==i&&o("Expected '"+e+"' instead of '"+i+"'"),i=n.charAt(t),t+=1,i},a=function(){var e,t="";for("-"===i&&(t="-",l("-"));i>="0"&&i<="9";)t+=i,l();if("."===i)for(t+=".";l()&&i>="0"&&i<="9";)t+=i;if("e"===i||"E"===i)for(t+=i,l(),"-"!==i&&"+"!==i||(t+=i,l());i>="0"&&i<="9";)t+=i,l();if(e=+t,isFinite(e))return e;o("Bad number")},d=function(){var e,t,n,s="";if('"'===i)for(;l();){if('"'===i)return l(),s;if("\\"===i)if(l(),"u"===i){for(n=0,t=0;t<4&&(e=parseInt(l(),16),isFinite(e));t+=1)n=16*n+e;s+=String.fromCharCode(n)}else{if("string"!=typeof r[i])break;s+=r[i]}else s+=i}o("Bad string")},u=function(){for(;i&&i<=" ";)l()};s=function(){switch(u(),i){case"{":return function(){var e,t={};if("{"===i){if(l("{"),u(),"}"===i)return l("}"),t;for(;i;){if(e=d(),u(),l(":"),Object.hasOwnProperty.call(t,e)&&o('Duplicate key "'+e+'"'),t[e]=s(),u(),"}"===i)return l("}"),t;l(","),u()}}o("Bad object")}();case"[":return function(){var e=[];if("["===i){if(l("["),u(),"]"===i)return l("]"),e;for(;i;){if(e.push(s()),u(),"]"===i)return l("]"),e;l(","),u()}}o("Bad array")}();case'"':return d();case"-":return a();default:return i>="0"&&i<="9"?a():function(){switch(i){case"t":return l("t"),l("r"),l("u"),l("e"),!0;case"f":return l("f"),l("a"),l("l"),l("s"),l("e"),!1;case"n":return l("n"),l("u"),l("l"),l("l"),null}o("Unexpected '"+i+"'")}()}},e.exports=function(e,r){var l;return n=e,t=0,i=" ",l=s(),u(),i&&o("Syntax error"),"function"==typeof r?function e(t,i){var n,s,o=t[i];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(void 0!==(s=e(o,n))?o[n]=s:delete o[n]);return r.call(t,i,o)}({"":l},""):l}},6177:e=>{var t,i,n,s=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function o(e){return s.lastIndex=0,s.test(e)?'"'+e.replace(s,(function(e){var t=r[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function l(e,s){var r,a,d,u,c,h=t,f=s[e];switch(f&&"object"==typeof f&&"function"==typeof f.toJSON&&(f=f.toJSON(e)),"function"==typeof n&&(f=n.call(s,e,f)),typeof f){case"string":return o(f);case"number":return isFinite(f)?String(f):"null";case"boolean":case"null":return String(f);case"object":if(!f)return"null";if(t+=i,c=[],"[object Array]"===Object.prototype.toString.apply(f)){for(u=f.length,r=0;r<u;r+=1)c[r]=l(r,f)||"null";return d=0===c.length?"[]":t?"[\n"+t+c.join(",\n"+t)+"\n"+h+"]":"["+c.join(",")+"]",t=h,d}if(n&&"object"==typeof n)for(u=n.length,r=0;r<u;r+=1)"string"==typeof(a=n[r])&&(d=l(a,f))&&c.push(o(a)+(t?": ":":")+d);else for(a in f)Object.prototype.hasOwnProperty.call(f,a)&&(d=l(a,f))&&c.push(o(a)+(t?": ":":")+d);return d=0===c.length?"{}":t?"{\n"+t+c.join(",\n"+t)+"\n"+h+"}":"{"+c.join(",")+"}",t=h,d}}e.exports=function(e,s,r){var o;if(t="",i="","number"==typeof r)for(o=0;o<r;o+=1)i+=" ";else"string"==typeof r&&(i=r);if(n=s,s&&"function"!=typeof s&&("object"!=typeof s||"number"!=typeof s.length))throw new Error("JSON.stringify");return l("",{"":e})}},8892:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitMergeDecisionsOnChunks=void 0;const n=i(4632),s=i(1604),r=i(8439);function o(e){for(let t of e)if(r.hasEntries(t))return!0;return!1}function l(e){let t=[];for(let i of e){let e,n=i.key;t.push(n),"addrange"===i.op||("removerange"===i.op?(e=n+i.length,t.push(e)):"patch"===i.op&&(e=n+1,t.push(e)))}return t.filter(r.unique)}function a(e,t){let i=[];if(!Array.isArray(t))throw new Error;let s=0;for(let o of e)if(r.valueIn(o.op,["addrange","patch"]))i.push(o);else{if("removerange"!==o.op)throw new Error("Unhandled diff entry op "+o.op);for(;t[s]<o.key;)s+=1;if(t[s]!==o.key)throw new Error;for(;s<t.length-1&&t[s+1]<=o.key+o.length;)i.push(n.opRemoveRange(t[s],t[s+1]-t[s])),s+=1}return i}function d(e,t){let i=[0,e.length];for(let e of t)if(r.hasEntries(e)){let t=l(e);i=i.concat(t)}i=i.filter(r.unique).sort();let n=[];for(let e of t)r.hasEntries(e)?n.push(a(e,i)):n.push(e);let s=function(e,t){let i=Array.apply(null,Array(t.length)).map(Number.prototype.valueOf,0),n=[];for(let s=0;s<e.length;++s){let r=e[s],l=s<e.length-1?e[s+1]:r,a=[];for(let e=0;e<t.length;++e){let n=t[e],s=[];for(;n&&i[e]<n.length&&n[i[e]].key===r;)s.push(n[i[e]]),i[e]+=1;a.push(s)}if(o(a)){let e={baseStart:r,baseEnd:l,diffs:a};n.push(e)}}return n}(i,n);return s}function u(e,t,i){if(i.length<2)return[t];let n=[];for(let o of i){let i=t.customDiff;r.hasEntries(i)&&(t.localPath.length>0&&(i=s.pushPath(i,t.localPath)),i=a(i,[0,e.length,o.baseStart,o.baseEnd].filter(r.unique).sort())),n.push(new s.MergeDecision(t.absolutePath.slice(),o.diffs[0],o.diffs[1],t.action,t.conflict))}return n}t.splitMergeDecisionsOnChunks=function(e,t){let i=[];for(let n of t){let t=d(e,[s.buildDiffs(e,[n],"local"),s.buildDiffs(e,[n],"remote")]);i=i.concat(u(e,n,t))}return i}},5004:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.labelSource=t.lineToNormalChunks=t.LineChunker=t.Chunker=t.Chunk=void 0;const n=i(8439);class s{constructor(e,t,i,n,s){this.baseFrom=e,this.baseTo=t,this.remoteFrom=i,this.remoteTo=n,this.sources=s?[s]:[]}inEdit(e){return e>=this.baseFrom&&e<=this.baseTo}inOrig(e){return e>=this.remoteFrom&&e<=this.remoteTo}}t.Chunk=s;class r{constructor(){this._currentGhost=null,this.chunks=[],this.editOffset=0}_getCurrent(){return this._currentGhost?(this._currentGhost=null,null):this.chunks.length>0?this.chunks[this.chunks.length-1]:null}_overlapChunk(e,t,i){return i?e.inOrig(t.from.line):e.inEdit(t.from.line)}addDiff(e,t){let i=e.to.line-e.from.line;e.endsOnNewline&&(i+=1);const r=0===e.from.ch&&i>0,o=e.chunkStartLine?0:1,l=e.chunkStartLine&&e.endsOnNewline&&r?0:1;let a=this._getCurrent();if(a&&(t?this._overlapChunk(a,e,t)?(a.remoteTo=Math.max(a.remoteTo,e.from.line+l+i),a.baseTo=Math.max(a.baseTo,e.from.line+l+this.editOffset),e.source&&!n.valueIn(e.source,a.sources)&&a.sources.push(e.source)):a=null:this._overlapChunk(a,e,t)?(a.remoteTo=Math.max(a.remoteTo,e.from.line+l-this.editOffset),a.baseTo=Math.max(a.baseTo,e.from.line+l+i),e.source&&!n.valueIn(e.source,a.sources)&&a.sources.push(e.source)):a=null),!a){if(t){let t=e.from.line,n=t+this.editOffset;a=new s(n+o,n+l,t+o,t+l+i)}else{let t=e.from.line,n=t-this.editOffset;a=new s(t+o,t+l+i,n+o,n+l)}e.source&&a.sources.push(e.source),this.chunks.push(a)}a.sources=a.sources.filter(n.unique),this.editOffset+=t?-i:i}addGhost(e,t,i){let r=e.to.line-e.from.line;e.endsOnNewline&&(r+=1);let o=0===e.from.ch&&r>0,l=e.chunkStartLine?0:1,a=e.chunkStartLine&&e.endsOnNewline&&o?0:1;t||(a+=r);let d=this._currentGhost,u=e.from.line+(t?i:0);if(d){let t=u-this.editOffset;d.baseTo>u?(d.remoteTo=Math.max(d.remoteTo,t+a),d.baseTo=Math.max(d.baseTo,u+a),e.source&&!n.valueIn(e.source,d.sources)&&d.sources.push(e.source)):d=null}if(!d){let t=u-this.editOffset;d=new s(u+l,u+a,t+l,t+a),e.source&&d.sources.push(e.source),this.chunks.push(d)}this._currentGhost=d,d.sources=d.sources.filter(n.unique)}}t.Chunker=r,t.LineChunker=class extends r{_overlapChunk(e,t,i){let n=t.from.line;return(e.baseFrom!==e.baseTo||e.remoteFrom>=e.remoteTo)&&(n+=1),i?e.inOrig(n):e.inEdit(n)}},t.lineToNormalChunks=function(e){let t=null,i=[];for(let s of e)null===t?t=n.shallowCopy(s):t.inEdit(s.baseFrom)?(t.remoteTo=Math.max(t.remoteTo,s.remoteTo),t.baseTo=Math.max(t.baseTo,s.baseTo),t.sources=t.sources.concat(s.sources)):(i.push(t),t=n.shallowCopy(s)),t.sources=t.sources.filter(n.unique);return null!==t&&i.push(t),i},t.labelSource=function e(t,i){if(t)for(let n of t)n.source=i,"patch"===n.op&&e(n.diff,i);return t}},8049:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(5004),t),s(i(8892),t)},3788:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollapsiblePanel=void 0;const n=i(3992),s="jp-CollapsiblePanel-header-icon",r="jp-CollapsiblePanel-header-icon-opened",o="jp-CollapsiblePanel-header-icon-closed",l="jp-CollapsiblePanel-opened",a="jp-CollapsiblePanel-closed";class d extends n.Panel{constructor(e,t,i){super(),this.addClass("jp-CollapsiblePanel"),this.inner=e;let d=this.constructor.createHeader(t);this.header=d,this.button=d.node.getElementsByClassName(s)[0],d.node.onclick=this.toggleCollapsed.bind(this),this.addWidget(d),this.container=new n.Panel,this.container.addClass("jp-CollapsiblePanel-container"),this.slider=new n.Panel,this.slider.addClass("jp-CollapsiblePanel-slider"),this.slider.addWidget(e),this.container.addWidget(this.slider),this.addWidget(this.container),this.slider.addClass(!0===i?a:l),this.button.classList.add(!0===i?o:r),this.button.classList.add("fa"),this.button.classList.add(!0===i?"fa-caret-down":"fa-caret-up")}static createHeader(e){let t=new n.Panel;t.addClass("jp-CollapsiblePanel-header"),e&&(t.node.innerText=e);let i=document.createElement("button");return i.className=s,t.node.appendChild(i),t}toggleCollapsed(){let e=this.slider,t=this.button;this.collapsed?(e.removeClass(a),e.addClass(l),t.classList.remove(o),t.classList.add(r),this.button.classList.remove("fa-caret-down"),this.button.classList.add("fa-caret-up")):(e.removeClass(l),e.addClass(a),t.classList.remove(r),t.classList.add(o),this.button.classList.remove("fa-caret-up"),this.button.classList.add("fa-caret-down"))}get collapsed(){return this.slider.hasClass(a)}set headerTitle(e){this.header.node.innerText=e}}t.CollapsiblePanel=d},3642:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FriendlyDragDrop=t.DragDropPanel=t.DragPanel=t.DragDropPanelBase=t.DropPanel=t.findChild=t.belongsToUs=t.MIME_INDEX=void 0;const n=i(3992),s=i(1526),r=i(6694),o="jp-DropPanel",l="jp-DragPanel",a="jp-mod-dragHandle",d="jp-mod-dropTarget";function u(e,t,i){let n=e;for(;n&&!n.classList.contains(t);)n=n.parentElement;return!!n&&n===i}function c(e,t){let i=null,n=Array.isArray(e),s=t=>n?e.indexOf(t)>-1:t.parentElement===e,r=t;for(;r&&r!==e;){if(s(r)){i=r;break}r=r.parentElement}return i}t.MIME_INDEX="application/vnd.jupyter.dragindex",t.belongsToUs=u,t.findChild=c;class h extends n.Panel{constructor(e={}){super(e),this.acceptDropsFromExternalSource=!0===e.acceptDropsFromExternalSource,this.addClass(o)}handleEvent(e){switch(e.type){case"p-dragenter":this._evtDragEnter(e);break;case"p-dragleave":this._evtDragLeave(e);break;case"p-dragover":this._evtDragOver(e);break;case"p-drop":this.evtDrop(e)}}validateSource(e){return this.acceptDropsFromExternalSource||e.source===this}findDropTarget(e,i){return i.hasData(t.MIME_INDEX)?c(this.node,e):null}evtDrop(e){let t=e.target;for(;t&&t.parentElement;){if(t.classList.contains(d)){t.classList.remove(d);break}t=t.parentElement}if(t&&u(t,o,this.node))return this.validateSource(e)?void this.processDrop(t,e):(e.dropAction="none",e.preventDefault(),void e.stopPropagation())}onAfterAttach(e){let t=this.node;t.addEventListener("p-dragenter",this),t.addEventListener("p-dragleave",this),t.addEventListener("p-dragover",this),t.addEventListener("p-drop",this)}onBeforeDetach(e){let t=this.node;t.removeEventListener("p-dragenter",this),t.removeEventListener("p-dragleave",this),t.removeEventListener("p-dragover",this),t.removeEventListener("p-drop",this)}_evtDragEnter(e){if(!this.validateSource(e))return;let t=this.findDropTarget(e.target,e.mimeData);null!==t&&(this._clearDropTarget(),t.classList.add(d),e.preventDefault(),e.stopPropagation())}_evtDragLeave(e){e.preventDefault(),e.stopPropagation(),this._clearDropTarget()}_evtDragOver(e){if(!this.validateSource(e))return;this._clearDropTarget();let t=this.findDropTarget(e.target,e.mimeData);null!==t&&(t.classList.add(d),e.preventDefault(),e.stopPropagation(),e.dropAction=e.proposedAction)}_clearDropTarget(){let e=this.node.getElementsByClassName(d);e.length&&e[0].classList.remove(d)}}t.DropPanel=h;class f extends h{constructor(e={}){super(e),this.drag=null,this.dragHandleClass=a,this._clickData=null,this.childrenAreDragHandles=!0===e.childrenAreDragHandles,this.addClass(l)}dispose(){this.drag=null,this._clickData=null,super.dispose()}handleEvent(e){switch(e.type){case"mousedown":this._evtDragMousedown(e);break;case"mouseup":this._evtDragMouseup(e);break;case"mousemove":this._evtDragMousemove(e);break;default:super.handleEvent(e)}}findDragTarget(e){return c(this.node,e)}getDragImage(e){let t=this.findDragTarget(e);return t?t.cloneNode(!0):null}onDragComplete(e){this.drag=null}onAfterAttach(e){this.node.addEventListener("mousedown",this),super.onAfterAttach(e)}onBeforeDetach(e){let t=this.node;t.removeEventListener("click",this),t.removeEventListener("dblclick",this),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),super.onBeforeDetach(e)}startDrag(e,t,i){let n=this.getDragImage(e);this.drag=new r.Drag({dragImage:n||void 0,mimeData:new s.MimeData,supportedActions:"all",proposedAction:"copy",source:this}),this.addMimeData(e,this.drag.mimeData),this.drag.start(t,i).then(this.onDragComplete.bind(this)),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0)}_findDragHandle(e){let t=null;if(this.childrenAreDragHandles)u(e,l,this.node)&&(t=e);else{let i=e;for(;i&&i!==this.node;){if(i.classList.contains(this.dragHandleClass)){t=i;break}i=i.parentElement}null===t||u(t,l,this.node)||(t=null)}return t}_evtDragMousedown(e){let t=e.target,i=this._findDragHandle(t);null!==i&&0===e.button&&(this._clickData={pressX:e.clientX,pressY:e.clientY,handle:i},document.addEventListener("mouseup",this,!0),document.addEventListener("mousemove",this,!0),e.preventDefault())}_evtDragMouseup(e){if(0!==e.button||!this.drag)return document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),void(this.drag=null);e.preventDefault(),e.stopPropagation()}_evtDragMousemove(e){if(this.drag)return;e.preventDefault(),e.stopPropagation();let t=this._clickData;if(!t)throw new Error("Missing drag data");let i=Math.abs(e.clientX-t.pressX),n=Math.abs(e.clientY-t.pressY);i<5&&n<5||(this.startDrag(t.handle,e.clientX,e.clientY),this._clickData=null)}}t.DragDropPanelBase=f;class p extends f{constructor(e={}){super(e)}processDrop(e,t){}findDropTarget(e,t){return null}}t.DragPanel=p;class g extends f{move(e,t){t!==e&&(t>e&&(t-=1),this.insertWidget(t,this.widgets[e]))}getIndexOfChildNode(e,t){t=t||this.layout;for(let i=0;i<t.widgets.length;i++)if(t.widgets[i].node===e)return i;return null}addMimeData(e,i){let n=this.findDragTarget(e),s=this.getIndexOfChildNode(n);null!==s&&i.setData(t.MIME_INDEX,s)}processDrop(e,i){if(!h.isValidAction(i.supportedActions,"move")||"none"===i.proposedAction)return i.dropAction="none",i.preventDefault(),void i.stopPropagation();if(!this.validateSource(i))throw new Error("Invalid source!");let n=i.mimeData.getData(t.MIME_INDEX),s=this.getIndexOfChildNode(e);null!==s&&(this.move(n,s),i.preventDefault(),i.stopPropagation(),i.dropAction="move")}}t.DragDropPanel=g,function(e){e.isValidAction=function(e,t){switch(e){case"all":return!0;case"link-move":return"move"===t||"link"===t;case"copy-move":return"move"===t||"copy"===t;case"copy-link":return"link"===t||"copy"===t;default:return t===e}}}(h=t.DropPanel||(t.DropPanel={})),function(e){function t(e){e.addClass(a)}e.makeHandle=t,e.unmakeHandle=function(e){e.removeClass(a)},e.createDefaultHandle=function(){let e=new n.Widget;return e.addClass("jp-DragPanel-dragHandle"),t(e),e}}(p=t.DragPanel||(t.DragPanel={}));class m extends g{static makeGroup(){const e=this._counter++;return m._groups[e]=[],e}setFriendlyGroup(e){this._groupId=e,m._groups[e].push(this)}addToFriendlyGroup(e){e.setFriendlyGroup(this._groupId)}get friends(){if(void 0===this._groupId)throw new Error("Uninitialized drag-drop group");return m._groups[this._groupId]}getIndexOfChildNode(e,t){const i=this.friends;for(let t of i){if(!u(e,o,t.node))continue;let i=c(t.node,e);if(null!==i)return[t.friends.indexOf(t),super.getIndexOfChildNode(i,t.layout)]}return null}validateSource(e){return this.acceptDropsFromExternalSource?-1!==this.friends.indexOf(e.source):super.validateSource(e)}}t.FriendlyDragDrop=m,m._counter=0,m._groups={}},4291:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditorWidget=void 0;const n=i(1562),s=i(5918);class r extends n.CodeEditorWrapper{constructor(e,t){t&&t.readOnly&&(t.extraKeys={Tab:!1,"Shift-Tab":!1}),super({model:new n.CodeEditor.Model({value:e}),factory:function(){let e=new s.CodeMirrorEditorFactory(t);return e.newInlineEditor.bind(e)}()}),this.staticLoaded=!1,r.editors.push(this.cm)}get cm(){return this.editor.editor}get doc(){return this.editor.doc}onResize(e){this.staticLoaded||(e.width<0||e.height<0?this.cm.setSize(null,null):super.onResize(e),this.editor.getOption("readOnly")&&document.contains(this.node)&&(this.staticLoaded=!0))}}t.EditorWidget=r,r.editors=[]},1156:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotifyUserError=void 0;class i extends Error{constructor(e,t="error"){super(e),Object.setPrototypeOf(this,i.prototype),this.message=e,this.stack=(new Error).stack,this.severity=t}}t.NotifyUserError=i},111:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MergeView=t.DiffView=t.createNbdimeMergeView=t.EventDirection=t.DIFF_OP=void 0;const n=i(8681),s=i(3992),r=i(5118),o=i(8049),l=i(4291),a=i(8439),d=i(1156);var u,c;!function(e){e[e.DIFF_DELETE=-1]="DIFF_DELETE",e[e.DIFF_INSERT=1]="DIFF_INSERT",e[e.DIFF_EQUAL=0]="DIFF_EQUAL"}(u=t.DIFF_OP||(t.DIFF_OP={})),function(e){e[e.INCOMING=0]="INCOMING",e[e.OUTGOING=1]="OUTGOING"}(c=t.EventDirection||(t.EventDirection={}));const h="jp-Merge-gutter-picker",f="jp-Merge-gutter-conflict",p="jp-Merge-conflict",g={chunk:"CodeMirror-merge-l-chunk",start:"CodeMirror-merge-l-chunk-start",end:"CodeMirror-merge-l-chunk-end",insert:"CodeMirror-merge-l-inserted",del:"CodeMirror-merge-l-deleted",connect:"CodeMirror-merge-l-connect",gutter:"CodeMirror-merge-l-gutter"},m={chunk:"CodeMirror-merge-r-chunk",start:"CodeMirror-merge-r-chunk-start",end:"CodeMirror-merge-r-chunk-end",insert:"CodeMirror-merge-r-inserted",del:"CodeMirror-merge-r-deleted",connect:"CodeMirror-merge-r-connect",gutter:"CodeMirror-merge-r-gutter"},_={chunk:"CodeMirror-merge-m-chunk",start:"CodeMirror-merge-m-chunk-start",end:"CodeMirror-merge-m-chunk-end",insert:"CodeMirror-merge-m-inserted",del:"CodeMirror-merge-m-deleted",connect:"CodeMirror-merge-m-connect",gutter:"CodeMirror-merge-m-gutter"};t.createNbdimeMergeView=function(e,t,i,n){let s=new M({remote:e,local:t,merged:i,readOnly:n,orig:null,collapseIdentical:!0}),r=[];s.left&&r.push(s.left),s.right&&r.push(s.right),s.merge&&r.push(s.merge);let o=(e||i).mimetype;if(o){for(let e of r)e.ownWidget.model.mimeType=o;s.base.model.mimeType=o}return s};class y{constructor(e,t,i,n){this.collapsedRanges=[],this.model=e,this.type=t,this.updateCallback=i,this.classes="left"===t?g:"right"===t?m:null;let s=this.model.remote||"";this.ownWidget=new l.EditorWidget(s,a.copyObj({readOnly:!!n.readOnly},n)),this.showDifferences=!1!==n.showDifferences}init(e){this.baseEditor=e,(this.baseEditor.state.diffViews||(this.baseEditor.state.diffViews=[])).push(this),this.ownEditor.state.diffViews=[this],this.baseEditor.on("gutterClick",this.onGutterClick.bind(this)),this.ownEditor.on("gutterClick",this.onGutterClick.bind(this)),this.lineChunks=this.model.getLineChunks(),this.chunks=o.lineToNormalChunks(this.lineChunks),this.dealigned=!1,this.forceUpdate=this.registerUpdate(),this.setScrollLock(!0,!1),this.registerScroll()}setShowDifferences(e){(e=!1!==e)!==this.showDifferences&&(this.showDifferences=e,this.forceUpdate("full"))}syncModel(){if(this.modelInvalid()){let e=this.ownEditor,t=this.model.getLineChunks(),i=o.lineToNormalChunks(t);if(this.model.remote===e.getValue())return this.lineChunks=t,void(this.chunks=i);let s,r,l=e.getDoc().getCursor(),d=a.splitLines(this.model.remote),u=e.getDoc().firstLine(),c=e.getDoc().lastLine()+1,h=0;for(let t of this.collapsedRanges){let o=t.line;s=b(o,this.chunks),r=b(o,i);let l=r-s;s===u&&0===l||e.getDoc().replaceRange(d.slice(u+h,r+h-1).join(""),n.Pos(u,0),n.Pos(s-1,0),"syncModel"),h+=l,u=s+t.size}u<c&&e.getDoc().replaceRange(d.slice(u,d.length).join(""),n.Pos(u,0),n.Pos(c,0),"syncModel"),this.ownEditor.getDoc().setCursor(l),this.lineChunks=t,this.chunks=i}}buildGap(){let e=this.lockButton=P("div",void 0,"CodeMirror-merge-scrolllock");e.title="Toggle locked scrolling";let t=P("div",[e],"CodeMirror-merge-scrolllock-wrap"),i=this;return n.on(e,"click",(function(){i.setScrollLock(!i.lockScroll)})),this.gap=P("div",[t],"CodeMirror-merge-gap")}setScrollLock(e,t){this.lockScroll=e,e&&!1!==t&&this.syncScroll(c.OUTGOING),this.lockButton&&(this.lockButton.innerHTML=e?"":"&nbsp;&nbsp;")}registerUpdate(){let e,t=[],i=[],n=this;function s(e){n.updating=!0,n.updatingFast=!1,"full"===e&&(n.syncModel(),null===n.classes?(v(n.baseEditor,t),v(n.ownEditor,i)):(C(n.baseEditor,t,n.classes),C(n.ownEditor,i,n.classes))),n.showDifferences&&(n.updateMarks(n.ownEditor,n.model.additions,t,u.DIFF_INSERT),n.updateMarks(n.baseEditor,n.model.deletions,i,u.DIFF_DELETE)),n.updateCallback(!0),function(e){if(n.model.remote!==e.getValue())throw new d.NotifyUserError("CRITICAL: Merge editor out of sync with model! Double-check any saved merge output!")}(n.ownEditor),n.updating=!1}function l(e){let t=!1;for(let e of n.baseEditor.state.diffViews)t=t||e.updating;t||(n.dealigned=!0,a(!0===e))}function a(t){let i=!1;for(let e of n.baseEditor.state.diffViews)i=i||e.updating||e.updatingFast;i||(clearTimeout(e),!0===t&&(n.updatingFast=!0),e=window.setTimeout(s,!0===t?20:250))}function c(e,t){n.model instanceof r.DecisionStringDiffModel||(n.lineChunks=n.model.getLineChunks(),n.chunks=o.lineToNormalChunks(n.lineChunks)),l(t.text.length-1!=t.to.line-t.from.line)}return n.updating=!1,n.updatingFast=!1,this.baseEditor.on("change",c),this.ownEditor.on("change",c),this.baseEditor.on("markerAdded",l),this.baseEditor.on("markerCleared",l),this.ownEditor.on("markerAdded",l),this.ownEditor.on("markerCleared",l),this.baseEditor.on("viewportChange",(function(){a(!1)})),this.ownEditor.on("viewportChange",(function(){a(!1)})),s(),s}modelInvalid(){return this.model instanceof r.DecisionStringDiffModel&&this.model.invalid}onGutterClick(e,t,i,n){if(0!==n.button)return;let s=e.lineInfo(t);if(!s.gutterMarkers||!s.gutterMarkers.hasOwnProperty(i))return;let o=s.gutterMarkers[i];if(o&&o.sources){let n=o.sources;if(i===h){if(e===this.ownEditor)for(let e of n)e.decision.action=e.action;else if("merge"===this.type&&e===this.baseEditor)for(let e of n)e.decision.action="base";for(let e=n.length-1;e>=0;--e){let t=n[e];"merge"===this.type&&a.hasEntries(t.decision.customDiff)&&(t.decision.customDiff=[])}0===n.length&&e.setGutterMarker(t,h,null)}else if(i===f)for(let e of n)e.decision.conflict=!1;for(let e of this.baseEditor.state.diffViews)e.model instanceof r.DecisionStringDiffModel&&e.model.invalidate(),e.forceUpdate("full")}}registerScroll(){let e=this;this.baseEditor.on("scroll",(function(){e.syncScroll(c.OUTGOING)})),this.ownEditor.on("scroll",(function(){e.syncScroll(c.INCOMING)}))}syncScroll(e){if(this.modelInvalid())return;if(!this.lockScroll)return;let t,i;if(e===c.OUTGOING?(t=this.baseEditor,i=this.ownEditor):(t=this.ownEditor,i=this.baseEditor),t.state.scrollSetBy===this)return void(t.state.scrollSetBy=null);if(i.state.scrollPosition=t.getScrollInfo(),i.state.scrollTicking)return;let n=i.getScrollInfo();if(i.state.scrollPosition.top===n.top&&i.state.scrollPosition.left===n.left)return;let s=this;window.requestAnimationFrame((function(){i.scrollTo(i.state.scrollPosition.left,i.state.scrollPosition.top),i.state.scrollTicking=!1,i.state.scrollSetBy=s})),i.state.scrollTicking=!0}updateMarks(e,t,i,n){let s;s=null===this.classes?a.copyObj(_):this.classes;let r=this;function o(e,t,n,o){if(null===r.classes&&o.length>0){s=a.copyObj(_);let e=o[0].action;if(o.length>1)for(let t of o.slice(1))if(t.action!==e){e="mixed";break}for(let t of Object.keys(s))s[t]+="-"+e}let l=!1;if(o.length>0)for(let e of o)if(e.decision.conflict){l=!0;break}for(let d=t;d<n;++d){let u=e.addLineClass(d,"background",s.chunk);if(l&&e.addLineClass(u,"background",p),d===t)if(e.addLineClass(u,"background",s.start),"merge"!==r.type){let t=P("div","",s.gutter);t.sources=o,t.classList.add(h),e.setGutterMarker(u,h,t)}else if(e===r.baseEditor){for(let t of o)if("custom"===t.decision.action&&!a.hasEntries(t.decision.localDiff)&&!a.hasEntries(t.decision.remoteDiff)){let t=P("div","",s.gutter);t.sources=o,t.classList.add(h),e.setGutterMarker(u,h,t)}}else if(l&&e===r.ownEditor){let t=P("div","","");t.sources=o,t.classList.add(f),e.setGutterMarker(u,f,t)}d===n-1&&e.addLineClass(u,"background",s.end),i.push(u)}if(t===n){let n=e.addLineClass(t,"background",s.start);if("merge"!==r.type){let t=P("div","",s.gutter);t.sources=o,t.classList.add(h),e.setGutterMarker(n,h,t)}else if(l){let t=P("div","","");t.sources=o,t.classList.add(f),e.setGutterMarker(n,f,t)}e.addLineClass(n,"background",s.end+"-empty"),i.push(n)}}let l=n===u.DIFF_DELETE?s.del:s.insert;e.operation((function(){let n=e===r.baseEditor;r.classes?C(e,i,s):v(e,i),function(e,t,i,n){let s=e.getDoc(),r=null;a.valueIn(n,[_.del,_.insert])&&(r=n);for(let e of t)null!==r&&(n=r+(e.source?"-"+e.source.action:"")),i.push(s.markText(e.from,e.to,{className:n}))}(e,t,i,l);for(let t of r.chunks)n?o(e,t.baseFrom,t.baseTo,t.sources):o(e,t.remoteFrom,t.remoteTo,t.sources)}))}get ownEditor(){return this.ownWidget.cm}}function v(e,t){for(let i of["-local","-remote","-either","-custom"]){let n=a.copyObj(_);for(let e of Object.keys(n))n[e]+=i;C(e,t,n)}}function C(e,t,i){for(let n=t.length-1;n>=0;--n){let s=t[n];if("clear"in s)s.clear(),t.splice(n,1);else if(s.parent){e.removeLineClass(s,"background",i.chunk),e.removeLineClass(s,"background",i.start),e.removeLineClass(s,"background",i.end),e.removeLineClass(s,"background",p),a.valueIn(i.gutter,[g.gutter,m.gutter])?e.setGutterMarker(s,h,null):e.setGutterMarker(s,f,null);let r=e.lineInfo(s);r.bgClass&&0!==r.bgClass.length||t.splice(n,1)}}}function b(e,t){let i=0;for(let n=0;n<t.length;n++){let s=t[n];if(s.baseTo>e&&s.baseFrom<=e)return 0;if(s.baseFrom>e)break;i=s.remoteTo-s.baseTo}return e+i}function D(e,t){let i=e.baseFrom;for(let e=0;e<t.length;++e){let n=t[e];if(n.baseFrom===i)return n.remoteTo;if(n.baseFrom>i)break}return e.baseTo}function w(e,t,i){let n=0,s=[];for(let i=0;i<e.length;i++)if(null!==t[i]){let r=e[i].heightAtLine(t[i],"local");s[i]=r,n=Math.max(n,r)}for(let r=0;r<e.length;r++)if(null!==t[r]){let o=n-s[r];o>1&&i.push(S(e[r],t[r],o))}}function S(e,t,i){let n=!0;t>e.getDoc().lastLine()&&(t--,n=!1);let s=document.createElement("div");return s.className="CodeMirror-merge-spacer",s.style.height=i+"px",s.style.minWidth="1px",e.addLineWidget(t,s,{height:i,above:n})}t.DiffView=y;class M extends s.Panel{constructor(e){super(),this.initialized=!1,this.collapsedRanges=[],this.options=e;let t=e.remote,i=e.local||null,n=e.merged||null,r=0,o=this.left=null,d=this.right=null,u=this.merge=null,c=this;this.diffViews=[],this.aligners=[];let p=e.remote||e.merged;if(!p)throw new Error("Either remote or merged model needs to be specified!");e.value=null!==p.base?p.base:p.remote,e.lineNumbers=!1!==e.lineNumbers;let g=e.readOnly;e.readOnly=!0;let m=e;if(n&&(e.gutters=[f,h],void 0===e.lineWrapping&&(e.lineWrapping=!1)),this.base=new l.EditorWidget(e.value,a.copyObj({readOnly:!!e.readOnly},e)),this.base.addClass("CodeMirror-merge-pane"),this.base.addClass("CodeMirror-merge-pane-base"),n){let l,c,h=!1!==e.showBase;h||(this.base.node.style.display="hidden"),i&&null!==i.remote?(o=this.left=new y(i,"left",this.alignViews.bind(this),a.copyObj(m)),this.diffViews.push(o),l=o.ownWidget):(o=this.left=null,l=new s.Widget({node:P("div","Value missing","jp-mod-missing")})),l.addClass("CodeMirror-merge-pane"),l.addClass("CodeMirror-merge-pane-local"),this.addWidget(l),h&&this.addWidget(this.base),t&&null!==t.remote?(d=this.right=new y(t,"right",this.alignViews.bind(this),a.copyObj(m)),this.diffViews.push(d),c=d.ownWidget):(d=this.right=null,c=new s.Widget({node:P("div","Value missing","jp-mod-missing")})),c.addClass("CodeMirror-merge-pane"),c.addClass("CodeMirror-merge-pane-remote"),this.addWidget(c),this.addWidget(new s.Widget({node:P("div",null,"CodeMirror-merge-clear","height: 0; clear: both;")})),u=this.merge=new y(n,"merge",this.alignViews.bind(this),a.copyObj({readOnly:g},a.copyObj(m))),this.diffViews.push(u);let f=u.ownWidget;f.addClass("CodeMirror-merge-pane"),f.addClass("CodeMirror-merge-pane-final"),this.addWidget(f),r=3+(h?1:0)}else if(t){if(this.addWidget(this.base),t.unchanged||t.added||t.deleted)t.unchanged?this.base.addClass("CodeMirror-merge-pane-unchanged"):t.added?this.base.addClass("CodeMirror-merge-pane-added"):t.deleted&&this.base.addClass("CodeMirror-merge-pane-deleted"),r=1;else{d=this.right=new y(t,"right",this.alignViews.bind(this),m),this.diffViews.push(d);let e=d.ownWidget;e.addClass("CodeMirror-merge-pane"),e.addClass("CodeMirror-merge-pane-remote"),this.addWidget(new s.Widget({node:d.buildGap()})),this.addWidget(e),r=2}this.addWidget(new s.Widget({node:P("div",null,"CodeMirror-merge-clear","height: 0; clear: both;")}))}this.addClass("CodeMirror-merge"),this.addClass("CodeMirror-merge-"+r+"pane");for(let e of[o,d,u])e&&e.init(this.base.cm);e.collapseIdentical&&r>1&&this.base.cm.operation((function(){!function(e,t){"number"!=typeof t&&(t=2);let i=[],n=e.base.cm,s=n.getDoc().firstLine();for(let e=s,t=n.getDoc().lastLine();e<=t;e++)i.push(!0);e.left&&O(e.left,t,s,i),e.right&&O(e.right,t,s,i),e.merge&&O(e.merge,t,s,i),e.collapsedRanges=[];for(let r=0;r<i.length;r++)if(i[r]){let o=r+s,l=1;for(;r<i.length-1&&i[r+1];r++,l++);if(l>t){let t=[{line:o,cm:n}];e.left&&t.push({line:b(o,e.left.chunks),cm:e.left.ownEditor}),e.right&&t.push({line:b(o,e.right.chunks),cm:e.right.ownEditor}),e.merge&&t.push({line:b(o,e.merge.chunks),cm:e.merge.ownEditor});let i=k(l,t);e.collapsedRanges.push({line:o,size:l}),i.on("clear",(()=>{for(let t=0;t<e.collapsedRanges.length;++t)if(e.collapsedRanges[t].line===o)return void e.collapsedRanges.splice(t,1)})),e.options.onCollapse&&e.options.onCollapse(e,o,l,i)}}}(c,e.collapseIdentical)}));for(let e of[o,d,u])e&&(e.collapsedRanges=this.collapsedRanges);this.initialized=!0,(this.left||this.right||this.merge)&&this.alignViews(!0)}alignViews(e){let t=!1;if(!this.initialized)return;for(let e of this.diffViews)e.syncModel(),e.dealigned&&(t=!0,e.dealigned=!1);if(!t&&!e)return;let i=function(e){let t=[],i=[],n=e[0],s=e.slice(1);for(let e=0;e<n.lineChunks.length;e++){let r=n.lineChunks[e],o=[r.baseTo,r.remoteTo];for(let e of s)o.push(D(r,e.lineChunks));if(t.length>0&&t[t.length-1][0]===o[0]){let e=t[t.length-1];for(let t=0;t<o.length;++t)e[t]=Math.max(e[t],o[t])}else if(t.length>0){let e=t[t.length-1],n=o[0]-e[0];for(let t=1;t<o.length;++t)if(n!==o[t]-e[t]){n=null;break}if(null!==n){i.push(o[0]);continue}t.push(o)}else t.push(o)}for(let e=0;e<s.length;e++)for(let r=0;r<s[e].lineChunks.length;r++){let o=s[e].lineChunks[r],l=0;for(;l<t.length;l++){let e=t[l];if(a.valueIn(o.baseTo,i)){l=-1;break}if(e[0]>=o.baseTo)break}if(l>-1){let i=[o.baseTo,D(o,n.lineChunks)];for(let t=0;t<s.length;t++)t===e?i.push(o.remoteTo):i.push(D(o,s[t].lineChunks));if(t.length>l&&t[l][0]===o.baseTo){let e=t[l];for(let t=0;t<i.length;++t)e[t]=Math.max(e[t],i[t])}else t.splice(l,0,i)}}return t}(this.diffViews),n=this,s=function(){let e=n.aligners;for(let t=0;t<e.length;t++)e[t].clear();e.length=0;let t=[n.base.cm],s=[];for(let e of n.diffViews)t.push(e.ownEditor);for(let e=0;e<t.length;e++)s.push(t[e].getScrollInfo().top);for(let n=0;n<i.length;n++)w(t,i[n],e);for(let e=0;e<t.length;e++)t[e].scrollTo(null,s[e])};var r;this.base.cm.curOp||(r=s,s=function(){n.base.cm.operation(r)});for(let e of this.diffViews)e.ownEditor.curOp||(s=function(t){return function(){e.ownEditor.operation(t)}}(s));s()}setShowDifferences(e){this.right&&this.right.setShowDifferences(e),this.left&&this.left.setShowDifferences(e)}getMergedValue(){if(!this.merge)throw new Error('No merged value; missing "merged" view');return this.merge.ownEditor.getValue()}}function E(e,t,i){e.addLineClass(t,"wrap","CodeMirror-merge-collapsed-line");let s=document.createElement("span");s.className="CodeMirror-merge-collapsed-widget",s.title="Identical text collapsed. Click to expand.";let r=e.getDoc().markText(n.Pos(t,0),n.Pos(i-1),{inclusiveLeft:!0,inclusiveRight:!0,replacedWith:s,clearOnEnter:!0});function o(){r.clear(),e.removeLineClass(t,"wrap","CodeMirror-merge-collapsed-line")}return n.on(s,"click",o),{mark:r,clear:o}}function k(e,t){let i=[];function n(){for(let e=0;e<i.length;e++)i[e].clear()}for(let s=0;s<t.length;s++){let r=t[s],o=E(r.cm,r.line,r.line+e);i.push(o),o.mark.on("clear",n)}return i[0].mark}function O(e,t,i,n){for(let s=0;s<e.chunks.length;s++){let r=e.chunks[s];for(let e=r.baseFrom-t;e<r.baseTo+t;e++){let t=e+i;t>=0&&t<n.length&&(n[t]=!1)}}}function P(e,t,i,n){let s=document.createElement(e);if(i&&(s.className=i),n&&(s.style.cssText=n),"string"==typeof t)s.appendChild(document.createTextNode(t));else if(t)for(let e=0;e<t.length;++e)s.appendChild(t[e]);return s}function x(e,t,i){for(let n=e.length-1;n>=0;n--){let s=e[n],r=(i?s.remoteTo:s.baseTo)-1;if(r<t)return r}return null}function A(e,t,i){for(let n=0;n<e.length;n++){let s=e[n],r=i?s.remoteFrom:s.baseFrom;if(r>t)return r}return null}var N;function T(e,t){let i=null,s=e.state.diffViews,r=e.getDoc().getCursor().line;if(s)for(let n=0;n<s.length;n++){let o=s[n],l=e===o.ownEditor,a=t===N.Previous?x(o.chunks,r,l):A(o.chunks,r,l);null===a||null!==i&&!(t===N.Previous?a>i:a<i)||(i=a)}if(null===i)return n.Pass;e.getDoc().setCursor(i,0)}t.MergeView=M,function(e){e[e.Previous=-1]="Previous",e[e.Next=1]="Next"}(N||(N={})),n.commands.goNextDiff=function(e){return T(e,N.Next)},n.commands.goPrevDiff=function(e){return T(e,N.Previous)}},8439:(e,t)=>{"use strict";function i(e,t){return t.indexOf(e)>=0}function n(e,t){let i=[];for(let t=0;t<e.length;++t)i.push({index:t,key:e[t]});i=i.sort(((e,i)=>t(e.key,i.key)||e.index-i.index));let n=new Array(e.length);for(let t=0;t<e.length;++t)n[t]=e[i[t].index];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.buildSelect=t.copyObj=t.stableSort=t.intersection=t.unique=t.accumulateLengths=t.repeatString=t.sortByKey=t.isPrefixArray=t.findSharedPrefix=t.arraysEqual=t.shallowCopy=t.deepCopy=t.splitLines=t.hasEntries=t.valueIn=void 0,t.valueIn=i,t.hasEntries=function(e){return null!==e&&0!==e.length},t.splitLines=function(e){return e.match(/^.*(\r\n|\r|\n|$)/gm)},t.deepCopy=function e(t){if("object"!=typeof t){if(i(typeof t,["string","number","boolean"]))return t;throw new TypeError("Cannot deepcopy non-object")}if(null===t)return null;if(Array.isArray(t)){let i=t.length,n=new Array(i);for(let s=0;s<i;s++)n[s]=e(t[s]);return n}{let i=t,n={};void 0!==i.prototype&&(n.prototype=i.prototype);for(let s in t)n[s]=e(i[s]);return n}},t.shallowCopy=function(e){let t=Object.create(Object.getPrototypeOf(e));for(let i in e){let n=e[i];if(null!=n&&n.hasOwnProperty("constructor")&&n.constructor===Function)continue;let s=Object.getOwnPropertyDescriptor(e,i);s&&!s.get&&Object.defineProperty(t,i,s)}return t},t.arraysEqual=function(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0},t.findSharedPrefix=function(e,t){if(null===e||null===t)return null;if(e===t)return e.slice();let i=0;for(;i<Math.min(e.length,t.length)&&e[i]===t[i];++i);return e.slice(0,i)},t.isPrefixArray=function(e,t){if(e===t)return!0;if(null===e||0===e.length)return!0;if(null===t||e.length>t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0},t.sortByKey=function(e,t){return n(e,(function(e,i){let n=e[t],s=i[t];return n<s?-1:n>s?1:0}))},t.repeatString=function(e,t){if(t<1)return"";let i="",n=e.valueOf();for(;t>1;)1&t&&(i+=n),t>>=1,n+=n;return i+n},t.accumulateLengths=function(e){let t=[];return e.reduce((function(e,i,n){return t[n]=e+i.length}),0),t},t.unique=function(e,t,i){return i.indexOf(e)===t},t.intersection=function(e,t){let i=[];[e,t]=e.length>t.length?[e,t]:[t,e];for(let n of e)-1!==t.indexOf(n)&&i.push(n);return i},t.stableSort=n,t.copyObj=function(e,t){t||(t={});for(let i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},t.buildSelect=function(e,t){void 0===t&&(t=document.createElement("select"));for(let i of e){let e=document.createElement("option");e.text=i,t.appendChild(e)}return t}},4632:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateObjectOp=t.validateSequenceOp=t.opPatch=t.opRemoveRange=t.opAddRange=t.opRemove=t.opAdd=t.opReplace=void 0;const n=i(8439);t.opReplace=function(e,t){return{op:"replace",key:e,value:t}},t.opAdd=function(e,t){return{op:"add",key:e,value:t}},t.opRemove=function(e){return{op:"remove",key:e}},t.opAddRange=function(e,t){return{op:"addrange",key:e,valuelist:t}},t.opRemoveRange=function(e,t){return{op:"removerange",key:e,length:t}},t.opPatch=function(e,t){return{op:"patch",key:e,diff:t}},t.validateSequenceOp=function(e,t){if("number"!=typeof t.key)throw console.info("Invalid patch details",e,t),new TypeError(`Invalid patch sequence op: Key is not a number: ${t.key}`);let i=t.key;if("addrange"===t.op){if(i<0||i>e.length||isNaN(i))throw new RangeError("Invalid add range diff op: Key out of range: "+i)}else if("removerange"===t.op){if(i<0||i>=e.length||isNaN(i))throw new RangeError("Invalid remove range diff op: Key out of range: "+i);if(i+t.length>e.length||isNaN(i))throw new RangeError("Invalid remove range diff op: Range too long!")}else{if("patch"!==t.op)throw new Error("Invalid op: "+t.op);if(i<0||i>=e.length||isNaN(i))throw new RangeError("Invalid patch diff op: Key out of range: "+i)}},t.validateObjectOp=function(e,t,i){let s=t.op;if("string"!=typeof t.key)throw console.info("Invalid patch details",e,t,i),new TypeError(`Invalid patch object op: Key is not a string: ${t.key}`);let r=t.key;if("add"===s){if(n.valueIn(r,i))throw new Error("Invalid add key diff op: Key already present: "+r)}else if("remove"===s){if(!n.valueIn(r,i))throw new Error("Invalid remove key diff op: Missing key: "+r)}else if("replace"===s){if(!n.valueIn(r,i))throw new Error("Invalid replace key diff op: Missing key: "+r)}else{if("patch"!==s)throw new Error("Invalid op: "+s);if(!n.valueIn(r,i))throw new Error("Invalid patch key diff op: Missing key: "+r)}}},1999:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDeletedCellDiffModel=t.createAddedCellDiffModel=t.createUnchangedCellDiffModel=t.createPatchedCellDiffModel=t.CellDiffModel=void 0;const n=i(1096),s=i(1156),r=i(4526),o=i(8282),l=i(1716),a=i(7727);class d{constructor(e,t,i,n,r){if(this.source=e,this.metadata=t,this.outputs=i,this.executionCount=n,this.cellType=r,null===i&&"code"===r)throw new s.NotifyUserError("Invalid code cell, missing outputs!");this.metadata.collapsible=!0,this.metadata.collapsibleHeader="Metadata changed",this.metadata.startCollapsed=!0}get unchanged(){let e=this.source.unchanged;if(e=e&&(!this.metadata||this.metadata.unchanged),this.outputs)for(let t of this.outputs)e=e&&t.unchanged;return this.executionCount&&(e=e&&this.executionCount.unchanged),e}get added(){return this.source.added}get deleted(){return this.source.deleted}getChunkedOutputs(){if(null===this.outputs)return null;const e=[];if(this.added||this.deleted)for(let t of this.outputs)e.push([t]);else{let t=[];for(let i of this.outputs)i.added||i.deleted?t.push(i):(t.length&&e.push(t),e.push([i]),t=[]);t.length&&e.push(t)}return e}}t.CellDiffModel=d,t.createPatchedCellDiffModel=function(e,t,i){let s=null,u=null,c=null,h=null,f=r.getSubDiffByKey(t,"source");if(s=f?o.createPatchStringDiffModel(e.source,f):o.createDirectStringDiffModel(e.source,e.source),o.setMimetypeFromCellType(s,e,i),f=r.getSubDiffByKey(t,"metadata"),u=f?o.createPatchStringDiffModel(e.metadata,f):o.createDirectStringDiffModel(e.metadata,e.metadata),n.isCode(e)){let i=e.outputs,n=r.getSubDiffByKey(t,"outputs");c=n?l.makeOutputModels(i,null,n):l.makeOutputModels(i,i);let s=e.execution_count,o=r.getDiffEntryByKey(t,"execution_count");h=a.createImmutableModel(s,s,o)}return new d(s,u,c,h,e.cell_type)},t.createUnchangedCellDiffModel=function(e,t){let i=o.createDirectStringDiffModel(e.source,e.source);o.setMimetypeFromCellType(i,e,t);let s=o.createDirectStringDiffModel(e.metadata,e.metadata),r=null,u=null;if(n.isCode(e)){r=l.makeOutputModels(e.outputs,e.outputs);let t=e.execution_count;u=a.createImmutableModel(t,t)}return new d(i,s,r,u,e.cell_type)},t.createAddedCellDiffModel=function(e,t){let i=o.createDirectStringDiffModel(null,e.source);o.setMimetypeFromCellType(i,e,t);let s=o.createDirectStringDiffModel(null,e.metadata),r=null,u=null;return n.isCode(e)&&(r=l.makeOutputModels(null,e.outputs),u=a.createImmutableModel(null,e.execution_count)),new d(i,s,r,u,e.cell_type)},t.createDeletedCellDiffModel=function(e,t){let i=o.createDirectStringDiffModel(e.source,null);o.setMimetypeFromCellType(i,e,t);let s=o.createDirectStringDiffModel(e.metadata,null),r=null,u=null;if(n.isCode(e)){r=l.makeOutputModels(e.outputs,null);let t=e.execution_count;u=a.createImmutableModel(t,null)}return new d(i,s,r,u,e.cell_type)}},3889:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7727:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createImmutableModel=t.ImmutableDiffModel=void 0;class i{constructor(e,t,i,n,s){this.base=e,this.remote=t,this.collapsible=!0===i,this.collapsible&&(this.collapsibleHeader=n||"",this.startCollapsed=!0===s)}get unchanged(){return this.base===this.remote}get added(){return void 0===this.base}get deleted(){return void 0===this.remote}}t.ImmutableDiffModel=i,t.createImmutableModel=function(e,t,n){if(n){if("add"===n.op){if(void 0!==e)throw new Error("Invalid diff op on immutable value");return new i(e,n.value)}if("remove"===n.op){if(void 0===e)throw new Error("Invalid diff op on immutable value");return new i(e,void 0)}if(void 0===e)throw new Error("Invalid diff op on immutable value");return new i(e,n.value)}return new i(e,t)}},3127:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(1999),t),s(i(3889),t),s(i(7727),t),s(i(5487),t),s(i(1716),t),s(i(3846),t),s(i(8282),t)},5487:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookDiffModel=void 0;const n=i(4526),s=i(8282),r=i(1999);t.NotebookDiffModel=class{constructor(e,t){let i,o=n.getSubDiffByKey(t,"metadata");e.metadata&&o?this.metadata=s.createPatchStringDiffModel(e.metadata,o):this.metadata=null,this.metadata&&(this.metadata.collapsible=!0,this.metadata.collapsibleHeader="Notebook metadata changed",this.metadata.startCollapsed=!0);try{i=e.metadata.language_info.mimetype}catch(e){}this.mimetype=i||"text/python",this.cells=[],this.chunkedCells=[];let l=0,a=0,d=-1,u=[];for(let i of n.getSubDiffByKey(t,"cells")||[]){let t=i.key;for(let i=l;i<t;i++){let t=r.createUnchangedCellDiffModel(e.cells[i],this.mimetype);this.cells.push(t),this.chunkedCells.push([t])}if(t!==d&&(u=[],this.chunkedCells.push(u),d=t),"addrange"===i.op){for(let e of i.valuelist){let t=r.createAddedCellDiffModel(e,this.mimetype);this.cells.push(t),u.push(t)}a=0}else if("removerange"===i.op){a=i.length;for(let i=t;i<t+a;i++){let t=r.createDeletedCellDiffModel(e.cells[i],this.mimetype);this.cells.push(t),u.push(t)}}else if("patch"===i.op){u.length>0&&(u=[],this.chunkedCells.push(u));let n=r.createPatchedCellDiffModel(e.cells[t],i.diff,this.mimetype);this.cells.push(n),u.push(n),a=1}l=Math.max(l,t+a)}for(let t=l;t<e.cells.length;t++){let i=r.createUnchangedCellDiffModel(e.cells[t],this.mimetype);this.cells.push(i),this.chunkedCells.push([i])}}}},1716:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeOutputModels=t.OutputDiffModel=void 0;const n=i(1096),s=i(1156),r=i(3846),o=["text/plain","application/vnd.jupyter.stdout","application/vnd.jupyter.stderr"];class l extends r.RenderableDiffModel{hasMimeType(e){let t=this.base||this.remote;return n.isStream(t)&&-1!==o.indexOf(e)?"text":n.isError(t)?"traceback":(n.isExecuteResult(t)||n.isDisplayData(t))&&e in t.data?["data",e]:null}innerMimeType(e){let t=(this.base||this.remote).output_type;if("stream"===t&&"text"===e||"error"===t&&"traceback"===e)return"text/plain";if(("execute_result"===t||"display_data"===t)&&Array.isArray(e))return e[1];throw new s.NotifyUserError("Unknown MIME type for key: "+e)}stringify(e){let t=super.stringify(e);return e&&(t.mimetype=this.innerMimeType(e)),t}}t.OutputDiffModel=l,t.makeOutputModels=function(e,t,i){let n=[];if(null!==t||i)if(null===e){if(null===t)throw new Error("Either base or remote need to be specififed!");for(let e of t)n.push(new l(null,e))}else if(t===e)for(let t of e)n.push(new l(t,t));else{if(!i)throw new Error("Invalid arguments to makeOutputModels()");{let t=0,s=0;for(let r of i){let i=r.key;for(let s of e.slice(t,i))n.push(new l(s,s));if("addrange"===r.op){for(let e of r.valuelist)n.push(new l(null,e));s=0}else if("removerange"===r.op){let t=r.length;for(let s=i;s<i+t;s++)n.push(new l(e[s],null));s=t}else{if("patch"!==r.op)throw new Error("Invalid diff operation: "+r);n.push(new l(e[i],null,r.diff)),s=1}t=Math.max(t,i+s)}for(let i of e.slice(t))n.push(new l(i,i))}}else{if(null===e)throw new Error("Either base or remote need to be specififed!");for(let t of e)n.push(new l(t,null))}return n}},3846:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderableDiffModel=void 0;const n=i(1526),s=i(1840),r=i(4526),o=i(8787),l=i(8282);t.RenderableDiffModel=class{constructor(e,t,i){if(this.trustedChanged=new s.Signal(this),!t&&!e)throw new Error("Either remote or base value need to be given");this.base=e,this.remote=!t&&i?o.patch(e,i):t,this.diff=i||null,this.collapsible=!1}get unchanged(){return JSON.stringify(this.base)===JSON.stringify(this.remote)}get added(){return null===this.base}get deleted(){return null===this.remote}stringify(e){let t=function(e,i,n){if(!e)return e;if(Array.isArray(i)){const s=i.length>2?i.slice(1):i[1];return t(n?n(e,i[0]):e[i[0]],s,n)}return n?n(e,i):e[i]};const i=n.JSONExt.deepCopy(this.base);let s=e?t(i,e):i;const o=n.JSONExt.deepCopy(this.remote);let a=e?t(o,e):o,d=this.diff&&e?t(this.diff,e,r.getSubDiffByKey):this.diff,u=null;return u=this.unchanged||this.added||this.deleted||!d?l.createDirectStringDiffModel(s,a):l.createPatchStringDiffModel(s,d),u.mimetype=e?this.innerMimeType(e):"application/json",u.collapsible=this.collapsible,u.collapsibleHeader=this.collapsibleHeader,u.startCollapsed=this.startCollapsed,u}get trusted(){return this._trusted}set trusted(e){this._trusted!==e&&(this._trusted=e,this.trustedChanged.emit(e))}get contents(){let e=[];return this.base&&e.push(this.base),this.remote&&this.remote!==this.base&&e.push(this.remote),e}}},8282:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setMimetypeFromCellType=t.createDirectStringDiffModel=t.createPatchStringDiffModel=t.StringDiffModel=void 0;const n=i(1096),s=i(1526),r=i(8799),o=i(8049),l=i(8787);class a{constructor(e,t,i,n,s,o,l){this.base=e,this.remote=t,null===e?(console.assert(0===n.length),this.deletions=[]):this.deletions=r.raw2Pos(n,e),null===t?(console.assert(0===i.length),this.additions=[]):this.additions=r.raw2Pos(i,t),this.collapsible=!0===s,this.collapsible&&(this.collapsibleHeader=o||"",this.startCollapsed=!0===l)}iterateDiffs(){return new a.DiffIter(this)}getLineChunks(){let e=new o.LineChunker,t=this.iterateDiffs();for(let i=t.next();void 0!==i;i=t.next())e.addDiff(i.range,i.isAddition);return e.chunks}get unchanged(){return this.base===this.remote}get added(){return null===this.base}get deleted(){return null===this.remote}}t.StringDiffModel=a,function(e){e.DiffIter=class{constructor(e){this.editOffset=0,this.done=!1,this.ia=0,this.id=0,this.hintTakeDeletion=!1,this.model=e}next(){let e=null,t=null,i=this.model.additions,n=this.model.deletions,s=this.hintTakeDeletion;if(this.hintTakeDeletion=!1,this.ia<this.model.additions.length)if(this.id<n.length){let t=i[this.ia],r=n[this.id];t.from.line===r.from.line-this.editOffset&&t.from.ch===r.from.ch?s?e=!1:(this.hintTakeDeletion=!0,e=!0):e=t.from.line<r.from.line-this.editOffset||t.from.line===r.from.line-this.editOffset&&t.from.ch<r.from.ch}else e=!0;else{if(!(this.id<n.length))return void(this.done=!0);e=!1}t=e?i[this.ia++]:n[this.id++];let r=t.to.line-t.from.line;return t.endsOnNewline&&(r+=1),this.editOffset+=e?-r:r,{range:t,isAddition:e}}};class t{constructor(e){this.currentOffset=0,this.models=[],this.iterators=[],this.values=[],this.offsets=[];for(let t of e){if(null===t)continue;this.models.push(t);let e=t.iterateDiffs();this.iterators.push(e),this.offsets.push(0),this.values.push(e.next())}}static cmp(e,t,i,n){if(void 0===e&&void 0===t)return 0;if(void 0===e)return 1;if(void 0===t)return-1;let s=e.range.from.line+(e.isAddition?i:0),r=t.range.from.line+(t.isAddition?n:0);return s<r||e.range.from.ch<t.range.from.ch?-1:s>r||e.range.from.ch>t.range.from.ch?1:0}next(){let e=0;for(let i=1;i<this.values.length;++i)0>t.cmp(this.values[i],this.values[e],this.iterators[i].editOffset,this.iterators[e].editOffset)&&(e=i);this.i=e;let i=this.values[e];return this.currentOffset=this.offsets[e],this.offsets[e]=this.iterators[e].editOffset,void 0!==i&&(this.values[e]=this.iterators[e].next()),i}currentModel(){return this.models[this.i]}}e.SyncedDiffIter=t}(a=t.StringDiffModel||(t.StringDiffModel={})),t.createPatchStringDiffModel=function(e,t){console.assert(!!t,"Patch model needs diff.");const i=s.JSONExt.deepCopy(e);let n=l.stringifyAndBlankNull(i),r=l.patchStringified(i,t);return new a(n,r.remote,r.additions,r.deletions)},t.createDirectStringDiffModel=function(e,t){let i=l.stringifyAndBlankNull(e),n=l.stringifyAndBlankNull(t),s=[],o=[];if(null===e&&null===t)throw new Error("Invalid arguments to createDirectStringDiffModel(). Both base and remote cannot be equal!");if(null===e)i=null,s.push(new r.DiffRangeRaw(0,n.length,void 0));else if(null===t)n=null,o.push(new r.DiffRangeRaw(0,i.length,void 0));else if(n!==i)throw new Error("Invalid arguments to createDirectStringDiffModel(). Either base or remote should be null, or they should be equal!");return new a(i,n,s,o)},t.setMimetypeFromCellType=function(e,t,i){"code"===t.cell_type?e.mimetype=i:"markdown"===t.cell_type?e.mimetype="text/markdown":n.isRaw(t)&&(e.mimetype=t.metadata.format||"text/plain")}},8799:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.raw2Pos=t.DiffRangePos=t.DiffRangeRaw=void 0;const n=i(8681),s=i(8439);t.DiffRangeRaw=class{constructor(e,t,i){this.from=e,this.to=e+t,this.source=i}offset(e){this.from+=e,this.to+=e}};class r{constructor(e,t,i,n){this.from=e,this.to=t,this.chunkStartLine=!0===i,this.endsOnNewline=!0===n}}function o(e,t){if(0===e.length)return 0;let i=null;return e.some((function(e,n){return e>=t&&(i=n,!0)})),null===i?e.length:i}t.DiffRangePos=r,t.raw2Pos=function(e,t){let i=[],l=-1;for(;-1!==(l=t.indexOf("\n",l+1));)i.push(l);let a=[];for(let l of e){let e=o(i,l.from),d=e>0?i[e-1]+1:0,u=n.Pos(e,l.from-d);e=o(i,l.to-1),d=e>0?i[e-1]+1:0;let c=n.Pos(e,l.to-d),h=s.valueIn(l.from,i),f=s.valueIn(l.to-1,i),p=0===u.ch&&(u.line!==c.line||f||l.to===t.length)||!h||!s.valueIn(l.from-1,i)&&!s.valueIn(l.to,i),g=new r(u,c,p,f);g.source=l.source,a.push(g)}return a}},4526:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenStringDiff=t.stripSource=t.getDiffEntryByKey=t.getSubDiffByKey=t.JSON_INDENT=void 0;const n=i(8439),s=i(4632);function r(e,t,i){if(s.validateSequenceOp(e,t),"patch"===t.op){let i=e[t.key],n=t.diff;if(null!==n)for(let e of n)s.validateSequenceOp(i,e)}}t.JSON_INDENT="  ",t.getSubDiffByKey=function(e,t){if(!e)return null;for(let i=0;i<e.length;++i)if(e[i].key===t)return e[i].diff||null;return null},t.getDiffEntryByKey=function(e,t){if(!e)return null;for(let i=0;i<e.length;++i)if(e[i].key===t)return e[i];return null},t.stripSource=function e(t){if(!t)return null;let i=[];for(let s of t)if("patch"===s.op)i.push({key:s.key,op:s.op,diff:e(s.diff)});else{let e=n.shallowCopy(s);delete e.source,i.push(e)}return i},t.flattenStringDiff=function(e,t){"string"==typeof e&&(e=n.splitLines(e));let i=[0].concat(n.accumulateLengths(e)),o=[];for(let l of t){r(e,l);let t=i[l.key];if("patch"===l.op){let e=l.diff;if(null!==e)for(let i of e){let e=n.shallowCopy(i);e.key+=t,o.push(e)}}else{let e=null;if("addrange"===l.op)e=s.opAddRange(t,l.valuelist.join(""));else{let n=l.key+l.length;e=s.opRemoveRange(t,i[n]-t)}e.source=l.source,o.push(e)}}return n.sortByKey(o,"key")}},2191:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CellDiffWidget=t.OUTPUTS_DIFF_CLASS=t.CELLDIFF_CLASS=void 0;const n=i(3992),s=i(8374),r=i(5168),o=i(3788),l=i(111),a=i(8439),d=i(3127),u=i(5494),c=i(4530);t.CELLDIFF_CLASS="jp-Cell-diff",t.OUTPUTS_DIFF_CLASS="jp-Diff-outputsContainer";const h="jp-Cellrow-outputs";class f extends n.Panel{constructor(e,i,n){super(),this.addClass(t.CELLDIFF_CLASS),this._model=e,this._rendermime=i,this.mimetype=n,this.init()}init(){let e=this.model,i=u.DIFF_CLASSES.slice();e.added?(this.addClass(u.ADDED_DIFF_CLASS),i=u.DIFF_CLASSES.slice(1,2)):e.deleted?(this.addClass(u.DELETED_DIFF_CLASS),i=u.DIFF_CLASSES.slice(0,1)):e.unchanged?this.addClass(u.UNCHANGED_DIFF_CLASS):this.addClass(u.TWOWAY_DIFF_CLASS);let s=f.createView(e.source,e,i,this._rendermime);if(s.addClass("jp-Cellrow-source"),e.executionCount&&s.insertWidget(0,f.createPrompts(e.executionCount,e)),this.addWidget(s),!e.metadata.unchanged){let t=f.createView(e.metadata,e,i,this._rendermime);t.addClass("jp-Cellrow-metadata"),this.addWidget(t)}const r=e.getChunkedOutputs();if(a.hasEntries(r)){let s=new n.Panel;s.addClass(t.OUTPUTS_DIFF_CLASS);let l=!1;for(let t of r)if(1===t.length){let n=t[0],r=f.createView(n,e,i,this._rendermime);s.addWidget(r),l=l||!n.unchanged||n.added||n.deleted}else{let r=new n.Panel;r.addClass(u.CHUNK_PANEL_CLASS);let o=new n.Panel;o.addClass(u.ADDED_CHUNK_PANEL_CLASS);let a=new n.Panel;a.addClass(u.REMOVED_CHUNK_PANEL_CLASS);for(let n of t){let t=n.deleted?a:o,s=f.createView(n,e,i,this._rendermime);t.addWidget(s),l=l||!n.unchanged||n.added||n.deleted}r.addWidget(o),r.addWidget(a),s.addWidget(r)}if(e.added||e.deleted)s.addClass(h),this.addWidget(s);else{let e=!l,t=l?"Outputs changed":"Outputs unchanged",i=new o.CollapsiblePanel(s,t,e);i.addClass(h),this.addWidget(i)}}}static createPrompts(e,t){let i=[];if(!t.added){let t=`In [${e.base||" "}]:`;i.push(t)}if(!t.unchanged&&!t.deleted){let t=`In [${e.remote||" "}]:`;i.push(t)}let s=new r.FlexPanel({direction:"left-to-right"});for(let e of i){let t=new n.Widget;t.node.innerText=e,t.addClass("jp-InputPrompt"),s.addWidget(t),r.FlexPanel.setGrow(t,1)}return s.addClass("jp-Cellrow-executionCount"),s}static createView(e,t,i,r){let a;if(e instanceof d.StringDiffModel){let i=null;if(e.unchanged&&"markdown"===t.cellType){let t=new s.MimeModel({data:{"text/markdown":e.base}}),n=r.preferredMimeType(t.data,"ensure");if(!n)throw new Error("No renderer for output");let o=r.createRenderer(n);o.renderModel(t),i=o}else i=l.createNbdimeMergeView(e);e.collapsible?a=new o.CollapsiblePanel(i,e.collapsibleHeader,e.startCollapsed):(a=new n.Panel,a.addWidget(i))}else{if(!(e instanceof d.OutputDiffModel))throw new Error("Unrecognized model type.");a=new c.OutputPanel(e,t,i,r),e.added?a.addClass(u.ADDED_DIFF_CLASS):e.deleted?a.addClass(u.DELETED_DIFF_CLASS):e.unchanged?a.addClass(u.UNCHANGED_DIFF_CLASS):a.addClass(u.TWOWAY_DIFF_CLASS)}return a}get model(){return this._model}}t.CellDiffWidget=f},5494:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ADD_DEL_LABEL_CLASS=t.REMOVED_CHUNK_PANEL_CLASS=t.ADDED_CHUNK_PANEL_CLASS=t.CHUNK_PANEL_CLASS=t.DIFF_CLASSES=t.UNCHANGED_DIFF_CLASS=t.DELETED_DIFF_CLASS=t.ADDED_DIFF_CLASS=t.TWOWAY_DIFF_CLASS=void 0,t.TWOWAY_DIFF_CLASS="jp-Diff-twoway",t.ADDED_DIFF_CLASS="jp-Diff-added",t.DELETED_DIFF_CLASS="jp-Diff-deleted",t.UNCHANGED_DIFF_CLASS="jp-Diff-unchanged",t.DIFF_CLASSES=["jp-Diff-base","jp-Diff-remote"],t.CHUNK_PANEL_CLASS="jp-Diff-addremchunk",t.ADDED_CHUNK_PANEL_CLASS="jp-Diff-addedchunk",t.REMOVED_CHUNK_PANEL_CLASS="jp-Diff-removedchunk",t.ADD_DEL_LABEL_CLASS="jp-Diff-label"},7842:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(2191),t),s(i(3534),t),s(i(2569),t)},2569:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataDiffWidget=void 0;const n=i(3992),s=i(111),r=i(3788),o=i(5494);class l extends n.Panel{constructor(e){super(),this._model=e,console.assert(!e.added&&!e.deleted),this.addClass("jp-Metadata-diff"),this.init()}init(){let e=this._model;if(!e.unchanged){this.addClass(o.TWOWAY_DIFF_CLASS);let t=s.createNbdimeMergeView(e);e.collapsible&&(t=new r.CollapsiblePanel(t,e.collapsibleHeader,e.startCollapsed)),this.addWidget(t)}}}t.MetadataDiffWidget=l},3534:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookDiffWidget=void 0;const n=i(3992),s=i(2191),r=i(5494),o=i(2569);class l extends n.Panel{constructor(e,t){super(),this._model=e,this._rendermime=t,this.addClass("jp-Notebook-diff")}init(){let e=this._model,t=this._rendermime,i=Promise.resolve();i=i.then((()=>{e.metadata&&this.addWidget(new o.MetadataDiffWidget(e.metadata))}));for(let o of e.chunkedCells)i=i.then((()=>new Promise((i=>{if(1!==o.length||o[0].added||o[0].deleted){let i=new n.Panel;i.addClass(r.CHUNK_PANEL_CLASS);let l=new n.Panel;l.addClass(r.ADDED_CHUNK_PANEL_CLASS);let a=new n.Panel;a.addClass(r.REMOVED_CHUNK_PANEL_CLASS);for(let i of o)(i.deleted?a:l).addWidget(new s.CellDiffWidget(i,t,e.mimetype));i.addWidget(l),i.addWidget(a),this.addWidget(i)}else this.addWidget(new s.CellDiffWidget(o[0],t,e.mimetype));requestAnimationFrame((()=>{i()}))}))));return i}get model(){return this._model}}t.NotebookDiffWidget=l},4530:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderableOutputView=t.OutputPanel=void 0;const n=i(3992),s=i(8918),r=i(8374),o=i(3788),l=i(111),a=i(8439),d=i(5494),u=i(2621),c="jp-Diff-trustCandidate",h=["text/html"];let f=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/;function p(e,t=64){return null!==e&&e.length>t&&f.test(e.replace("\n",""))}class g extends n.Panel{constructor(e,t,i,s){if(super(),this._mimetype=null,this.forceText=!1,this.model=e,this.rendermime=s,this.editorClasses=i,e.trustedChanged.connect(((e,t)=>{this.trustedChanged(t)})),g.isTrustSignificant(e,this.rendermime)&&this.addClass(c),e.added){if(!t.added){let e=new n.Widget;e.node.textContent="Output added",e.addClass(d.ADD_DEL_LABEL_CLASS),this.addWidget(e)}this.addClass(d.ADDED_DIFF_CLASS)}else if(e.deleted){if(!t.deleted){let e=new n.Widget;e.node.textContent="Output deleted",e.addClass(d.ADD_DEL_LABEL_CLASS),this.addWidget(e)}this.addClass(d.DELETED_DIFF_CLASS)}else e.unchanged?this.addClass(d.UNCHANGED_DIFF_CLASS):this.addClass(d.TWOWAY_DIFF_CLASS);let r=this.createView();this.initContainer(r),this.createHoverMenu(),this.addClass("jp-Diff-outputPanel")}initContainer(e){this.model.collapsible?this.container=new o.CollapsiblePanel(e,this.model.collapsibleHeader,this.model.startCollapsed):(this.container=this,this.container.addWidget(e)),this.view=e}replaceView(e){let t=this.view,i=this.container.widgets.indexOf(t);this.container.insertWidget(i,e),t.parent=null,this.view=e}createView(e=!1){let t=null,i=this.model,n=this.rendermime;return t=m.canRender(i,n)&&!e?new m(i,this.editorClasses,n,this.selectedMimetype):this.createOutputTextView(),t}createOutputTextView(){let e,t=this.model,i=null;if(null===this.selectedMimetype?s.find(this.rendermime.mimeTypes,(e=>(i=t.hasMimeType(e),null!==i))):i=t.hasMimeType(this.selectedMimetype),i){let n=t.stringify(i);p(n.base||n.remote)||(e=l.createNbdimeMergeView(n))}return e||(e=l.createNbdimeMergeView(t.stringify())),e}createHoverMenu(){this.menu=new n.Panel,this.menu.addClass("jp-Diff-outputMenu"),this.container.addWidget(this.menu);let e=document.createElement("button"),t=["Show source","Render"];e.innerText=t[0],e.onclick=i=>{this.forceText=!this.forceText,e.innerText=t[this.forceText?1:0],this.updateView()};let i=new n.Widget({node:e});i.addClass("jp-Diff-showOutputSourceButton"),this.menu.addWidget(i);let s=document.createElement("button");s.innerText="Trust",s.onclick=e=>{this.model.trusted=!this.model.trusted},i=new n.Widget({node:s}),i.addClass("jp-Diff-trustOutputButton"),this.menu.addWidget(i);let o=[];for(let e of this.model.contents){let t=r.OutputModel.getData(e);o=o.concat(Object.keys(t))}if(o=o.filter(a.unique),o.length>1){let e=a.buildSelect(o),t=this.selectedMimetype;t&&(e.selectedIndex=o.indexOf(t)),e.onchange=t=>{this.selectedMimetype=o[e.selectedIndex]},i=new n.Widget({node:e}),i.addClass("jp-Diff-outputMimetypeSelect"),this.menu.addWidget(i)}else if(1===o.length){let e=document.createElement("span");e.innerText=o[0],i=new n.Widget({node:e}),this.menu.addWidget(i)}}trustedChanged(e){this.updateView(),e?this.removeClass(c):g.isTrustSignificant(this.model,this.rendermime)&&this.addClass(c)}updateView(){let e=this.model;if(this.view instanceof m)if(!this.forceText&&m.canRender(e,this.rendermime))this.view.updateView(this.selectedMimetype,e.trusted);else{let e=this.createView(this.forceText);this.replaceView(e)}else{let e=this.createView(this.forceText);this.replaceView(e)}}get selectedMimetype(){if(null!==this._mimetype)return this._mimetype;let e=r.OutputModel.getData(this.model.base||this.model.remote),t=this.rendermime.preferredMimeType(e,this.model.trusted?"any":"ensure");return void 0===t?null:t}set selectedMimetype(e){this._mimetype!==e&&(this._mimetype=e,this.updateView())}static isTrustSignificant(e,t){if(e.trusted)return!1;let i=[];e.base&&i.push(e.base),e.remote&&e.remote!==e.base&&i.push(e.remote);for(let e of i){let i=new r.OutputModel({value:e,trusted:!1}),n=Object.keys(i.data),o=s.toArray(t.mimeTypes),l=a.intersection(n,o);for(let e of l){let i=t.getFactory(e);if(i&&(!i.safe||-1!==h.indexOf(e)))return!0}}return!1}}t.OutputPanel=g;class m extends u.RenderableDiffView{constructor(e,t,i,n){super(e,t,i,n)}createSubView(e,t){let i=new _(this.rendermime);return i.updateView(e,t,this.mimetype),i}updateView(e,t){let i=0,n=this.model;this.mimetype=e,s.each(this.layout.widgets,(s=>{if(s instanceof _){let r=null;0===i&&n.base?r=n.base:n.remote&&(r=n.remote),r&&s.updateView(r,t,e),++i}}))}static canRender(e,t){let i=e.contents;for(let n of i){let i=r.OutputModel.getData(n);if(!t.preferredMimeType(i,e.trusted?"any":"ensure"))return!1}return!0}}t.RenderableOutputView=m;class _ extends n.Panel{constructor(e){super(),this.rendermime=e}updateView(e,t,i){let n=this.renderer;this.renderer=this.createRenderer(e,t,i),void 0!==n&&n.dispose(),this.addWidget(this.renderer)}createRenderer(e,t,i){let n=new r.OutputModel({value:e,trusted:t}),s=this.rendermime.createRenderer(i);return s.renderModel(n),s.addClass("jp-Diff-renderedOutput"),p(r.OutputModel.getData(e)[i])&&s.addClass("jp-diff-base64Output"),s}}},2621:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderableDiffView=void 0;const n=i(3992);class s extends n.Widget{constructor(e,t,i,s){super(),this.rendermime=i,this.model=e,this.mimetype=s;let r=e.base,o=e.remote;this.layout=new n.PanelLayout;let l=0;if(r){let i=this.createSubView(r,e.trusted);this.layout.addWidget(i),i.addClass(t[l++])}if(o&&o!==r){let i=this.createSubView(o,e.trusted);this.layout.addWidget(i),i.addClass(t[l++])}}}t.RenderableDiffView=s},1604:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterDecisions=t.pushPatchDecision=t.buildDiffs=t.applyDecisions=t.resolveCommonPaths=t.pushPath=t.popPath=t.addSorted=t.decisionSortKey=t.decisionPathSortKey=t.MergeDecision=void 0;const n=i(4632),s=i(4526),r=i(8787),o=i(8439);function l(e,t){return void 0===e?t:e}class a{constructor(e,t=null,i=null,n="base",s=!1,r=null,d=null){this.level=0,e instanceof Array?this._path=e:e instanceof a?(this._path=e.absolutePath.slice(),t=e.localDiff,i=e.remoteDiff,n=e.action,s=e.conflict,r=e.customDiff,d=e.similarInsert,this.level=e.level):(this._path=l(e.common_path,[]),t=l(e.local_diff,t),i=l(e.remote_diff,i),n=function(e){if(o.valueIn(e,["base","local","remote","local_then_remote","remote_then_local","custom","clear","clear_parent","either"]))return e;throw new Error("Invalid merge decision action: "+e)}(l(e.action,n)),s=l(e.conflict,s),r=l(e.custom_diff,r),d=l(e.similar_insert,d)),this.localDiff=t,this.remoteDiff=i,this.action=n,this.conflict=s,this.customDiff=r,this.similarInsert=d}setValuesFrom(e){this._path=e.absolutePath.slice(),this.localDiff=e.localDiff,this.remoteDiff=e.remoteDiff,this.action=e.action,this.conflict=e.conflict,this.customDiff=e.customDiff,this.similarInsert=e.similarInsert,this.level=e.level}get localPath(){return this._path.slice(this.level)}get absolutePath(){return this._path}set absolutePath(e){this._path=e}pushPath(e){this._path.push(e)}get diffs(){let e=[this.localDiff,this.remoteDiff];return this.customDiff&&e.push(this.customDiff),e}set diffs(e){this.localDiff=e[0],this.remoteDiff=e[1],e.length>2&&(this.customDiff=e[2])}serialize(){return{common_path:this.absolutePath.slice(),local_diff:s.stripSource(this.localDiff),remote_diff:s.stripSource(this.remoteDiff),action:this.action,conflict:this.conflict,custom_diff:s.stripSource(this.customDiff)}}}function d(e,t){if(e.length===t.length){for(let i=0;i<e.length;++i)if(e[i]!==t[i])return e[i]<t[i]?-1:1;return 0}return t.length-e.length}function u(e,t){if(e.length<1)return null;let i=0;for(let t of e){if(null!==t&&t.length>0)break;i++}if(i===e.length)return console.log("Empty merge decision (no diffs)!"),null;let n=e[i],s=n[0].op,r=n[0].key;for(let t of e)if(t&&t.length>0)for(let e of t)if(e.op!==s||e.key!==r)return null;if("patch"===s){if(!0!==t)for(let t of e)if(t&&t.length>0&&(1!==t.length||!t[0].diff||1!==t[0].diff.length))return null;let i=[];for(let t of e)t&&t.length>0?i.push(t[0].diff):i.push(null);return{diffs:i,key:r}}return null}function c(e,t){for(let i of t.reverse())e=[n.opPatch(i,e)];return e}function h(e,t){for(let i of t)e=e[i];return e}function f(e,t){return e&&t?e.concat(t):e?e.slice():t?t.slice():[]}function p(e,t){let i=t.action;if("base"===i)return[];if("local"===i||"either"===i)return t.localDiff?t.localDiff.slice():[];if("remote"===i)return t.remoteDiff?t.remoteDiff.slice():[];if("custom"===i)return t.customDiff?t.customDiff.slice():[];if("local_then_remote"===i)return f(t.localDiff,t.remoteDiff);if("remote_then_local"===i)return f(t.remoteDiff,t.localDiff);if("clear"===i){let i=null;if("object"!=typeof e)throw new TypeError("Can only use `'clear'` action on objects/dicts");for(let e of f(t.localDiff,t.remoteDiff))if(i){if(i!==e.key)throw new Error("Cannot combine diffs with different keys")}else i=e.key;if(i){let r=n.opReplace(i,(s=e[i])instanceof Array?[]:"string"==typeof s?"":null===s||o.valueIn(typeof s,["number","boolean"])?null:{});return r.source={decision:t,action:"custom"},[r]}return[]}if("clear_parent"===i){if(Array.isArray(e)){let i=n.opRemoveRange(0,e.length);return i.source={decision:t,action:"custom"},[i]}if("string"==typeof e){let i=o.splitLines(e).length,s=n.opRemoveRange(0,i);return s.source={decision:t,action:"custom"},[s]}{let i=[];for(let s of e){let e=n.opRemove(s);e.source={decision:t,action:"custom"},i.push(e)}return i}}throw new Error('The action "'+i+'" is not defined');var s}function g(e,t){for(let i=0;i<t.length;++i){if("string"==typeof e)return[t.slice(0,i),t.slice(i)];e=e[t[i]]}return[t,null]}function m(e,t){let i=[],n=null;for(let s=0;s<t.length;++s){let r,l=e[t[s]].path,a=e[t[s]].diff;if(i=i.concat(a),r=s===t.length-1?n:e[t[s+1]].path,!o.isPrefixArray(r,l)){let n=m(e,t.slice(s+1));r=e[t[t.length-1]].path;let a=o.findSharedPrefix(l,r),d=a?a.length:0;i=c(i,l.slice(d)).concat(c(n,r.slice(d)));break}null!==r&&(i=c(i,l.slice(r.length)),n=r)}return i}t.MergeDecision=a,t.decisionPathSortKey=d,t.decisionSortKey=function(e,t){return d(e.absolutePath,t.absolutePath)},t.addSorted=function(e,t,i){let n=0;for(;n<e.length;++n){let s=d(e[n].absolutePath,t.absolutePath);if(s>0)return void e.splice(n,0,t);if(void 0!==i&&0===s){let s=null;for(let t of e[n].diffs)if(t)for(let e of t)(!s||e.key<s)&&(s=e.key);if(i===s)throw new Error("Shouldn't have multiple decisions with diff on same key");if(null===s||i<s)return void e.splice(n,0,t)}}e.push(t)},t.popPath=u,t.pushPath=c,t.resolveCommonPaths=function(e){for(let t of e){let e=t.diffs,i=t.absolutePath||[],n=u(e,!0);for(;n;)i.push(n.key),e=n.diffs,n=u(e,!0);t.absolutePath=i,t.diffs=e}},t.applyDecisions=function(e,t){let i=o.deepCopy(e),n=null,s=null,l=null,a=null,d=[],u=!1;for(let e of t){let t=g(i,e.localPath),h=t[0],f=t[1];if(o.arraysEqual(h,n))if(u);else{"clear_parent"===e.action&&(u=!0,d=[]);let t=p(a,e);f&&(t=c(t,f)),d=d.concat(t)}else{null!==n&&(null===s?i=r.patch(a,d):s[l]=r.patch(a,d)),n=h.slice(),a=i,s=null,l=null;for(let e of h)s=a,a=a[e],l=e;d=p(a,e),f&&(d=c(d,f)),u="clear_parent"===e.action}}return null!==n&&(null===s?i=r.patch(a,d):s[l]=r.patch(a,d)),i},t.buildDiffs=function(e,t,i){let n={},r=[],o="local"===i,l="merged"===i;o||l||console.assert("remote"===i);for(let i of t){let t=null,a=g(e,i.localPath),d=a[0],u=a[1];if(l)t=p(h(e,d),i);else if(t=o?i.localDiff:i.remoteDiff,null===t)continue;let f="/"+d.join("/");if(n.hasOwnProperty(f))if(u){let e=s.getSubDiffByKey(n[f].diff,u[0]);e?e.push.apply(e,t):(t=c(t,u),n[f].diff.push(t[0]))}else n[f].diff=n[f].diff.concat(t);else u&&(t=c(t,u)),n[f]={diff:t,path:d},r.push(f)}return 0===Object.keys(n).length?null:(n.hasOwnProperty("/")||(n["/"]={diff:[],path:[]},r.push("/")),m(n,r))},t.pushPatchDecision=function(e,t){let i=new a(e);for(let e of t.slice().reverse()){if(0===i.absolutePath.length)throw new Error("Cannot remove key from empty decision path: "+e+", "+i);let t=i.absolutePath.pop();if(t!==e)throw Error("Cannot push a patch that doesn't correspond to a key in the decision path! Key: "+e+"; Remaining path: "+i.absolutePath.concat([t]));let s=i.localDiff&&i.localDiff.length>0,r=i.remoteDiff&&i.remoteDiff.length>0,o=i.customDiff&&i.customDiff.length>0;i.localDiff=s?[n.opPatch(e,i.localDiff)]:null,i.remoteDiff=r?[n.opPatch(e,i.remoteDiff)]:null,i.customDiff=o?[n.opPatch(e,i.customDiff)]:null}return i},t.filterDecisions=function(e,t,i,n){let s=[];i=i||0;for(let r of e)void 0!==n&&r.absolutePath.length>n||o.isPrefixArray(t,r.absolutePath.slice(i))&&(r.level=i+t.length,s.push(r));return s}},8580:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CellMergeModel=void 0;const n=i(1096),s=i(1840),r=i(4526),o=i(3127),l=i(1604),a=i(8787),d=i(8439),u=i(8049),c=i(1833),h=i(1156);class f extends c.ObjectMergeModel{constructor(e,t,i){super(e,[],i,["source","metadata","outputs","execution_count"]),this.deleteCellChanged=new s.Signal(this),this._clearOutputs=!1,this.clearOutputsChanged=new s.Signal(this),this.onesided=!1,this._deleteCell=!1,this.processDecisions(t)}get deleteCell(){return this._deleteCell}set deleteCell(e){this._deleteCell!==e&&(this._deleteCell=e,this.deleteCellChanged.emit(e))}get clearOutputs(){return this._clearOutputs}set clearOutputs(e){this._clearOutputs!==e&&(this._clearOutputs=e,this.clearOutputsChanged.emit(e))}get agreedSource(){return!!this.local&&!!this.remote&&this.local.source.remote===this.remote.source.remote}get agreedMetadata(){return!(!this.local||!this.remote)&&this.local.metadata.remote===this.remote.metadata.remote}get agreedOutputs(){if(!this.local||!this.remote)return!1;let e=this.local.outputs,t=this.remote.outputs;if(!d.hasEntries(e)||!d.hasEntries(t))return!d.hasEntries(e)&&!d.hasEntries(t);if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(JSON.stringify(e[i].remote)!==JSON.stringify(t[i].remote))return!1;return!0}get agreedCell(){return this.agreedSource&&this.agreedMetadata&&this.agreedOutputs}get conflicted(){for(let e of this.decisions)if(e.conflict)return!0;return!1}hasConflictsOn(e){let t=l.filterDecisions(this.decisions,[e],2);for(let e of t)if(e.conflict)return!0;return!1}get sourceConflicted(){return this.hasConflictsOn("source")}get metadataConflicted(){return this.hasConflictsOn("metadata")}get outputsConflicted(){return this.hasConflictsOn("outputs")}clearOutputConflicts(){let e=l.filterDecisions(this.decisions,["outputs"],2);for(let t of e)t.conflict=!1}getExecutionCountDecision(){let e=l.filterDecisions(this.decisions,["cells"],0,2);for(let t of e)if(null!==r.getDiffEntryByKey(t.localDiff,"execution_count")||null!==r.getDiffEntryByKey(t.remoteDiff,"execution_count")||null!==r.getDiffEntryByKey(t.customDiff,"execution_count"))return t;return null}serialize(){if(this.deleteCell)return null;if(null===this.base){if(this.decisions.length>1||!this.merged.added)throw new h.NotifyUserError("Invalid cell decision");let e,t=this.decisions[0];if("local"===t.action||"either"===t.action){if(!t.localDiff)throw new h.NotifyUserError("Invalid cell decision");e=t.localDiff[0]}else if("remote"===t.action){if(!t.remoteDiff)throw new h.NotifyUserError("Invalid cell decision");e=t.remoteDiff[0]}else{if("custom"!==t.action)throw new h.NotifyUserError("Invalid cell decision");if(!t.customDiff)throw new h.NotifyUserError("Invalid cell decision");e=t.customDiff[0]}if("addrange"!==e.op)throw new h.NotifyUserError("Invalid cell decision");return e.valuelist[0]}let e=[];for(let t of this.decisions){let i=new l.MergeDecision(t);i.level=2,e.push(i)}let t=l.applyDecisions(this.base,e),i=t.source;return Array.isArray(i)&&(i=i.join("")),i!==this._merged.source.remote&&(console.warn("Serialized outputs doesn't match model value! Keeping the model value."),t.source=d.splitLines(this._merged.source.remote)),this.clearOutputs&&n.isCode(t)&&(t.outputs=[]),t}processDecisions(e){if(1===e.length&&d.arraysEqual(e[0].absolutePath,["cells"])){let t=e[0];0===(e=this.applyCellLevelDecision(t)).length&&this.decisions.push(t)}for(let t of e){if(t.level=2,t.absolutePath.length<2||"cells"!==t.absolutePath[0])throw new Error("Not a valid path for a cell decision");if(2===t.absolutePath.length&&(d.hasEntries(t.localDiff)||d.hasEntries(t.remoteDiff))){let e=l.pushPatchDecision(t,t.absolutePath.slice(1,2)),i=d.hasEntries(e.localDiff)?e.localDiff[0]:null,n=d.hasEntries(e.remoteDiff)?e.remoteDiff[0]:null,s=this.splitPatch(e,i,n);for(let e of s)e.level=2,this.decisions.push(e)}else this.decisions.push(t)}}applyCellLevelDecision(e){let t=[];if(console.assert(!this.onesided,"Cannot have multiple cell decisions on one cell!"),this.onesided=!0,d.hasEntries(e.localDiff))if(d.hasEntries(e.remoteDiff))if(console.assert(d.hasEntries(e.localDiff)&&d.hasEntries(e.remoteDiff)),console.assert(1===e.localDiff.length&&1===e.remoteDiff.length),e.localDiff[0].op===e.remoteDiff[0].op)if(null===this.base){let t=e.localDiff[0].valuelist[0];this._local=o.createAddedCellDiffModel(t,this.mimetype),this._remote=o.createAddedCellDiffModel(t,this.mimetype),this._merged=o.createAddedCellDiffModel(t,this.mimetype)}else this._local=o.createDeletedCellDiffModel(this.base,this.mimetype),this._remote=o.createDeletedCellDiffModel(this.base,this.mimetype),this._merged=o.createDeletedCellDiffModel(this.base,this.mimetype),this.deleteCell=d.valueIn(e.action,["local","remote","either"]);else{let i=[e.localDiff[0].op,e.remoteDiff[0].op];if(console.assert(d.valueIn("removerange",i)&&d.valueIn("patch",i)),null===this.base)throw new Error("Invalid merge decision, cannot have null base for deleted cell: "+e);"removerange"===i[0]?(this._local=o.createDeletedCellDiffModel(this.base,this.mimetype),this.deleteCell="local"===e.action,t=t.concat(this.splitPatch(e,null,e.remoteDiff[0]))):(this._remote=o.createDeletedCellDiffModel(this.base,this.mimetype),this.deleteCell="remote"===e.action,t=t.concat(this.splitPatch(e,e.localDiff[0],null))),l.resolveCommonPaths(t)}else{if(this._remote=null,!e.localDiff||1!==e.localDiff.length)throw new Error("Merge decision does not conform to expectation: "+e);if(null===this.base){let t=e.localDiff[0];if("addrange"!==t.op)throw new Error("Merge decision does not conform to expectation: "+e);let i=t.valuelist[0];this._local=o.createAddedCellDiffModel(i,this.mimetype),this._merged=o.createAddedCellDiffModel(i,this.mimetype)}else this._local=o.createDeletedCellDiffModel(this.base,this.mimetype),this._merged=o.createDeletedCellDiffModel(this.base,this.mimetype),this.deleteCell=d.valueIn(e.action,["local","either"])}else{if(this._local=null,!e.remoteDiff||1!==e.remoteDiff.length)throw new Error("Merge decision does not conform to expectation: "+e);if(null===this.base){let t=e.remoteDiff[0];if("addrange"!==t.op)throw new Error("Merge decision does not conform to expectation: "+e);let i=t.valuelist[0];this._remote=o.createAddedCellDiffModel(i,this.mimetype),this._merged=o.createAddedCellDiffModel(i,this.mimetype)}else this._remote=o.createDeletedCellDiffModel(this.base,this.mimetype),this._merged=o.createDeletedCellDiffModel(this.base,this.mimetype),this.deleteCell=d.valueIn(e.action,["remote","either"])}return t}splitPatch(e,t,i){let n=!!t&&d.hasEntries(t.diff),s=!!i&&d.hasEntries(i.diff);if(!n&&!s)return[];let o=n?t.diff:null,a=s?i.diff:null,u=[],c=[];if(n)for(let e of o)c.push(e.key);if(s)for(let e of a)c.push(e.key);if(c=c.filter(d.unique),n&&s&&t.key!==i.key)throw new Error("Different keys of patch ops given to `splitPatch`.");let f=n?t.key:i.key;for(let t of c){if(this._whitelist&&!d.valueIn(t,this._whitelist))throw new h.NotifyUserError('Currently not able to handle decisions on variable "'+t+'"');let i=r.getDiffEntryByKey(o,t),n=r.getDiffEntryByKey(a,t),s=!(i&&n),c=e.action;"base"===c&&s&&(c=i?"local":"remote"),u.push(new l.MergeDecision(e.absolutePath.concat([f]),i?[i]:null,n?[n]:null,c,e.conflict))}let p=this.splitOnSourceChunks(u);return l.resolveCommonPaths(p),d.stableSort(p,l.decisionSortKey)}splitOnSourceChunks(e){let t=[];for(let i=0;i<e.length;++i){let n=e[i];if("source"===n.absolutePath[2]){let e=this.base.source;Array.isArray(e)||(e=d.splitLines(e)),n.level=3;let i=u.splitMergeDecisionsOnChunks(e,[n]);l.resolveCommonPaths(i),t=t.concat(d.stableSort(i,l.decisionSortKey))}else t.push(n)}return t}createDiffModel(e){if(null===this.base)throw new Error("Cannot create a patched or unchanged diff model with null base!");return e&&e.length>0?o.createPatchedCellDiffModel(this.base,e,this.mimetype):o.createUnchangedCellDiffModel(this.base,this.mimetype)}createMergedDiffModel(){if(null===this.base)throw new Error("Cannot create a patched or unchanged merged diff model with null base!");return function(e,t,i,s,u){for(let e of t)if(0===e.localPath.length){let t=l.popPath(e.diffs,!0);null!==t&&(e.diffs=t.diffs,e.pushPath(t.key))}let h=new c.DecisionStringDiffModel(e.source,l.filterDecisions(t,["source"],2),[i?i.source:null,s?s.source:null]);o.setMimetypeFromCellType(h,e,u);let f=new c.DecisionStringDiffModel(e.metadata,l.filterDecisions(t,["metadata"],2),[i?i.metadata:null,s?s.metadata:null]),p=null,g=null;if(n.isCode(e)){if(e.outputs){let i,n=e.outputs,s=l.filterDecisions(t,["outputs"],2),r=l.buildDiffs(n,s,"merged");i=r&&r.length>0?a.patch(n,r):n,p=o.makeOutputModels(n,i,r)}let i=e.execution_count,n=l.filterDecisions(t,["cells"],0,2);for(let t of n)if(null!==r.getDiffEntryByKey(t.localDiff,"execution_count")||null!==r.getDiffEntryByKey(t.remoteDiff,"execution_count")||null!==r.getDiffEntryByKey(t.customDiff,"execution_count")){t.level=2;let n=l.buildDiffs(e,[t],"merged"),s=d.hasEntries(n)?n[0]:null;g=o.createImmutableModel(i,i,s)}}return new o.CellDiffModel(h,f,p,g,e.cell_type)}(this.base,this.decisions,this.local,this.remote,this.mimetype)}}t.CellMergeModel=f},1833:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectMergeModel=t.DecisionStringDiffModel=void 0;const n=i(8799),s=i(3127),r=i(1604),o=i(8049),l=i(8787);class a extends s.StringDiffModel{constructor(e,t,i,n,s,r){super(l.stringifyAndBlankNull(e),"",[],[],n,s,r),this.rawBase=e,this.decisions=t,this._outdated=!0,this._sourceModels=i,this._update()}get additions(){return this._outdated&&this._update(),this._additions}set additions(e){this._additions=e}get deletions(){return this._outdated&&this._update(),this._deletions}set deletions(e){this._deletions=e}get remote(){return this._outdated&&this._update(),this._remote}set remote(e){this._remote=e}invalidate(){this._outdated=!0}get invalid(){return this._outdated}getLineChunks(){let e=[this];e=e.concat(this._sourceModels);let t=new o.LineChunker,i=new s.StringDiffModel.SyncedDiffIter(e);for(let e=i.next();void 0!==e;e=i.next())if(i.currentModel()===this)t.addDiff(e.range,e.isAddition);else{if(!e.range.source||"base"!==e.range.source.decision.action)continue;t.addGhost(e.range,e.isAddition,i.currentOffset)}return t.chunks}_update(){this._outdated=!1;let e=r.buildDiffs(this.rawBase,this.decisions,"merged"),t=l.patchStringified(this.rawBase,e);this._additions=n.raw2Pos(t.additions,t.remote),this._deletions=n.raw2Pos(t.deletions,this.base||""),this._remote=t.remote}}t.DecisionStringDiffModel=a,t.ObjectMergeModel=class{constructor(e,t,i,n){this._finalized=!1,this.base=e,this.mimetype=i,this._whitelist=n||null,this.decisions=t}serialize(){return null===this.base?null:r.applyDecisions(this.base,this.decisions)}get local(){if(void 0===this._local){this._finalizeDecisions();let e=r.buildDiffs(this.base,this.decisions,"local");this._local=this.createDiffModel(e)}return this._local}get remote(){if(void 0===this._remote){this._finalizeDecisions();let e=r.buildDiffs(this.base,this.decisions,"remote");this._remote=this.createDiffModel(e)}return this._remote}get merged(){return void 0===this._merged&&(this._finalizeDecisions(),this._merged=this.createMergedDiffModel()),this._merged}get subModels(){return[this.local,this.remote,this.merged]}_finalizeDecisions(){if(!this._finalized){for(let e of this.decisions)"either"===e.action?(o.labelSource(e.localDiff,{decision:e,action:"either"}),o.labelSource(e.remoteDiff,{decision:e,action:"either"})):(o.labelSource(e.localDiff,{decision:e,action:"local"}),o.labelSource(e.remoteDiff,{decision:e,action:"remote"})),o.labelSource(e.customDiff,{decision:e,action:"custom"});this._finalized=!0}}}},5118:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(8580),t),s(i(1833),t),s(i(617),t),s(i(1522),t)},617:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataMergeModel=void 0;const n=i(3127),s=i(1833),r=i(1526);class o extends s.ObjectMergeModel{constructor(e,t){super(e,t,"application/json")}serialize(){if(!this.merged||null===this.merged.remote)throw new Error("Missing notebook metadata merge data.");return JSON.parse(this.merged.remote)}createDiffModel(e){if(e&&e.length>0)return n.createPatchStringDiffModel(this.base,e);{const e=r.JSONExt.deepCopy(this.base);return n.createDirectStringDiffModel(e,e)}}createMergedDiffModel(){return new s.DecisionStringDiffModel(this.base,this.decisions,[this.local,this.remote])}}t.MetadataMergeModel=o},1522:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookMergeModel=void 0;const n=i(8439),s=i(1604),r=i(8049),o=i(8787),l=i(8580),a=i(617);function d(e){return!!e&&2===e.length&&e[0].key===e[1].key}t.NotebookMergeModel=class{constructor(e,t){this.base=e;let i,n=this.constructor.preprocessDecisions(t);try{i=e.metadata.language_info.mimetype}catch(e){}this.mimetype=i||"text/python",this.cells=this.buildCellList(n);let r=s.filterDecisions(n,["metadata"]);this.metadata=new a.MetadataMergeModel(e.metadata,r),this.unsavedChanges=!1}static preprocessDecisions(e){let t=[];for(let i of e)t.push(new s.MergeDecision(i));t=function(e){let t=[];for(let i of e)if(n.arraysEqual(i.absolutePath,["cells"]))if(i.localDiff&&!i.remoteDiff)for(let e of i.localDiff){let n=new s.MergeDecision(i);n.localDiff=[e],t.push(n)}else if(i.remoteDiff&&!i.localDiff)for(let e of i.remoteDiff){let n=new s.MergeDecision(i);n.absolutePath=i.absolutePath.slice(),n.remoteDiff=[e],t.push(n)}else if(d(i.localDiff))if(d(i.remoteDiff)){let e=new s.MergeDecision(i);e.localDiff=i.localDiff.slice(0,1),e.remoteDiff=i.remoteDiff.slice(0,1),t.push(e),t.push(new s.MergeDecision(i.absolutePath.slice(),i.localDiff.slice(1),i.remoteDiff.slice(1),"either"))}else{let e=new s.MergeDecision(i);e.localDiff=i.localDiff.slice(0,1),t.push(e),t.push(new s.MergeDecision(i.absolutePath.slice(),i.localDiff.slice(1),[],"local",i.conflict))}else if(d(i.remoteDiff)){let e=new s.MergeDecision(i);e.remoteDiff=i.remoteDiff.slice(0,1),t.push(e),t.push(new s.MergeDecision(i.absolutePath.slice(),[],i.remoteDiff.slice(1),"remote",i.conflict))}else if(n.hasEntries(i.remoteDiff)&&n.hasEntries(i.localDiff))if("addrange,removerange"===[i.remoteDiff[0].op,i.localDiff[0].op].sort().join(",")){let e=new s.MergeDecision(i);e.action="local",e.localDiff=i.localDiff.slice(),e.remoteDiff=null,t.push(e);let n=new s.MergeDecision(i);n.action="remote",n.localDiff=null,n.remoteDiff=i.remoteDiff.slice(),t.push(n)}else t.push(i);else t.push(i);else t.push(i);return s.resolveCommonPaths(t),t}(t),t=function(e){let t=[],i=function(e,t,i,n){let r=new s.MergeDecision(e.absolutePath.slice(),null,null,e.action,e.conflict),o=[{key:t,op:"removerange",length:1}];return console.assert(i||n),i&&(r.localDiff=o),n&&(r.remoteDiff=o),r};for(let s of e){if(!n.arraysEqual(s.absolutePath,["cells"])){t.push(s);continue}let e=n.hasEntries(s.localDiff)?s.localDiff[s.localDiff.length-1]:null,r=n.hasEntries(s.remoteDiff)?s.remoteDiff[s.remoteDiff.length-1]:null;if(e&&!r||r&&!e){let n=e||r;if(!("removerange"===n.op&&n.length>1)){t.push(s);continue}for(let o=0;o<n.length;++o)t.push(i(s,n.key+o,!!e,!!r))}else if(r&&e){if("removerange"!==e.op&&"removerange"!==r.op){t.push(s);continue}if(e.op===r.op){let n=e.key,o=r.key,l=Math.min(n,o),a=n+e.length,d=o+r.length,u=Math.max(a,d);for(let e=l;e<u;++e){let r=e>=n&&e<a,l=e>=o&&e<d;t.push(i(s,e,r,l))}}else{let n="removerange"===e.op,o=n?e:r,l=n?r:e;console.assert("patch"===l.op);let a=l.key,d=o.key;for(let e=d;e<d+o.length;++e){let r=i(s,e,n,!n);e===a&&(n?r.remoteDiff=[l]:r.localDiff=[l]),t.push(r)}}}}return t}(t),t=function(e){let t=[],i=function(e,t,i,r){let o=new s.MergeDecision(e.absolutePath.slice(),null,null,e.action,e.conflict);if(i&&!n.hasEntries(e.localDiff)||!i&&!n.hasEntries(e.remoteDiff))throw new Error("Invalid input: "+e);let l=[{key:(i?e.localDiff:e.remoteDiff)[0].key,op:"addrange",valuelist:[t]}];return console.assert(i||r),i&&(o.localDiff=l),r&&(o.remoteDiff=l),o};for(let s of e){if(!n.arraysEqual(s.absolutePath,["cells"])){t.push(s);continue}let e=!0;if(s.localDiff)for(let t of s.localDiff)if("addrange"!==t.op){e=!1;break}if(s.remoteDiff)for(let t of s.remoteDiff)if("addrange"!==t.op){e=!1;break}if(!e){t.push(s);continue}let r=s.localDiff&&1===s.localDiff.length?s.localDiff[0]:null,l=s.remoteDiff&&1===s.remoteDiff.length?s.remoteDiff[0]:null;if(r&&!l||l&&!r){let e=(r||l).valuelist;for(let n of e)t.push(i(s,n,!!r,!!l))}else if(r&&l)if(o.stringify(r.valuelist)===o.stringify(l.valuelist))for(let e of r.valuelist)t.push(i(s,e,!0,!0));else{let e=r.key;if(console.assert(e===l.key),"remote_then_local"===s.action){for(let e of l.valuelist){const n=i(s,e,!1,!0);n.action="remote",t.push(n)}for(let e of r.valuelist){const n=i(s,e,!0,!1);n.action="local",t.push(n)}}else{for(let e of r.valuelist){const n=i(s,e,!0,!1);n.action="local",t.push(n)}for(let e of l.valuelist){const n=i(s,e,!1,!0);n.action="remote",t.push(n)}}}}return t}(t),t=function(e){let t=[];for(let i of e){if(!n.arraysEqual(i.absolutePath,["cells"])){t.push(i);continue}let e=n.hasEntries(i.localDiff)?i.localDiff:null,r=n.hasEntries(i.remoteDiff)?i.remoteDiff:null;if(e&&e.length<2&&r&&r.length<2){t.push(i);continue}let o=Math.max(e?e.length:0,r?r.length:0);for(let n=0;n<o;++n){let o=e&&n<e.length?[e[n]]:null,l=r&&n<r.length?[r[n]]:null;t.push(new s.MergeDecision(i.absolutePath.slice(),o,l,i.action,i.conflict))}}return n.stableSort(t,s.decisionSortKey)}(t),s.resolveCommonPaths(t);for(let e of t)"either"===e.action?(r.labelSource(e.localDiff,{decision:e,action:"either"}),r.labelSource(e.remoteDiff,{decision:e,action:"either"})):(r.labelSource(e.localDiff,{decision:e,action:"local"}),r.labelSource(e.remoteDiff,{decision:e,action:"remote"})),r.labelSource(e.customDiff,{decision:e,action:"custom"});return t}serialize(){let e={};for(let t in this.base)n.valueIn(t,["cells","metadata"])||(e[t]=this.base[t]);e.metadata=this.metadata.serialize();let t=[];for(let e of this.cells){let i=e.serialize();null!==i&&t.push(i)}return e.cells=t,e}get decisions(){let e=[];for(let t of this.cells)e=e.concat(t.decisions);return e=e.concat(this.metadata.decisions),e}get conflicts(){let e=[];for(let t of this.decisions)t.conflict&&e.push(t);return e}buildCellList(e){let t=[];for(let e of this.base.cells)t.push({base:e,decisions:[]});let i=0;for(let s of e){let e=s.absolutePath;if(!(e.length<1||"cells"!==e[0]))if(n.arraysEqual(e,["cells"])){let e=null,n=!1;for(let r of s.diffs)if(r&&0!==r.length&&(e=r[0].key,"addrange"===r[0].op)){let r=i+e;t.splice(r,0,{base:null,decisions:[s]}),i+=1,n=!0;break}if(n)continue;if(null===e)throw new Error("No index could be found for merge decision!");t[e+i].decisions.push(s)}else t[e[1]].decisions.push(s)}let s=[];for(let e of t)s.push(new l.CellMergeModel(e.base,e.decisions,this.mimetype));return s}}},4007:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CellMergeWidget=t.CELLMERGE_CLASS=void 0;const n=i(1096),s=i(3992),r=i(3788),o=i(3642),l=i(111),a=i(8439),d=i(3127),u=i(7842),c=i(5168),h=i(7513),f=i(9156);t.CELLMERGE_CLASS="jp-Cell-merge";const p="jp-mod-todelete",g="jp-mod-clearoutputs",m="jp-Cellrow-source",_="jp-Cellrow-outputs",y="jp-conflicted-outputs";class v extends s.Panel{constructor(e,i,n){super(),this.sourceView=null,this.metadataView=null,this.outputViews=null,this.addClass(t.CELLMERGE_CLASS),this._model=e,this._rendermime=i,this.mimetype=n,this.init()}static createMergeView(e,t,i,n,s=!1){let r=null;return i instanceof d.StringDiffModel&&(r=l.createNbdimeMergeView(t,e,i,s)),r}static getOutputs(e,t){let i=[];for(let n of e)!0===t?n.base&&i.push(n.base):n.remote&&i.push(n.remote);return i}validateMerged(e){if(this.sourceView&&this.sourceView instanceof l.MergeView){let t=this.sourceView.getMergedValue(),i=a.splitLines(t);e.source!==i&&(e.source=i)}if(this.metadataView&&this.metadataView instanceof l.MergeView){let t=this.metadataView.getMergedValue();JSON.stringify(e.metadata)!==t&&(e.metadata=JSON.parse(t))}if(n.isCode(e)&&this.outputViews){let t=this.outputViews.merged.toJSON();e.outputs=t}return e}init(){let e=this.model,t=f.MERGE_CLASSES.slice();this.createHeader(),e.merged.unchanged&&e.local&&e.local.unchanged&&e.remote&&e.remote.unchanged&&this.addClass(f.UNCHANGED_MERGE_CLASS);let i=e.local&&e.local.added,n=e.local&&e.local.deleted,o=e.remote&&e.remote.added,l=e.remote&&e.remote.deleted;if(i&&!o||n&&!l?this.headerTitle=i?"Cell added locally":"Cell deleted locally":(o&&!i||l&&!n)&&(this.headerTitle=o?"Cell added remotely":"Cell deleted remotely"),null===e.local||null===e.remote||e.local.unchanged&&e.remote.unchanged&&e.merged.unchanged||e.local.added!==e.remote.added||e.local.deleted&&e.remote.unchanged||e.local.unchanged&&e.remote.deleted||e.local.added&&e.agreedCell||e.local.deleted&&e.remote.deleted){t=t.slice(1,3);let r=u.CellDiffWidget.createView(e.merged.source,e.merged,t,this._rendermime);if(i&&!o||n&&!l?this.addClass(f.ONEWAY_LOCAL_CLASS):o&&!i||l&&!n?this.addClass(f.ONEWAY_REMOTE_CLASS):n&&l?(this.headerTitle="Deleted on both sides",this.addClass(f.TWOWAY_DELETION_CLASS)):i&&o&&(this.headerTitle="Added on both sides",this.addClass(f.TWOWAY_ADDITION_CLASS)),r.addClass(m),this.addWidget(r),a.hasEntries(e.merged.outputs)){let i=new s.Panel;for(let n of e.merged.outputs)r=u.CellDiffWidget.createView(n,e.merged,t,this._rendermime),i.addWidget(r);i.addClass(_),this.addWidget(i)}}else{let i=e.getExecutionCountDecision();if(i&&"clear"===i.action){let e=new c.FlexPanel({direction:"left-to-right"});e.addClass("jp-Cellrow-executionCount");let t=new s.Widget;t.node.innerText="Execution count will be cleared.",e.addWidget(t),this.addWidget(e)}let n=null;if(n=e.local&&e.local.source.unchanged&&e.remote&&e.remote.source.unchanged&&e.merged.source.unchanged?u.CellDiffWidget.createView(e.merged.source,e.merged,t,this._rendermime):v.createMergeView(e.local?e.local.source:null,e.remote?e.remote.source:null,e.merged.source,t),null===n)throw new Error("Was not able to create merge view for cell!");this.sourceView=n,n.addClass(m),this.addWidget(n);let o=!1,l=!1;for(let t of e.subModels)if(t&&!t.deleted&&(o=o||!!t.metadata&&!t.metadata.unchanged,t.outputs&&t.outputs.length>0))for(let e of t.outputs)l=l||!e.unchanged;if(o){let i=v.createMergeView(e.local?e.local.metadata:null,e.remote?e.remote.metadata:null,e.merged.metadata,t,!0);if(null===i)throw new Error("Was not able to create merge view for cell metadata!");this.metadataView=i;let n=new s.Panel;n.addWidget(i);let o="Metadata changed",l=new r.CollapsiblePanel(n,o,!0);l.addClass("jp-Cellrow-metadata"),this.addWidget(l)}if(l||a.hasEntries(e.merged.outputs)){let t=v.getOutputs(e.local?e.local.outputs:[],!0),i=v.getOutputs(e.local?e.local.outputs:[]),n=v.getOutputs(e.remote?e.remote.outputs:[]),o=v.getOutputs(e.merged.outputs),a=new h.RenderableOutputsMergeView(o,f.MERGE_CLASSES,this._rendermime,t,n,i);this.outputViews=a;let d=l?e.outputsConflicted?"Outputs conflicted":"Outputs changed":"Outputs unchanged",u=new r.CollapsiblePanel(a,d,!l);if(u.addClass(_),e.outputsConflicted){u.addClass(y);let t=new s.Widget;t.addClass("jp-conflicted-outputs-button");let i=t.node,n=document.createElement("button");n.onclick=i=>{0===i.button&&(e.clearOutputConflicts(),u.removeClass(y),u.headerTitle="Outputs changed",i.preventDefault(),i.stopPropagation(),t.parent=null)},n.innerText="Mark resolved",i.appendChild(n),u.header.insertWidget(1,t)}this.addWidget(u)}}}createHeader(){let e=new s.Panel;e.addClass("jp-Merge-cellHeader");let t=o.DragPanel.createDefaultHandle();if(e.addWidget(t),t=new s.Widget,this.headerTitleWidget=t,t.addClass("jp-Merge-cellHeader-title"),e.addWidget(t),a.hasEntries(this.model.merged.outputs)){let t=this._createClearOutputToggle();e.addWidget(t)}let i=this._createDeleteToggle();e.addWidget(i),this.addWidget(e),this.header=e}_createClearOutputToggle(){let{checkbox:e,widget:t}=f.createCheckbox(this.model.clearOutputs,"Clear outputs");return this.model.clearOutputs&&this.addClass(g),e.onchange=t=>{this.model.clearOutputs=e.checked,this.toggleClass(g,e.checked)},this.model.clearOutputsChanged.connect(((t,i)=>{e.checked=i,this.toggleClass(g,i)})),t.addClass("jp-Merge-clearOutput-toggle"),t}_createDeleteToggle(){let{checkbox:e,widget:t}=f.createCheckbox(this.model.deleteCell,"Delete cell");return this.model.deleteCell&&this.addClass(p),e.onchange=t=>{this.model.deleteCell=e.checked,this.toggleClass(p,e.checked)},this.model.deleteCellChanged.connect(((t,i)=>{e.checked=i,this.toggleClass(p,i)})),t.addClass("jp-Merge-delete-cell-toggle"),t}set headerTitle(e){this.headerTitleWidget.node.innerText=e}get model(){return this._model}}t.CellMergeWidget=v},9156:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCheckbox=t.MERGE_CLASSES=t.TWOWAY_DELETION_CLASS=t.TWOWAY_ADDITION_CLASS=t.ONEWAY_REMOTE_CLASS=t.ONEWAY_LOCAL_CLASS=t.UNCHANGED_MERGE_CLASS=void 0;const n=i(3992);t.UNCHANGED_MERGE_CLASS="jp-Merge-unchanged",t.ONEWAY_LOCAL_CLASS="jp-Merge-oneway-local",t.ONEWAY_REMOTE_CLASS="jp-Merge-oneway-remote",t.TWOWAY_ADDITION_CLASS="jp-Merge-twoway-addition",t.TWOWAY_DELETION_CLASS="jp-Merge-twoway-deletion",t.MERGE_CLASSES=["jp-Merge-base","jp-Merge-local","jp-Merge-remote","jp-Merge-merged"],t.createCheckbox=function(e,t,i=!1){let s=document.createElement("input");s.setAttribute("type","checkbox"),s.checked=e,s.indeterminate=i;let r=new n.Widget,o=document.createElement("label");return o.innerHTML=t,o.insertBefore(s,o.childNodes[0]),r.node.appendChild(o),{checkbox:s,widget:r}}},3285:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChunkedCellsWidget=t.CellsDragDrop=void 0;const n=i(3992),s=i(1840),r=i(3642),o="jp-conflicted-cells";class l extends r.FriendlyDragDrop{constructor(e){super(e),this._moved=new s.Signal(this),this.addClass("jp-merge-celldragdrop")}move(e,t){let i=e[0],n=t[0],s=e[1],r=t[1],o=r;if(i===n)if(r>s)o-=1,t[1]=o;else if(s===r)return;let l=this.friends[n],a=this.friends[i];const d=a.widgets[s];l.insertWidget(o,d),this._moved.emit({widget:d,oldParent:a,before:o>0?l.widgets[o-1]:null,after:o<l.widgets.length?l.widgets[o+1]:null})}get moved(){return this._moved}}t.CellsDragDrop=l;class a extends n.Panel{constructor(){super(),this._resolved=new s.Signal(this),this.addClass(o),this.header=new n.Widget,this.header.addClass("jp-conflicted-cells-header"),this.header.node.innerText="Conflicting cell operations";let e=document.createElement("button");e.innerText="Resolve Conflict",e.onclick=this.onResolve.bind(this),e.className="jp-conflicted-cells-button",this.header.node.appendChild(e),this.addWidget(this.header),this.cells=new l,this.addWidget(this.cells)}onResolve(e){for(let e of this.cells.widgets){let t=e.model;if(t.onesided&&t.conflicted)for(let e of t.decisions)e.conflict=!1}this.removeClass(o),this.header.parent=null,this.header.dispose(),this._resolved.emit(void 0)}dispose(){this.cells.parent=null,this.cells=null,this.header&&(this.header.parent=null),this.header=null,super.dispose()}get resolved(){return this._resolved}}t.ChunkedCellsWidget=a},8041:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(4007),t),s(i(1554),t),s(i(9281),t)},9281:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataMergeWidget=void 0;const n=i(3992),s=i(111),r=i(3788);class o extends n.Panel{constructor(e){super(),this._model=e,this.addClass("jp-Metadata-diff"),this.init()}init(){let e=this._model;this.view=s.createNbdimeMergeView(e.remote,e.local,e.merged);let t=new r.CollapsiblePanel(this.view,"Notebook metadata changed",!0);this.addWidget(t)}validateMerged(e){let t=this.view.getMergedValue();return JSON.stringify(e)!==t&&(e=JSON.parse(t)),e}}t.MetadataMergeWidget=o},1554:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookMergeWidget=void 0;const n=i(3992),s=i(8439),r=i(5168),o=i(9281),l=i(4007),a=i(9156),d=i(3285);class u extends n.Panel{constructor(e,t){super(),this.metadataWidget=null,this._model=e,this._rendermime=t,this.addClass("jp-Notebook-merge")}init(){let e=this._model,t=this._rendermime,i=Promise.resolve();this.addWidget(new c(e)),i=i.then((()=>{e.metadata&&(this.metadataWidget=new o.MetadataMergeWidget(e.metadata),this.addWidget(this.metadataWidget))})),i=i.then((()=>{this.cellContainer=new d.CellsDragDrop({acceptDropsFromExternalSource:!0}),this.cellContainer.setFriendlyGroup(d.CellsDragDrop.makeGroup()),this.cellContainer.moved.connect(this.onDragDropMove,this),this.addWidget(this.cellContainer)})),this.cellWidgets=[];let n=null;for(let s of e.cells)i=i.then((()=>new Promise((i=>{let r=new l.CellMergeWidget(s,t,e.mimetype);this.cellWidgets.push(r),s.onesided&&s.conflicted?(null===n&&(n=new d.ChunkedCellsWidget,n.cells.moved.connect(this.onDragDropMove,this),n.resolved.connect(this.onChunkResolved,this),this.cellContainer.addToFriendlyGroup(n.cells)),n.cells.addWidget(r)):(null!==n&&(this.cellContainer.addWidget(n),n=null),this.cellContainer.addWidget(r)),requestAnimationFrame((()=>{i()}))}))));return i=i.then((()=>{null!==n&&this.cellContainer.addWidget(n)})),i}validateMerged(e){let t=s.deepCopy(e);this.metadataWidget&&(t.metadata=this.metadataWidget.validateMerged(e.metadata));let i=0;for(let n of this.cellWidgets)n.model.deleteCell||(t.cells[i]=n.validateMerged(e.cells[i]),++i);return t}get model(){return this._model}onDragDropMove(e,t){let i,{widget:n,oldParent:s,before:r,after:o}=t,l=this._model.cells.indexOf(n.model);if(o)i=this._model.cells.indexOf(o.model);else{if(!r)throw new Error("Need either before or after");i=this._model.cells.indexOf(r.model)+1}if(i>l&&(i-=1),this._model.cells.splice(i,0,this._model.cells.splice(l,1)[0]),0===s.widgets.length&&s.parent.onResolve(),s!==this.cellContainer&&n.parent===this.cellContainer)for(let e of n.model.decisions)e.conflict=!1}onChunkResolved(e,t){let i=this.cellContainer.widgets.indexOf(e);for(;e.cells.widgets.length>0;)this.cellContainer.insertWidget(i++,e.cells.widgets[0]);e.parent=null,e.dispose()}}t.NotebookMergeWidget=u;class c extends r.FlexPanel{constructor(e){super({direction:"left-to-right"}),this.model=e,this.addClass("jp-Merge-notebook-controls");let t=!1;for(let i of e.cells)if(s.hasEntries(i.merged.outputs)){t=!0;break}t&&this.init_controls()}init_controls(){let e=a.createCheckbox(!1,"Clear <i>all</i> cell outputs");this.clearOutputsToggle=e.checkbox,this.addWidget(e.widget),e=a.createCheckbox(!1,"Clear <i>conflicted</i> cell outputs"),this.clearConflictedOutputsToggle=e.checkbox,this.addWidget(e.widget),this.updateOutputsToggles(),this.connectOutputsToggles()}connectOutputsToggles(){for(let e of this.model.cells)s.hasEntries(e.merged.outputs)&&e.clearOutputsChanged.connect(this.updateOutputsToggles,this);this.clearOutputsToggle.addEventListener("change",this),this.clearConflictedOutputsToggle.addEventListener("change",this)}disconnectOutputsToggles(){for(let e of this.model.cells)s.hasEntries(e.merged.outputs)&&e.clearOutputsChanged.disconnect(this.updateOutputsToggles,this);this.clearOutputsToggle.removeEventListener("change",this),this.clearConflictedOutputsToggle.removeEventListener("change",this)}handleEvent(e){"change"===e.type&&(e.currentTarget===this.clearOutputsToggle?this.onClearAllOutputsChanged():e.currentTarget===this.clearConflictedOutputsToggle&&this.onClearConflictedOutputsChanged())}onClearAllOutputsChanged(){this.disconnectOutputsToggles();try{let e=this.clearOutputsToggle.checked;for(let t of this.model.cells)s.hasEntries(t.merged.outputs)&&(t.clearOutputs=e)}finally{this.updateOutputsToggles(),this.connectOutputsToggles()}}onClearConflictedOutputsChanged(){this.disconnectOutputsToggles();try{let e=this.clearConflictedOutputsToggle.checked;for(let t of this.model.cells)s.hasEntries(t.merged.outputs)&&t.outputsConflicted&&(t.clearOutputs=e)}finally{this.updateOutputsToggles(),this.connectOutputsToggles()}}updateOutputsToggles(){let e,t;for(let i of this.model.cells){if(s.hasEntries(i.merged.outputs)){let n=i.clearOutputs;null===e||(void 0===e?e=n:e!==n&&(e=null)),i.outputsConflicted&&(null===t||(void 0===t?t=n:t!==n&&(t=null)))}if(null===t&&null===e)break}this.clearOutputsToggle.checked=!0===e,this.clearOutputsToggle.indeterminate=null===e,this.clearConflictedOutputsToggle.checked=!0===t,this.clearConflictedOutputsToggle.indeterminate=null===t,this.clearConflictedOutputsToggle.disabled=void 0===t,void 0===t?this.clearConflictedOutputsToggle.parentElement.setAttribute("disabled",""):this.clearConflictedOutputsToggle.parentElement.removeAttribute("disabled")}}},7513:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderableOutputsMergeView=t.ReorderableOutputWidget=t.ReorderableOutputModel=void 0;const n=i(8867),s=i(3992),r=i(3642),o=i(5168);class l extends n.OutputAreaModel{insert(e,t){this.list.insert(e,t)}move(e,t){this.list.move(e,t)}remove(e){return this.list.remove(e)}}t.ReorderableOutputModel=l;class a extends n.OutputArea{onModelChanged(e,t){let i=this.layout;switch(t.type){case"move":i.insertWidget(t.newIndex,i.widgets[t.oldIndex]);break;case"remove":i.removeWidgetAt(t.oldIndex);break;default:return super.onModelChanged(e,t)}}}t.ReorderableOutputWidget=a;class d extends r.DropPanel{constructor(){super({acceptDropsFromExternalSource:!0}),this.callback=null}findDropTarget(e){return e===this.node||this.node.contains(e)?this.node:null}processDrop(e,t){this.callback&&this.callback(e,t)}}class u extends r.DragDropPanel{constructor(e,t,i,s,r,o){if(super(),this.base=null,this.remote=null,this.local=null,this.addClass("jp-Merge-reorder-outputs"),!s!=!r||!s!=!o)throw new Error("Renderable outputs merge-view either takes only merged output or a full set of four output lists.");if(s){this.base=new n.OutputAreaModel;for(let e of s)this.base.add(e);this.remote=new n.OutputAreaModel;for(let e of r)this.remote.add(e);this.local=new n.OutputAreaModel;for(let e of o)this.local.add(e)}this.merged=new l;for(let t of e)this.merged.add(t);this.rendermime=i,this.panes=[],this.init(t)}static makeOutputsDraggable(e){let t=e.layout.iter();for(let e=t.next();void 0!==e;e=t.next())r.DragPanel.makeHandle(e)}static get deleteDrop(){if(!u._deleteDrop){let e=new d;e.addClass("jp-Merge-output-drop-delete");let t=document.createElement("i");t.className="fa fa-lg fa-trash-o",t.setAttribute("aria-hidden","true"),e.node.appendChild(t),e.node.style.position="absolute",u._deleteDrop=e}return u._deleteDrop}init(e){let t=new o.FlexPanel({direction:"left-to-right",evenSizes:!0});if(this.local){let i=new n.OutputArea({model:this.local,rendermime:this.rendermime});i.addClass(e[1]),t.addWidget(i),this.panes.push(i)}if(this.base){let i=new n.OutputArea({model:this.base,rendermime:this.rendermime});i.addClass(e[0]),t.addWidget(i),this.panes.push(i)}if(this.remote){let i=new n.OutputArea({model:this.remote,rendermime:this.rendermime});i.addClass(e[2]),t.addWidget(i),this.panes.push(i)}t.widgets.length>0&&(this.addWidget(t),t=new o.FlexPanel({direction:"left-to-right",evenSizes:!0})),this.mergePane=new a({model:this.merged,rendermime:this.rendermime}),this.mergePane.addClass(e[3]),t.addWidget(this.mergePane),this.panes.push(this.mergePane),this.addWidget(t);for(let e of this.panes)u.makeOutputsDraggable(e)}findDragTarget(e){if(null===e)return null;for(let t of this.panes){let i=r.findChild(t.node,e);if(null!==i)return i}return null}getIndexOfChildNode(e,t){for(let t of this.panes){let i=r.findChild(t.node,e);if(null!==i)return[this.panes.indexOf(t),super.getIndexOfChildNode(i,t.layout)]}return null}move(e,t){let i=e[0],n=t[0];if(this.panes[n]!==this.mergePane)return;let s=e[1],r=t[1],o=r;if(i===n)if(r>s)o-=1,t[1]=o;else if(s===r)return;let l=this.mergePane.model,a=this.panes[i].model;n!==i?l.insert(o,a.get(s)):l.move(s,o),u.makeOutputsDraggable(this.mergePane)}findDropTarget(e){return e===this.mergePane.node&&0===this.mergePane.model.length?this.mergePane.node:r.findChild(this.mergePane.node,e)}processDrop(e,t){if(e===u.deleteDrop.node){let[e,i]=t.mimeData.getData(r.MIME_INDEX);if(this.panes[e]!==this.mergePane)return;this.mergePane.model.remove(i),t.preventDefault(),t.stopPropagation(),t.dropAction="move"}else if(e===this.mergePane.node&&0===this.mergePane.model.length){let e=t.mimeData.getData(r.MIME_INDEX);this.move(e,[this.panes.indexOf(this.mergePane),0]),t.preventDefault(),t.stopPropagation(),t.dropAction="copy"}else super.processDrop(e,t)}getDragImage(e){let t=this.findDragTarget(e);if(t){let e=t.cloneNode(!0);return e.style.width=t.offsetWidth.toString()+"px",e.classList.add("jp-Merge-dragimage-output"),e}return null}startDrag(e,t,i){if(super.startDrag(e,t,i),r.findChild(this.mergePane.node,e)){let e=u.deleteDrop;e.callback=this.processDrop.bind(this);let t=this.mergePane.node.getBoundingClientRect();e.node.style.left="0",e.node.style.width=(t.left+window.pageXOffset).toString()+"px",e.node.style.top=(t.top+window.pageYOffset).toString()+"px",e.node.style.height=t.height.toString()+"px",s.Widget.attach(e,document.body)}}onDragComplete(e){super.onDragComplete(e),u.deleteDrop.isAttached&&s.Widget.detach(u.deleteDrop)}}t.RenderableOutputsMergeView=u,u._deleteDrop=null},9858:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PatchObjectHelper=void 0;const n=i(8439);class s{constructor(e,t){this._diffLUT={};let i=[];if(t)for(let e of t)i.push(e.key),this._diffLUT[e.key]=e;this._diffKeys=i,this.baseKeys=r(e)}isDiffKey(e){return n.valueIn(e,this._diffKeys)}getDiffEntry(e){return this._diffLUT[e]}entriesAfterCurrentAddRem(){if(void 0===this._currentIsAddition)throw new Error("Current op is not an add or remove op");let e=this._currentIsAddition?"remove":"add";for(let t of this._remainingKeys){if(!n.valueIn(t,this._diffKeys))return!0;if(this._diffLUT[t].op!==e)return!0}return!1}iter(){return this._remainingKeys=this.baseKeys.concat(this._diffKeys).filter(n.unique).sort(),this}keys(){return this}next(){let e=this._remainingKeys.shift();if(e&&n.valueIn(e,this._diffKeys)){let t=this._diffLUT[e].op;this._currentIsAddition="add"===t||"remove"!==t&&void 0}return e}clone(){let e=new s({},null);return e.baseKeys=this.baseKeys,e._diffKeys=this._diffKeys,e._currentIsAddition=this._currentIsAddition,e._diffLUT=this._diffLUT,e._remainingKeys=this._remainingKeys.slice(),e}}t.PatchObjectHelper=s;let r=Object.keys||function(e){let t=Object.prototype.hasOwnProperty||function(){return!0},i=[];for(let n in e)t.call(e,n)&&i.push(n);return i}},2868:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patch=void 0;const n=i(1526),s=i(8439),r=i(4632),o=i(4425);t.patch=function e(t,i){if("string"==typeof t)return o.patchString(t,i,0,!1).remote;if(Array.isArray(t))return function(t,i){if(null===i)return s.deepCopy(t);let n=[],o=0,l=0;for(let a of i){r.validateSequenceOp(t,a);let i=a.key;for(let e of t.slice(o,i))n.push(s.deepCopy(e));"addrange"===a.op?(n=n.concat(a.valuelist),l=0):"removerange"===a.op?l=a.length:"patch"===a.op&&(n.push(e(t[i],a.diff)),l=1),o=Math.max(o,i+l)}for(let e of t.slice(o))n.push(s.deepCopy(e));return n}(n.JSONExt.deepCopy(t),i);if("number"==typeof t||"boolean"==typeof t)throw new TypeError("Cannot patch an atomic type: "+typeof t);if(null===t)throw new TypeError("Cannot patch a null base!");return function(t,i){let n={},o=Object.keys(t);if(i)for(let s of i){r.validateObjectOp(t,s,o);let i=s.key;"add"===s.op?n[i]=s.value:"remove"===s.op?o.splice(o.indexOf(i),1):"replace"===s.op?(o.splice(o.indexOf(i),1),n[i]=s.value):"patch"===s.op&&(o.splice(o.indexOf(i),1),n[i]=e(t[i],s.diff))}for(let e of o)n[e]=s.deepCopy(t[e]);return n}(n.JSONExt.deepCopy(t),i)}},8787:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(9858),t),s(i(2868),t),s(i(4425),t)},4425:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patchString=t.patchStringified=t.stringifyAndBlankNull=t.stringify=void 0;const n=i(8918),s=i(8439),r=i(4526),o=i(4632),l=i(8799),a=i(9858),d=i(7266);function u(e,t,i=!0){let n=d(e,{space:r.JSON_INDENT});return t&&(n=function(e,t,i){i=!1!==i;let n=e.split("\n"),o=new Array(n.length);i||(o[0]=n[0]);for(let e=i?0:1;e<n.length;e++)o[e]=s.repeatString(r.JSON_INDENT,t)+n[e];return o.join("\n")}(n,t,i)),n}function c(e,t,i,n){let s=[],o=[],a=0;if(null===t)return{remote:n?u(e,i):e,additions:s,deletions:o};t=r.flattenStringDiff(e,t);let d=0,c=0,p="";for(let i of t){let t=i.key,n=e.slice(d,t);if(p+=n,a+=n.length,"addrange"===i.op){let e=i.valuelist;s.push(new l.DiffRangeRaw(p.length,e.length,i.source)),p+=e,c=0}else"removerange"===i.op&&(c=i.length,o.push(new l.DiffRangeRaw(a,c,i.source)),a+=c);d=Math.max(d,t+c)}return p+=e.slice(d,e.length),n&&(p=u(p,i),h(i*r.JSON_INDENT.length+1,s,o),f(p,s),f(u(e,i),o)),{remote:p,additions:s,deletions:o}}function h(e,t,i){for(let i of t)i.offset(e);for(let t of i)t.offset(e)}function f(e,t){let i,n=['\\"',"\\\\","\\/","\\b","\\f","\\n","\\r","\\t"],s=/\\uD[89A-Fa-f][0-9a-fA-F]{2}\\uD[c-fC-F][0-9a-fA-F]{2}/g,r=/(?!\\uD[c-fC-F][0-9a-fA-F]{2})\\u(?!D[89A-Fa-f][0-9a-fA-F]{2})\d{4}/g,o=[],l=[];for(let t of n){let i=JSON.parse('"'+t+'"').length,n=0;for(;n=e.indexOf(t,n),!(n<0);)o.push(n),l.push(2-i),n++}for(;null!==(i=r.exec(e));)o.push(i.index),l.push(6-JSON.parse('"'+i[0]+'"').length);for(;null!==(i=s.exec(e));)o.push(i.index),l.push(12-JSON.parse('"'+i[0]+'"').length);for(let e=0;e<o.length;e++)for(let i of t){let t=o[e],n=l[e];i.from>t&&(i.from+=n),i.to>t&&(i.to+=n)}}t.stringify=u,t.stringifyAndBlankNull=function(e){return"string"==typeof e?e:null===e?"":u(e)},t.patchStringified=function e(t,i,d){if(void 0===d&&(d=0),"string"==typeof t)return c(t,i,d,d>0);if(Array.isArray(t))return function(t,i,n){let a="",d=[],c=[],f=0,p=",\n";if(null===i)return{remote:u(t,n),additions:d,deletions:c};let g=0,m=0;for(let s of i){o.validateSequenceOp(t,s);let i=s.key;for(;i>g;g++){let e=u(t[g],n+1)+p;a+=e,f+=e.length}if("addrange"===s.op){let e="";for(let t of s.valuelist)e+=u(t,n+1)+p;let r=e.length;i===t.length&&(r-=1),d.push(new l.DiffRangeRaw(a.length,r,s.source)),a+=e,m=0}else if("removerange"===s.op){let e="",r=s.length;for(let s=i;s<i+r;s++)e+=u(t[s],n+1)+p;let o=e.length;r+i===t.length&&(o-=1),c.push(new l.DiffRangeRaw(f,o,s.source)),f+=e.length,m=s.length}else if("patch"===s.op){let r=e(t[i],s.diff,n+1);m=1;let o=r.remote+p;h(a.length,r.additions,r.deletions),d=d.concat(r.additions),c=c.concat(r.deletions),f+=u(t[i],n+1).length,a+=o}g=Math.max(g,i+m)}for(;t.length>g;g++)a+=u(t[g],n+1)+p;a.slice(a.length-p.length)===p&&(a=a.slice(0,a.length-p.length));let _=s.repeatString(r.JSON_INDENT,n);return a=_+"[\n"+a+"\n"+_+"]",h(_.length+2,d,c),{remote:a,additions:d,deletions:c}}(t,i,d);if("number"==typeof t||"boolean"==typeof t)throw new TypeError("Cannot patch an atomic type: "+typeof t);if(null===t)throw new TypeError("Cannot patch a null base!");return function(t,i,d){let c="",f=[],p=[],g=",\n",m=0;if(null===i)return{remote:u(t,d),additions:f,deletions:p};let _=new a.PatchObjectHelper(t,i),y=_.baseKeys.slice();n.each(_.keys(),(i=>{let n=function(e,t){return s.repeatString(r.JSON_INDENT,t)+'"'+e+'": '}(i,d+1);if(_.isDiffKey(i)){let a=_.getDiffEntry(i);if(o.validateObjectOp(t,a,y),s.valueIn(a.op,["add","replace","remove"])){let e="replace"===a.op;if("add"===a.op||"replace"===a.op){let t=u(a.value,d+1,!1)+g,i=c.length,s=t.length;e?i+=n.length:s+=n.length,!e&&_.entriesAfterCurrentAddRem()||(s-=g.length,"add"===a.op&&(s+=1)),f.push(new l.DiffRangeRaw(i,s,a.source)),c+=n+t}if("remove"===a.op||"replace"===a.op){let s=u(t[i],d+1,!1)+g,r=m,o=s.length;e?r+=n.length:o+=n.length,!e&&_.entriesAfterCurrentAddRem()||(o-=g.length,"remove"===a.op&&(o+=1)),p.push(new l.DiffRangeRaw(r,o,a.source)),m+=n.length+s.length,y.splice(y.indexOf(i),1)}}else if("patch"===a.op){let s=e(t[i],a.diff,d+1),o=s.remote;o=n+o.slice((d+1)*r.JSON_INDENT.length)+g,h(c.length+n.length-(d+1)*r.JSON_INDENT.length,s.additions,s.deletions),c+=o,f=f.concat(s.additions),p=p.concat(s.deletions),m+=u(t[i],d+1,!1).length+n.length+g.length,y.splice(y.indexOf(i),1)}}else{let e=n+u(t[i],d+1,!1)+g;c+=e,m+=e.length}})),c.slice(c.length-g.length)===g&&(c=c.slice(0,c.length-g.length));let v=s.repeatString(r.JSON_INDENT,d);return c=v+"{\n"+c+"\n"+v+"}",h(v.length+2,f,p),{remote:c,additions:f,deletions:p}}(t,i,d)},t.patchString=c},5206:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlexLayout=void 0;const n=i(8918),s=i(2720),r=i(3992);class o extends r.PanelLayout{constructor(e={}){super(),this.order=null,this._wrap=!1,this._minimumSpacing=4,this._justifyContent=null,this._alignItems=null,this._alignContent=null,this._dirty=!1,this._direction="top-to-bottom",this._stretchType=null,this._evenSizes=!1,void 0!==e.direction&&(this._direction=e.direction),void 0!==e.minimumSpacing&&(this._minimumSpacing=l.clampSpacing(e.minimumSpacing)),void 0!==e.wrap&&(this._wrap=e.wrap),void 0!==e.justifyContent&&(this._justifyContent=e.justifyContent),void 0!==e.alignItems&&(this._alignItems=e.alignItems),void 0!==e.alignContent&&(this._alignContent=e.alignContent),void 0!==e.stretchType&&(this._stretchType=e.stretchType),void 0!==e.evenSizes&&(this._evenSizes=e.evenSizes)}get direction(){return this._direction}set direction(e){this._direction!==e&&(this._direction=e,this.parent&&(l.toggleDirection(this.parent,e),this.parent.fit()))}get minimumSpacing(){return this._minimumSpacing}set minimumSpacing(e){e=l.clampSpacing(e),this._minimumSpacing!==e&&(this._minimumSpacing=e,this.parent&&(this.parent.node.style.flexWrap=e?"wrap":"nowrap",this.parent.fit()))}get wrap(){return this._wrap}set wrap(e){this._wrap!==e&&(this._wrap=e,this.parent&&(this.parent.node.style.flexWrap=e?"wrap":"nowrap",this.parent.fit()))}get justifyContent(){return this._justifyContent}set justifyContent(e){if(this._justifyContent===e)return;this._justifyContent=e;let t=l.translateFlexString(e);this.parent&&(this.parent.node.style.justifyContent=t,this.parent.fit())}get alignItems(){return this._alignItems}set alignItems(e){if(this._alignItems===e)return;this._alignItems=e;let t=l.translateFlexString(e);this.parent&&(this.parent.node.style.alignItems=t,this.parent.fit())}get alignContent(){return this._alignContent}set alignContent(e){if(this._alignContent===e)return;this._alignContent=e;let t=l.translateFlexString(e);this.parent&&(this.parent.node.style.alignContent=t,!1!==this._wrap&&this.parent.fit())}get stretchType(){return this._stretchType}set stretchType(e){this._stretchType!==e&&(this._stretchType=e,this.parent&&this.parent.fit())}get evenSizes(){return this._evenSizes}set evenSizes(e){this._evenSizes!==e&&(this._evenSizes=e,this.parent&&this.parent.fit())}isHorizontal(){return"right-to-left"===this.direction||"left-to-right"===this.direction}isVertical(){return!this.isHorizontal()}init(){l.toggleDirection(this.parent,this.direction),super.init()}attachWidget(e,t){super.attachWidget(e,t),this.order&&n.ArrayExt.insert(this.order,e,t),this.parent.fit()}moveWidget(e,t,i){e!==t&&(this.order||(this.order=this.widgets.slice()),n.ArrayExt.move(this.order,e,t),this._dirty=!0),this.parent.update()}detachWidget(e,t){if(this.order){let e=0;for(;e<this.order.length;++e)if(t===this.order[e]){n.ArrayExt.removeAt(this.order,e);break}}super.detachWidget(e,t),this.parent.fit()}onAfterShow(e){super.onAfterShow(e),this.parent.update()}onAfterAttach(e){super.onAfterAttach(e),l.toggleDirection(this.parent,this._direction);let t=this.parent.node.style;t.flexWrap=this._wrap?"wrap":"nowrap",t.justifyContent=l.translateFlexString(this._justifyContent)||"",t.alignContent=l.translateFlexString(this._alignContent)||"",t.alignItems=l.translateFlexString(this._alignItems)||"",this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update()}onUpdateRequest(e){this.parent.isVisible&&this._update()}onFitRequest(e){this.parent.isAttached&&this._fit()}_fit(){this._dirty=!0;let e=this.parent.parent;e&&s.MessageLoop.sendMessage(e,r.Widget.Msg.FitRequest),this._dirty&&s.MessageLoop.sendMessage(this.parent,r.Widget.Msg.UpdateRequest)}_update(){this._dirty=!1;let e=this.order||this.widgets;if(0===e.length)return;let t=this.minimumSpacing.toString()+"px";if(this.isHorizontal())for(let i=0;i<e.length-1;++i)e[i].node.style.marginRight=t;else for(let i=0;i<e.length-1;++i)e[i].node.style.marginBottom=t;if(this._evenSizes||this.stretchType){let t=null,i=null,n=null;if(this._evenSizes)t=0,i=1;else switch(this._stretchType){case"grow":i=1,n=0;break;case"shrink":i=0,n=1;break;case"both":i=1,n=1;break;case"fixed":i=0,n=0;break;default:throw new TypeError("Invalid stretch type: "+this._stretchType)}for(let s=0;s<e.length;++s){let r=e[s].node.style;null!==t&&(r.flexBasis=t.toString()),null!==i&&(r.flexGrow=i.toString()),null!==n&&(r.flexShrink=n.toString())}}for(let t=0;t<e.length;++t)e[t].node.style.order=this.order?t.toString():""}}var l;t.FlexLayout=o,function(e){e.getGrow=function(e){let t=e.node.style.flexGrow;return t?parseInt(t,10):null},e.setGrow=function(e,t,i=!0){e.node.style.flexGrow=null===t?"":t.toString(),i&&e.parent&&e.parent.fit()},e.getShrink=function(e){let t=e.node.style.flexShrink;return t?parseInt(t,10):null},e.setShrink=function(e,t,i=!0){e.node.style.flexShrink=null===t?"":t.toString(),i&&e.parent&&e.parent.fit()},e.getSizeBasis=function(e){let t=e.node.style.flexBasis;return"auto"===t?"auto":t?parseInt(t.replace("px",""),10):null},e.setSizeBasis=function(e,t,i=!0){e.node.style.flexBasis="auto"===t?t:null===t?"":t.toString()+"px",i&&e.parent&&e.parent.fit()}}(o=t.FlexLayout||(t.FlexLayout={})),function(e){e.isHorizontal=function(e){return"left-to-right"===e||"right-to-left"===e},e.translateFlexString=function(e){return"start"!==e&&"end"!==e||(e="flex-"+e),e},e.toggleDirection=function(e,t){e.toggleClass("p-mod-left-to-right","left-to-right"===t),e.toggleClass("p-mod-right-to-left","right-to-left"===t),e.toggleClass("p-mod-top-to-bottom","top-to-bottom"===t),e.toggleClass("p-mod-bottom-to-top","bottom-to-top"===t)},e.clampSpacing=function(e){return Math.max(0,Math.floor(e))}}(l||(l={}))},5168:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlexPanel=void 0;const n=i(5206),s=i(3992),r="p-FlexPanel-child";class o extends s.Panel{constructor(e={}){super({layout:l.createLayout(e)}),e.layout||(void 0!==e.minimumSpacing&&(this.minimumSpacing=e.minimumSpacing),void 0!==e.direction&&(this.direction=e.direction)),this.addClass("p-FlexPanel")}get direction(){return this.layout.direction}set direction(e){this.layout.direction=e}get minimumSpacing(){return this.layout.minimumSpacing}set minimumSpacing(e){this.layout.minimumSpacing=e}get wrap(){return this.layout.wrap}set wrap(e){this.layout.wrap=e}get justifyContent(){return this.layout.justifyContent}set justifyContent(e){this.layout.justifyContent=e}get alignItems(){return this.layout.alignItems}set alignItems(e){this.layout.alignItems=e}get alignContent(){return this.layout.alignContent}set alignContent(e){this.layout.alignContent=e}get stretchType(){return this.layout.stretchType}set stretchType(e){this.layout.stretchType=e}get evenSizes(){return this.layout.evenSizes}set evenSizes(e){this.layout.evenSizes=e}onChildAdded(e){e.child.addClass(r)}onChildRemoved(e){e.child.removeClass(r)}onAfterAttach(e){super.onAfterAttach(e),this.fit()}}var l;t.FlexPanel=o,function(e){e.getGrow=function(e){return n.FlexLayout.getGrow(e)},e.setGrow=function(e,t){n.FlexLayout.setGrow(e,t)},e.getShrink=function(e){return n.FlexLayout.getShrink(e)},e.setShrink=function(e,t){n.FlexLayout.setShrink(e,t)},e.getSizeBasis=function(e){return n.FlexLayout.getSizeBasis(e)},e.setSizeBasis=function(e,t){n.FlexLayout.setSizeBasis(e,t)}}(o=t.FlexPanel||(t.FlexPanel={})),function(e){e.createLayout=function(e){return e.layout||new n.FlexLayout(e)}}(l||(l={}))}}]);